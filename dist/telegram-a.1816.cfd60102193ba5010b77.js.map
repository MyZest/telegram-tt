{"version":3,"file":"telegram-a.1816.cfd60102193ba5010b77.js","mappings":"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","sources":["webpack://telegram-t/./src/components/common/BadgeButton.module.scss?da7b","webpack://telegram-t/./src/components/common/BadgeButton.tsx","webpack://telegram-t/./src/components/common/gift/GiftRibbon.module.scss?54c5","webpack://telegram-t/./src/components/common/gift/GiftRibbon.tsx","webpack://telegram-t/./src/components/middle/message/actions/ChannelPhoto.tsx","webpack://telegram-t/./src/components/middle/message/actions/Gift.tsx","webpack://telegram-t/./src/components/middle/message/actions/GiveawayPrize.tsx","webpack://telegram-t/./src/components/middle/message/actions/StarGift.tsx","webpack://telegram-t/./src/components/common/MiniTable.module.scss?145f","webpack://telegram-t/./src/components/common/MiniTable.tsx","webpack://telegram-t/./src/components/middle/message/actions/StarGiftUnique.tsx","webpack://telegram-t/./src/components/middle/message/actions/SuggestedPhoto.tsx","webpack://telegram-t/./src/components/middle/message/SimilarChannels.module.scss?86cb","webpack://telegram-t/./src/components/middle/message/SimilarChannels.tsx","webpack://telegram-t/./src/hooks/useAverageColor.ts","webpack://telegram-t/./src/components/middle/message/ActionMessage.tsx","webpack://telegram-t/./src/components/middle/message/hooks/useFluidBackgroundFilter.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"root\":\"hJUqHi4B\",\"clickable\":\"hjDEmFaT\"};","import React from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './BadgeButton.module.scss';\n\ntype OwnProps = {\n  children: React.ReactNode;\n  className?: string;\n  onClick?: (e: React.MouseEvent<HTMLDivElement>) => void;\n};\n\nconst BadgeButton = ({\n  children,\n  className,\n  onClick,\n}: OwnProps) => {\n  return (\n    <div className={buildClassName(styles.root, onClick && styles.clickable, className)} onClick={onClick}>\n      {children}\n    </div>\n  );\n};\n\nexport default BadgeButton;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"AmQSvxpZ\",\"text\":\"pQW7dcwr\"};","import React, { memo } from '../../../lib/teact/teact';\nimport { withGlobal } from '../../../global';\n\nimport type { ThemeKey } from '../../../types';\n\nimport { selectTheme } from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\n\nimport useUniqueId from '../../../hooks/useUniqueId';\n\nimport styles from './GiftRibbon.module.scss';\n\nconst COLORS = {\n  red: [['#FF5B54', '#ED1C26'], ['#653633', '#532224']],\n  blue: [['#6ED2FF', '#34A4FC'], ['#344F5A', '#152E42']],\n} as const;\ntype ColorKey = keyof typeof COLORS;\n\nconst COLOR_KEYS = new Set(Object.keys(COLORS) as ColorKey[]);\n\ntype OwnProps = {\n  color: ColorKey | string;\n  text: string;\n  className?: string;\n};\n\ntype StateProps = {\n  theme: ThemeKey;\n};\n\nconst GiftRibbon = ({\n  text, color, className, theme,\n}: OwnProps & StateProps) => {\n  const randomId = useUniqueId();\n  const validSvgRandomId = `svg-${randomId}`; // ID must start with a letter\n\n  const colorKey = COLOR_KEYS.has(color as ColorKey) ? color as ColorKey : undefined;\n\n  const isDarkTheme = theme === 'dark';\n\n  const gradientColor = colorKey ? COLORS[colorKey][isDarkTheme ? 1 : 0] : undefined;\n  const startColor = gradientColor ? gradientColor[0] : color;\n  const endColor = gradientColor ? gradientColor[1] : color;\n\n  return (\n    <div className={buildClassName(styles.root, className)}>\n      <svg className={styles.ribbon} width=\"56\" height=\"56\" viewBox=\"0 0 56 56\" fill=\"none\">\n        <path d=\"M52.4851 26.4853L29.5145 3.51472C27.2641 1.26428 24.2119 0 21.0293 0H2.82824C1.04643 0 0.154103 2.15429 1.41403 3.41422L52.5856 54.5858C53.8455 55.8457 55.9998 54.9534 55.9998 53.1716V34.9706C55.9998 31.788 54.7355 28.7357 52.4851 26.4853Z\" fill={`url(#${validSvgRandomId})`} />\n        <defs>\n          <linearGradient id={validSvgRandomId} x1=\"27.9998\" y1=\"1\" x2=\"27.9998\" y2=\"55\" gradientUnits=\"userSpaceOnUse\">\n            <stop stop-color={startColor} />\n            <stop offset=\"1\" stop-color={endColor} />\n          </linearGradient>\n        </defs>\n      </svg>\n      <div className={styles.text}>{text}</div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global): StateProps => {\n    return {\n      theme: selectTheme(global),\n    };\n  },\n)(GiftRibbon));\n","import React, { memo } from '../../../../lib/teact/teact';\n\nimport type { ApiMessageActionChatEditPhoto } from '../../../../api/types/messageActions';\n\nimport { REM } from '../../../common/helpers/mediaDimensions';\n\nimport { type ObserveFn } from '../../../../hooks/useIntersectionObserver';\n\nimport Avatar from '../../../common/Avatar';\n\nimport styles from '../ActionMessage.module.scss';\n\ntype OwnProps = {\n  action: ApiMessageActionChatEditPhoto;\n  observeIntersection?: ObserveFn;\n  onClick?: NoneToVoidFunction;\n};\n\nconst AVATAR_SIZE = 15 * REM;\n\nconst ChannelPhotoAction = ({\n  action,\n  onClick,\n  observeIntersection,\n} : OwnProps) => {\n  return (\n    <Avatar\n      className={styles.channelPhoto}\n      photo={action.photo}\n      loopIndefinitely\n      withVideo\n      observeIntersection={observeIntersection}\n      onClick={onClick}\n      size={AVATAR_SIZE}\n    />\n  );\n};\n\nexport default memo(ChannelPhotoAction);\n","import React, { memo, useRef } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiSticker } from '../../../../api/types';\nimport type { ApiMessageActionGiftPremium, ApiMessageActionGiftStars } from '../../../../api/types/messageActions';\n\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectGiftStickerForDuration,\n  selectGiftStickerForStars,\n} from '../../../../global/selectors';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\n\nimport { type ObserveFn } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\n\nimport Sparkles from '../../../common/Sparkles';\nimport StickerView from '../../../common/StickerView';\n\nimport styles from '../ActionMessage.module.scss';\n\ntype OwnProps = {\n  action: ApiMessageActionGiftPremium | ApiMessageActionGiftStars;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n  onClick?: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  sticker?: ApiSticker;\n  canPlayAnimatedEmojis: boolean;\n};\n\nconst STICKER_SIZE = 150;\n\nconst GiftAction = ({\n  action,\n  sticker,\n  canPlayAnimatedEmojis,\n  onClick,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n}: OwnProps & StateProps) => {\n  // eslint-disable-next-line no-null/no-null\n  const stickerRef = useRef<HTMLDivElement>(null);\n  const lang = useLang();\n  const message = action.type === 'giftPremium' ? action.message : undefined;\n\n  return (\n    <div className={styles.contentBox} tabIndex={0} role=\"button\" onClick={onClick}>\n      <div\n        ref={stickerRef}\n        className={styles.stickerWrapper}\n        style={`width: ${STICKER_SIZE}px; height: ${STICKER_SIZE}px`}\n      >\n        {sticker && (\n          <StickerView\n            containerRef={stickerRef}\n            sticker={sticker}\n            size={STICKER_SIZE}\n            observeIntersectionForLoading={observeIntersectionForLoading}\n            observeIntersectionForPlaying={observeIntersectionForPlaying}\n            noLoad={!canPlayAnimatedEmojis}\n          />\n        )}\n      </div>\n      <div className={styles.info}>\n        <h3 className={styles.title}>\n          {action.type === 'giftPremium' ? (\n            lang('ActionGiftPremiumTitle', { months: action.months }, { pluralValue: action.months })\n          ) : (\n            lang('ActionGiftStarsTitle', { amount: action.stars }, { pluralValue: action.stars })\n          )}\n        </h3>\n        <div>\n          {message && renderTextWithEntities(message)}\n          {!message && (lang(action.type === 'giftPremium' ? 'ActionGiftPremiumText' : 'ActionGiftStarsText'))}\n        </div>\n      </div>\n      <div className={styles.actionButton}>\n        <Sparkles preset=\"button\" />\n        {lang('ActionViewButton')}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { action }): StateProps => {\n    const sticker = action.type === 'giftPremium'\n      ? selectGiftStickerForDuration(global, action.months)\n      : selectGiftStickerForStars(global, action.stars);\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n\n    return {\n      sticker,\n      canPlayAnimatedEmojis,\n    };\n  },\n)(GiftAction));\n","import React, { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiChat, ApiSticker } from '../../../../api/types';\nimport type { ApiMessageActionGiftCode, ApiMessageActionPrizeStars } from '../../../../api/types/messageActions';\n\nimport { getPeerTitle } from '../../../../global/helpers';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectChat,\n  selectGiftStickerForDuration,\n  selectGiftStickerForStars,\n} from '../../../../global/selectors';\nimport { renderPeerLink } from '../helpers/messageActions';\n\nimport { type ObserveFn } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\n\nimport Sparkles from '../../../common/Sparkles';\nimport StickerView from '../../../common/StickerView';\n\nimport styles from '../ActionMessage.module.scss';\n\ntype OwnProps = {\n  action: ApiMessageActionGiftCode | ApiMessageActionPrizeStars;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n  onClick?: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  channel?: ApiChat;\n  sticker?: ApiSticker;\n  canPlayAnimatedEmojis: boolean;\n};\n\nconst STICKER_SIZE = 150;\n\nconst GiveawayPrizeAction = ({\n  action,\n  sticker,\n  canPlayAnimatedEmojis,\n  channel,\n  onClick,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n}: OwnProps & StateProps) => {\n  // eslint-disable-next-line no-null/no-null\n  const stickerRef = useRef<HTMLDivElement>(null);\n  const lang = useLang();\n\n  const channelLink = useMemo(() => {\n    const channelTitle = channel && getPeerTitle(lang, channel);\n    const channelFallbackText = lang('ActionFallbackChannel');\n\n    return renderPeerLink(channel?.id, channelTitle || channelFallbackText);\n  }, [channel, lang]);\n\n  return (\n    <div className={styles.contentBox} tabIndex={0} role=\"button\" onClick={onClick}>\n      <div\n        ref={stickerRef}\n        className={styles.stickerWrapper}\n        style={`width: ${STICKER_SIZE}px; height: ${STICKER_SIZE}px`}\n      >\n        {sticker && (\n          <StickerView\n            containerRef={stickerRef}\n            sticker={sticker}\n            size={STICKER_SIZE}\n            observeIntersectionForLoading={observeIntersectionForLoading}\n            observeIntersectionForPlaying={observeIntersectionForPlaying}\n            noLoad={!canPlayAnimatedEmojis}\n          />\n        )}\n      </div>\n      <div>\n        <h3 className={styles.title}>{lang('ActionGiveawayResultTitle')}</h3>\n        <div>\n          {action.type === 'giftCode' && (\n            lang(\n              action.isViaGiveaway ? 'ActionGiveawayResultPremiumText' : 'ActionGiftCodePremiumText',\n              { months: action.months, channel: channelLink },\n              {\n                withNodes: true,\n                withMarkdown: true,\n                pluralValue: action.months,\n                renderTextFilters: ['br'],\n              },\n            )\n          )}\n          {action.type === 'prizeStars' && (\n            lang(\n              'ActionGiveawayResultStarsText',\n              { amount: action.stars, channel: channelLink },\n              {\n                withNodes: true,\n                withMarkdown: true,\n                pluralValue: action.stars,\n                renderTextFilters: ['br'],\n              },\n            )\n          )}\n        </div>\n      </div>\n      <div className={styles.actionButton}>\n        <Sparkles preset=\"button\" />\n        {lang(action.type === 'giftCode' ? 'ActionOpenGiftButton' : 'ActionViewButton')}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { action }): StateProps => {\n    const sticker = action.type === 'giftCode'\n      ? selectGiftStickerForDuration(global, action.months)\n      : selectGiftStickerForStars(global, action.stars);\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n\n    const channel = selectChat(global, action.boostPeerId!);\n\n    return {\n      sticker,\n      canPlayAnimatedEmojis,\n      channel,\n    };\n  },\n)(GiveawayPrizeAction));\n","import React, { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiMessage, ApiPeer } from '../../../../api/types';\nimport type { ApiMessageActionStarGift } from '../../../../api/types/messageActions';\n\nimport { getPeerTitle, isChatChannel } from '../../../../global/helpers';\nimport { isApiPeerChat } from '../../../../global/helpers/peers';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectPeer,\n  selectSender,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport { formatStarsAsText } from '../../../../util/localization/format';\nimport { getServerTime } from '../../../../util/serverTime';\nimport { formatIntegerCompact } from '../../../../util/textFormat';\nimport { getStickerFromGift } from '../../../common/helpers/gifts';\nimport { renderTextWithEntities } from '../../../common/helpers/renderTextWithEntities';\nimport { renderPeerLink, translateWithYou } from '../helpers/messageActions';\n\nimport useDynamicColorListener from '../../../../hooks/stickers/useDynamicColorListener';\nimport { type ObserveFn } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\n\nimport GiftRibbon from '../../../common/gift/GiftRibbon';\nimport Sparkles from '../../../common/Sparkles';\nimport StickerView from '../../../common/StickerView';\n\nimport styles from '../ActionMessage.module.scss';\n\ntype OwnProps = {\n  message: ApiMessage;\n  action: ApiMessageActionStarGift;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n  onClick?: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  canPlayAnimatedEmojis: boolean;\n  sender?: ApiPeer;\n  recipient?: ApiPeer;\n  starGiftMaxConvertPeriod?: number;\n};\n\nconst STICKER_SIZE = 120;\n\nconst StarGiftAction = ({\n  action,\n  message,\n  canPlayAnimatedEmojis,\n  sender,\n  recipient,\n  starGiftMaxConvertPeriod,\n  onClick,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n}: OwnProps & StateProps) => {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n  // eslint-disable-next-line no-null/no-null\n  const stickerRef = useRef<HTMLDivElement>(null);\n  const lang = useLang();\n\n  const { isOutgoing } = message;\n\n  const sticker = getStickerFromGift(action.gift)!;\n\n  const peer = isOutgoing ? recipient : sender;\n  const isChannel = peer && isApiPeerChat(peer) && isChatChannel(peer);\n\n  const backgroundColor = useDynamicColorListener(ref, 'background-color', !action.gift.availabilityTotal);\n\n  const fallbackPeerTitle = lang('ActionFallbackSomeone');\n  const peerTitle = peer && getPeerTitle(lang, peer);\n  const isSelf = sender?.id === recipient?.id;\n\n  const giftDescription = useMemo(() => {\n    const peerLink = renderPeerLink(peer?.id, peerTitle || fallbackPeerTitle);\n    const starsAmount = action.starsToConvert !== undefined\n      ? formatStarsAsText(lang, action.starsToConvert) : undefined;\n\n    if (action.isUpgraded) {\n      return lang('ActionStarGiftUpgraded');\n    }\n\n    if (action.alreadyPaidUpgradeStars) {\n      return translateWithYou(\n        lang, 'ActionStarGiftUpgradeText', !isOutgoing || isSelf, { peer: peerLink },\n      );\n    }\n\n    if (action.isConverted) {\n      return translateWithYou(\n        lang, 'ActionStarGiftConvertedText', !isOutgoing || isSelf, { peer: peerLink, amount: starsAmount },\n      );\n    }\n\n    if (starGiftMaxConvertPeriod && getServerTime() < message.date + starGiftMaxConvertPeriod) {\n      return translateWithYou(\n        lang, 'ActionStarGiftConvertText', !isOutgoing || isSelf, { peer: peerLink, amount: starsAmount },\n      );\n    }\n\n    if (isChannel) {\n      return lang(\n        'ActionStarGiftChannelText', { amount: starsAmount }, { withNodes: true },\n      );\n    }\n\n    return translateWithYou(\n      lang, 'ActionStarGiftNoConvertText', !isOutgoing || isSelf, { peer: peerLink },\n    );\n  }, [\n    action, fallbackPeerTitle, isChannel, isOutgoing, lang, message.date, peer?.id, peerTitle, starGiftMaxConvertPeriod,\n    isSelf,\n  ]);\n\n  return (\n    <div\n      ref={ref}\n      className={buildClassName(styles.contentBox, styles.starGift)}\n      tabIndex={0}\n      role=\"button\"\n      onClick={onClick}\n    >\n      <div\n        ref={stickerRef}\n        className={styles.stickerWrapper}\n        style={`width: ${STICKER_SIZE}px; height: ${STICKER_SIZE}px`}\n      >\n        {sticker && (\n          <StickerView\n            containerRef={stickerRef}\n            sticker={sticker}\n            size={STICKER_SIZE}\n            observeIntersectionForLoading={observeIntersectionForLoading}\n            observeIntersectionForPlaying={observeIntersectionForPlaying}\n            noLoad={!canPlayAnimatedEmojis}\n          />\n        )}\n      </div>\n      {action.gift.availabilityTotal && (\n        <GiftRibbon\n          color={backgroundColor || 'blue'}\n          text={lang('ActionStarGiftLimitedRibbon', { total: formatIntegerCompact(action.gift.availabilityTotal) })}\n        />\n      )}\n      <div className={styles.info}>\n        <h3 className={styles.title}>\n          {isSelf ? lang('ActionStarGiftSelf') : lang(\n            isOutgoing ? 'ActionStarGiftTo' : 'ActionStarGiftFrom',\n            {\n              peer: renderPeerLink(peer?.id, peerTitle || fallbackPeerTitle),\n            },\n            {\n              withNodes: true,\n            },\n          )}\n        </h3>\n        <div className={styles.subtitle}>\n          {action.message && renderTextWithEntities(action.message)}\n          {!action.message && giftDescription}\n        </div>\n      </div>\n      <div className={styles.actionButton}>\n        <Sparkles preset=\"button\" />\n        {action.alreadyPaidUpgradeStars && !action.isUpgraded && !isOutgoing\n          ? lang('ActionStarGiftUnpack') : lang('ActionViewButton')}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { message, action }): StateProps => {\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n    const messageSender = selectSender(global, message);\n    const giftSender = action.fromId ? selectPeer(global, action.fromId) : undefined;\n    const messageRecipient = selectPeer(global, message.chatId);\n    const giftRecipient = action.peerId ? selectPeer(global, action.peerId) : undefined;\n\n    return {\n      canPlayAnimatedEmojis,\n      sender: giftSender || messageSender,\n      recipient: giftRecipient || messageRecipient,\n      starGiftMaxConvertPeriod: global.appConfig?.starGiftMaxConvertPeriod,\n    };\n  },\n)(StarGiftAction));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"cKr8J5k_\",\"key\":\"c9RLLvfs\",\"value\":\"QEuGpzIc\"};","import React, { memo, type TeactNode } from '../../lib/teact/teact';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport styles from './MiniTable.module.scss';\n\nexport type TableEntry = [TeactNode, TeactNode];\n\ntype OwnProps = {\n  data: TableEntry[];\n  className?: string;\n  style?: string;\n  valueClassName?: string;\n  keyClassName?: string;\n};\n\nconst MiniTable = ({\n  data,\n  style,\n  className,\n  valueClassName,\n  keyClassName,\n}: OwnProps) => {\n  return (\n    <div className={buildClassName(styles.root, className)} style={style}>\n      {data.map(([key, value]) => (\n        <>\n          <div className={buildClassName(styles.key, keyClassName)}>{key}</div>\n          <div className={buildClassName(styles.value, valueClassName)}>{value}</div>\n        </>\n      ))}\n    </div>\n  );\n};\n\nexport default memo(MiniTable);\n","import React, { memo, useMemo, useRef } from '../../../../lib/teact/teact';\nimport { withGlobal } from '../../../../global';\n\nimport type { ApiMessage, ApiPeer } from '../../../../api/types';\nimport type { ApiMessageActionStarGiftUnique } from '../../../../api/types/messageActions';\n\nimport { getPeerTitle } from '../../../../global/helpers';\nimport {\n  selectCanPlayAnimatedEmojis,\n  selectPeer,\n  selectSender,\n} from '../../../../global/selectors';\nimport buildClassName from '../../../../util/buildClassName';\nimport buildStyle from '../../../../util/buildStyle';\nimport { getGiftAttributes, getStickerFromGift } from '../../../common/helpers/gifts';\nimport { renderPeerLink } from '../helpers/messageActions';\n\nimport { type ObserveFn } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\n\nimport GiftRibbon from '../../../common/gift/GiftRibbon';\nimport MiniTable, { type TableEntry } from '../../../common/MiniTable';\nimport RadialPatternBackground from '../../../common/profile/RadialPatternBackground';\nimport Sparkles from '../../../common/Sparkles';\nimport StickerView from '../../../common/StickerView';\n\nimport styles from '../ActionMessage.module.scss';\n\ntype OwnProps = {\n  message: ApiMessage;\n  action: ApiMessageActionStarGiftUnique;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n  onClick?: NoneToVoidFunction;\n};\n\ntype StateProps = {\n  canPlayAnimatedEmojis: boolean;\n  sender?: ApiPeer;\n  recipient?: ApiPeer;\n};\n\nconst STICKER_SIZE = 120;\n\nconst StarGiftAction = ({\n  action,\n  message,\n  canPlayAnimatedEmojis,\n  sender,\n  recipient,\n  onClick,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n}: OwnProps & StateProps) => {\n  // eslint-disable-next-line no-null/no-null\n  const stickerRef = useRef<HTMLDivElement>(null);\n  const lang = useLang();\n\n  const { isOutgoing } = message;\n\n  const sticker = getStickerFromGift(action.gift)!;\n  const attributes = getGiftAttributes(action.gift)!;\n  const model = attributes.model!;\n  const pattern = attributes.pattern!;\n  const backdrop = attributes.backdrop!;\n  const backgroundColors = [backdrop.centerColor, backdrop.edgeColor];\n  const adaptedPatternColor = `${backdrop.patternColor.slice(0, 7)}55`;\n\n  const tableData = useMemo((): TableEntry[] => [\n    [lang('ActionStarGiftUniqueModel'), model.name],\n    [lang('ActionStarGiftUniqueBackdrop'), backdrop.name],\n    [lang('ActionStarGiftUniqueSymbol'), pattern.name],\n  ], [lang, model, pattern, backdrop]);\n\n  const peer = isOutgoing ? recipient : sender;\n\n  const fallbackPeerTitle = lang('ActionFallbackSomeone');\n  const peerTitle = peer && getPeerTitle(lang, peer);\n  const isSelf = sender?.id === recipient?.id;\n\n  return (\n    <div\n      className={buildClassName(styles.contentBox, styles.starGift, styles.uniqueGift)}\n      tabIndex={0}\n      role=\"button\"\n      onClick={onClick}\n    >\n      <div className={styles.uniqueBackgroundWrapper}>\n        <RadialPatternBackground\n          className={styles.uniqueBackground}\n          backgroundColors={backgroundColors}\n          patternColor={backdrop.patternColor}\n          patternIcon={pattern.sticker}\n          clearBottomSector\n        />\n      </div>\n      <div\n        ref={stickerRef}\n        className={styles.stickerWrapper}\n        style={`width: ${STICKER_SIZE}px; height: ${STICKER_SIZE}px`}\n      >\n        {sticker && (\n          <StickerView\n            containerRef={stickerRef}\n            sticker={sticker}\n            size={STICKER_SIZE}\n            observeIntersectionForLoading={observeIntersectionForLoading}\n            observeIntersectionForPlaying={observeIntersectionForPlaying}\n            noLoad={!canPlayAnimatedEmojis}\n          />\n        )}\n      </div>\n      <GiftRibbon\n        color={adaptedPatternColor}\n        text={lang('ActionStarGiftUniqueRibbon')}\n      />\n      <div className={styles.info}>\n        <h3 className={styles.title}>\n          {isSelf ? lang('ActionStarGiftSelf') : lang(\n            isOutgoing ? 'ActionStarGiftTo' : 'ActionStarGiftFrom',\n            {\n              peer: renderPeerLink(peer?.id, peerTitle || fallbackPeerTitle),\n            },\n            {\n              withNodes: true,\n            },\n          )}\n        </h3>\n        <div className={styles.subtitle} style={`color: ${backdrop.textColor}`}>\n          {lang('GiftUnique', { title: action.gift.title, number: action.gift.number })}\n        </div>\n        <MiniTable data={tableData} style={`color: ${backdrop.textColor}`} valueClassName={styles.uniqueValue} />\n      </div>\n      <div\n        className={styles.actionButton}\n        style={buildStyle(adaptedPatternColor && `background-color: ${adaptedPatternColor}`)}\n      >\n        <Sparkles preset=\"button\" />\n        {lang('ActionViewButton')}\n      </div>\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { message, action }): StateProps => {\n    const canPlayAnimatedEmojis = selectCanPlayAnimatedEmojis(global);\n    const messageSender = selectSender(global, message);\n    const giftSender = action.fromId ? selectPeer(global, action.fromId) : undefined;\n    const messageRecipient = selectPeer(global, message.chatId);\n    const giftRecipient = action.peerId ? selectPeer(global, action.peerId) : undefined;\n\n    return {\n      canPlayAnimatedEmojis,\n      sender: giftSender || messageSender,\n      recipient: giftRecipient || messageRecipient,\n    };\n  },\n)(StarGiftAction));\n","import React, { memo, useMemo, useState } from '../../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../../global';\n\nimport type { ApiMessageActionSuggestProfilePhoto } from '../../../../api/types/messageActions';\nimport { type ApiMessage, type ApiPeer, MAIN_THREAD_ID } from '../../../../api/types';\nimport { MediaViewerOrigin, SettingsScreens } from '../../../../types';\n\nimport { getPeerTitle, getPhotoMediaHash, getVideoProfilePhotoMediaHash } from '../../../../global/helpers';\nimport { selectPeer } from '../../../../global/selectors';\nimport { fetchBlob } from '../../../../util/files';\nimport { renderPeerLink } from '../helpers/messageActions';\n\nimport useFlag from '../../../../hooks/useFlag';\nimport { type ObserveFn } from '../../../../hooks/useIntersectionObserver';\nimport useLang from '../../../../hooks/useLang';\nimport useLastCallback from '../../../../hooks/useLastCallback';\nimport useMedia from '../../../../hooks/useMedia';\n\nimport Avatar from '../../../common/Avatar';\nimport ConfirmDialog from '../../../ui/ConfirmDialog';\nimport CropModal from '../../../ui/CropModal';\n\nimport styles from '../ActionMessage.module.scss';\n\ntype OwnProps = {\n  message: ApiMessage;\n  action: ApiMessageActionSuggestProfilePhoto;\n  observeIntersection?: ObserveFn;\n};\n\ntype StateProps = {\n  peer?: ApiPeer;\n};\n\nconst SuggestedPhotoAction = ({\n  message,\n  action,\n  peer,\n  observeIntersection,\n} : OwnProps & StateProps) => {\n  const { openMediaViewer, uploadProfilePhoto, showNotification } = getActions();\n  const { isOutgoing } = message;\n  const photo = action.photo;\n\n  const lang = useLang();\n  const [cropModalBlob, setCropModalBlob] = useState<Blob | undefined>();\n  const [isVideoModalOpen, openVideoModal, closeVideoModal] = useFlag(false);\n\n  const suggestedPhotoUrl = useMedia(getPhotoMediaHash(photo, 'full'));\n  const suggestedVideoUrl = useMedia(getVideoProfilePhotoMediaHash(photo));\n  const isVideo = photo.isVideo;\n\n  const text = useMemo(() => {\n    const peerName = (peer && getPeerTitle(lang, peer)) || lang('ActionFallbackUser');\n    const peerLink = renderPeerLink(peer?.id, peerName);\n\n    if (isOutgoing) {\n      return lang('ActionSuggestedPhotoYou', { user: peerLink }, { withNodes: true });\n    }\n\n    return lang('ActionSuggestedPhoto', { user: peerLink }, { withNodes: true });\n  }, [lang, isOutgoing, peer]);\n\n  const showAvatarNotification = useLastCallback(() => {\n    showNotification({\n      title: lang('ActionSuggestedPhotoUpdatedTitle'),\n      message: lang('ActionSuggestedPhotoUpdatedDescription'),\n      action: {\n        action: 'requestNextSettingsScreen',\n        payload: {\n          screen: SettingsScreens.Main,\n        },\n      },\n      actionText: lang('Open'),\n    });\n  });\n\n  const handleSetSuggestedAvatar = useLastCallback((file: File) => {\n    setCropModalBlob(undefined);\n    uploadProfilePhoto({ file });\n    showAvatarNotification();\n  });\n\n  const handleCloseCropModal = useLastCallback(() => {\n    setCropModalBlob(undefined);\n  });\n\n  const handleSetVideo = useLastCallback(async () => {\n    if (!suggestedVideoUrl) return;\n\n    closeVideoModal();\n    showAvatarNotification();\n\n    // TODO Once we support uploading video avatars, add crop/trim modal here\n    const blob = await fetchBlob(suggestedVideoUrl);\n    uploadProfilePhoto({\n      file: new File([blob], 'avatar.mp4'),\n      isVideo: true,\n      videoTs: photo.videoSizes?.find((l) => l.videoStartTs !== undefined)?.videoStartTs,\n    });\n  });\n\n  const handleViewSuggestedAvatar = async () => {\n    if (!isOutgoing && suggestedPhotoUrl) {\n      if (isVideo) {\n        openVideoModal();\n      } else {\n        setCropModalBlob(await fetchBlob(suggestedPhotoUrl));\n      }\n    } else {\n      openMediaViewer({\n        chatId: message.chatId,\n        messageId: message.id,\n        threadId: MAIN_THREAD_ID,\n        origin: MediaViewerOrigin.SuggestedAvatar,\n      });\n    }\n  };\n\n  return (\n    <div className={styles.contentBox} tabIndex={0} role=\"button\" onClick={handleViewSuggestedAvatar}>\n      <Avatar\n        className={styles.suggestedAvatar}\n        photo={action.photo}\n        loopIndefinitely\n        withVideo\n        observeIntersection={observeIntersection}\n        size=\"jumbo\"\n      />\n      <div className={styles.suggestedText}>\n        {text}\n      </div>\n      <div className={styles.actionButton}>\n        {lang('ActionSuggestedPhotoButton')}\n      </div>\n      <CropModal\n        file={cropModalBlob}\n        onClose={handleCloseCropModal}\n        onChange={handleSetSuggestedAvatar}\n      />\n      <ConfirmDialog\n        isOpen={isVideoModalOpen}\n        title={lang('ActionSuggestedVideoTitle')}\n        confirmHandler={handleSetVideo}\n        onClose={closeVideoModal}\n        text={lang('ActionSuggestedVideoText')}\n      />\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { message }): StateProps => {\n    const peer = selectPeer(global, message.chatId);\n\n    return {\n      peer,\n    };\n  },\n)(SuggestedPhotoAction));\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"V3RHiOJR\",\"notch\":\"tfG_BSDt\",\"notch-path\":\"HVbeGv4t\",\"notchPath\":\"HVbeGv4t\",\"header\":\"s7QOi22Q\",\"title\":\"JstcOhAN\",\"close\":\"meewH7t_\",\"icon\":\"d8axZxyN\",\"skeleton\":\"xKVZv7KE\",\"inner\":\"njAC8dR9\",\"is-appearing\":\"eb8rX09E\",\"isAppearing\":\"eb8rX09E\",\"channels-appear\":\"AL2cLQ4i\",\"channelsAppear\":\"AL2cLQ4i\",\"is-hiding\":\"XR6_qLCc\",\"isHiding\":\"XR6_qLCc\",\"channels-disappear\":\"TwwnoiuD\",\"channelsDisappear\":\"TwwnoiuD\",\"channel-list\":\"h4gWlNen\",\"channelList\":\"h4gWlNen\",\"item\":\"glDpC2av\",\"last-item\":\"MBChXyXk\",\"lastItem\":\"MBChXyXk\",\"avatar\":\"gqCs9fSo\",\"badge\":\"gnYhwnvf\",\"members-count\":\"HWgwnKui\",\"membersCount\":\"HWgwnKui\",\"channel-title\":\"BTNQ4KBH\",\"channelTitle\":\"BTNQ4KBH\",\"fake-avatar\":\"Xl9MVMTn\",\"fakeAvatar\":\"Xl9MVMTn\",\"fake-avatar-inner\":\"Qizai7yv\",\"fakeAvatarInner\":\"Qizai7yv\",\"last-fake-avatar\":\"JxSmtOFi\",\"lastFakeAvatar\":\"JxSmtOFi\"};","import React, {\n  memo, useEffect, useMemo, useRef, useState,\n} from '../../../lib/teact/teact';\nimport { getActions, getGlobal, withGlobal } from '../../../global';\n\nimport type { ApiChat, ApiChatFullInfo } from '../../../api/types';\n\nimport {\n  selectChat,\n  selectChatFullInfo,\n  selectIsCurrentUserPremium,\n  selectSimilarChannelIds,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { getServerTime } from '../../../util/serverTime';\nimport { formatIntegerCompact } from '../../../util/textFormat';\n\nimport useTimeout from '../../../hooks/schedulers/useTimeout';\nimport useAverageColor from '../../../hooks/useAverageColor';\nimport useFlag from '../../../hooks/useFlag';\nimport useHorizontalScroll from '../../../hooks/useHorizontalScroll';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useOldLang from '../../../hooks/useOldLang';\n\nimport Avatar from '../../common/Avatar';\nimport Icon from '../../common/icons/Icon';\nimport Button from '../../ui/Button';\nimport Skeleton from '../../ui/placeholder/Skeleton';\n\nimport styles from './SimilarChannels.module.scss';\n\nconst DEFAULT_BADGE_COLOR = '#3C3C4399';\nconst SHOW_CHANNELS_NUMBER = 10;\nconst ANIMATION_DURATION = 150;\nconst MIN_SKELETON_DELAY = 300;\nconst MAX_SKELETON_DELAY = 2000;\nconst AUTO_EXPAND_TIME = 10; // Seconds from joining\n\ntype OwnProps = {\n  chatId: string;\n};\n\ntype StateProps = {\n  similarChannelIds?: string[];\n  isExpanded?: boolean;\n  count?: number;\n  isCurrentUserPremium: boolean;\n  channelJoinInfo?: ApiChatFullInfo['joinInfo'];\n};\n\nconst SimilarChannels = ({\n  chatId,\n  similarChannelIds,\n  isExpanded,\n  count,\n  isCurrentUserPremium,\n  channelJoinInfo,\n}: StateProps & OwnProps) => {\n  const { toggleChannelRecommendations, loadChannelRecommendations } = getActions();\n\n  const lang = useOldLang();\n\n  const [isShowing, markShowing, markNotShowing] = useFlag(false);\n  const [isHiding, markHiding, markNotHiding] = useFlag(false);\n\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const ignoreAutoScrollRef = useRef(false);\n  const similarChannels = useMemo(() => {\n    if (!similarChannelIds) {\n      return undefined;\n    }\n\n    const global = getGlobal();\n    return similarChannelIds.map((id) => selectChat(global, id)).filter(Boolean);\n  }, [similarChannelIds]);\n  // Show skeleton while loading similar channels\n  const [shouldRenderSkeleton, setShouldRenderSkeleton] = useState(false);\n  const firstSimilarChannels = useMemo(() => similarChannels?.slice(0, SHOW_CHANNELS_NUMBER), [similarChannels]);\n  const areSimilarChannelsPresent = Boolean(firstSimilarChannels?.length);\n\n  const isAnimating = isHiding || isShowing;\n  const shouldRenderChannels = Boolean(\n    !shouldRenderSkeleton\n      && (isExpanded || isAnimating)\n      && areSimilarChannelsPresent,\n  );\n\n  useHorizontalScroll(ref, !shouldRenderChannels, true);\n\n  useEffect(() => {\n    if (!similarChannelIds) {\n      loadChannelRecommendations({ chatId });\n    }\n  }, [chatId, similarChannelIds]);\n\n  useTimeout(() => setShouldRenderSkeleton(false), MAX_SKELETON_DELAY);\n\n  useEffect(() => {\n    if (shouldRenderSkeleton && similarChannels && isExpanded) {\n      const id = setTimeout(() => {\n        setShouldRenderSkeleton(false);\n      }, MIN_SKELETON_DELAY);\n\n      return () => clearTimeout(id);\n    }\n\n    return undefined;\n  }, [similarChannels, isExpanded, shouldRenderSkeleton]);\n\n  useEffect(() => {\n    if (isExpanded) {\n      markShowing();\n      markNotHiding();\n      setShouldRenderSkeleton(!similarChannelIds);\n      if (!ignoreAutoScrollRef.current) {\n        setTimeout(() => {\n          ref.current?.scrollIntoView({ behavior: 'smooth' });\n        }, ANIMATION_DURATION);\n      }\n    } else {\n      markNotShowing();\n      markHiding();\n    }\n  }, [isExpanded, similarChannelIds]);\n\n  const handleToggle = useLastCallback(() => {\n    toggleChannelRecommendations({ chatId });\n  });\n\n  useEffect(() => {\n    if (!channelJoinInfo?.joinedDate || isExpanded) return;\n    if (getServerTime() - channelJoinInfo.joinedDate <= AUTO_EXPAND_TIME) {\n      handleToggle();\n      ignoreAutoScrollRef.current = true;\n    }\n  }, [channelJoinInfo, isExpanded]);\n\n  if (!shouldRenderChannels && !shouldRenderSkeleton) {\n    return undefined;\n  }\n\n  return (\n    <div className={buildClassName(styles.root)}>\n      {shouldRenderSkeleton && <Skeleton className={styles.skeleton} />}\n      {shouldRenderChannels && (\n        <div\n          className={buildClassName(\n            isShowing && styles.isAppearing,\n            isHiding && styles.isHiding,\n          )}\n        >\n          <div className={styles.notch}>\n            <svg\n              width=\"19\"\n              height=\"7\"\n              viewBox=\"0 0 19 7\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                className={styles.notchPath}\n                fill-rule=\"evenodd\"\n                clip-rule=\"evenodd\"\n                d=\"M19 7C16.8992 7 13.59 3.88897 11.5003 1.67424C10.7648 0.894688 10.397 0.50491 10.0434 0.385149C9.70568 0.270811 9.4225 0.270474 9.08456 0.38401C8.73059 0.50293 8.36133 0.892443 7.62279 1.67147C5.52303 3.88637 2.18302 7 0 7L19 7Z\"\n                fill=\"white\"\n              />\n            </svg>\n          </div>\n          <div className={styles.inner}>\n            <div className={styles.header}>\n              <span className={styles.title}>{lang('SimilarChannels')}</span>\n              <Button\n                className={styles.close}\n                color=\"translucent\"\n                onClick={handleToggle}\n              >\n                <Icon name=\"close\" />\n              </Button>\n            </div>\n            <div ref={ref} className={buildClassName(styles.channelList, 'no-scrollbar')}>\n              {firstSimilarChannels?.map((channel, i) => {\n                return i === SHOW_CHANNELS_NUMBER - 1 ? (\n                  <MoreChannels\n                    channel={channel}\n                    chatId={chatId}\n                    channelsCount={count! - SHOW_CHANNELS_NUMBER + 1}\n                    isCurrentUserPremium={isCurrentUserPremium}\n                  />\n                ) : (\n                  <SimilarChannel channel={channel} />\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nfunction SimilarChannel({ channel }: { channel: ApiChat }) {\n  const { openChat } = getActions();\n  const color = useAverageColor(channel, DEFAULT_BADGE_COLOR);\n\n  return (\n    <div className={styles.item} onClick={() => openChat({ id: channel.id })}>\n      <Avatar className={styles.avatar} key={channel.id} size=\"large\" peer={channel} />\n      <div style={`background: ${color}`} className={styles.badge}>\n        <Icon name=\"user-filled\" className={styles.icon} />\n        <span className={styles.membersCount}>{formatIntegerCompact(channel?.membersCount || 0)}\n        </span>\n      </div>\n      <span className={styles.channelTitle}>{channel.title}</span>\n    </div>\n  );\n}\n\nfunction MoreChannels({\n  channel,\n  chatId,\n  channelsCount,\n  isCurrentUserPremium,\n}: {\n  channel: ApiChat;\n  chatId: string;\n  channelsCount: number;\n  isCurrentUserPremium: boolean;\n}) {\n  const { openPremiumModal, openChatWithInfo } = getActions();\n  const lang = useOldLang();\n\n  const handleClickMore = () => {\n    if (isCurrentUserPremium) {\n      openChatWithInfo({\n        id: chatId, shouldReplaceHistory: true, profileTab: 'similarChannels', forceScrollProfileTab: true,\n      });\n    } else {\n      openPremiumModal();\n    }\n  };\n\n  return (\n    <div\n      className={buildClassName(styles.item, styles.lastItem)}\n      onClick={() => handleClickMore()}\n    >\n      <Avatar className={styles.avatar} key={channel.id} size=\"large\" peer={channel} />\n      <div className={styles.fakeAvatar}>\n        <div className={styles.fakeAvatarInner} />\n      </div>\n      <div className={buildClassName(styles.fakeAvatar, styles.lastFakeAvatar)}>\n        <div className={styles.fakeAvatarInner} />\n      </div>\n      <div className={styles.badge}>\n        <span className={styles.membersCount}>{`+${channelsCount}`}</span>\n        {!isCurrentUserPremium && <Icon name=\"lock-badge\" className={styles.icon} />}\n      </div>\n      <span className={styles.channelTitle}>{lang('MoreSimilar')}</span>\n    </div>\n  );\n}\n\nexport default memo(\n  withGlobal<OwnProps>((global, { chatId }): StateProps => {\n    const { similarChannelIds, isExpanded, count } = selectSimilarChannelIds(global, chatId) || {};\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n    const chatFullInfo = selectChatFullInfo(global, chatId);\n\n    return {\n      similarChannelIds,\n      isExpanded,\n      count,\n      isCurrentUserPremium,\n      channelJoinInfo: chatFullInfo?.joinInfo,\n    };\n  })(SimilarChannels),\n);\n","import { useEffect, useState } from '../lib/teact/teact';\n\nimport type { ApiPeer } from '../api/types';\nimport { ApiMediaFormat } from '../api/types';\n\nimport { getChatAvatarHash } from '../global/helpers';\nimport { getAverageColor, rgb2hex } from '../util/colors';\nimport useMedia from './useMedia';\n\nfunction useAverageColor(peer: ApiPeer, fallbackColor = '#00000000') {\n  const [color, setColor] = useState(fallbackColor);\n  const imgBlobUrl = useMedia(getChatAvatarHash(peer), false, ApiMediaFormat.BlobUrl);\n\n  useEffect(() => {\n    (async () => {\n      if (!imgBlobUrl) {\n        return;\n      }\n\n      const averageColor = await getAverageColor(imgBlobUrl);\n      setColor(`#${rgb2hex(averageColor)}`);\n    })();\n  }, [imgBlobUrl]);\n\n  return color;\n}\n\nexport default useAverageColor;\n","import React, {\n  memo, useEffect, useMemo, useRef, useUnmountCleanup,\n} from '../../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../../global';\n\nimport type { ApiMessageAction } from '../../../api/types/messageActions';\nimport type {\n  FocusDirection,\n  ThreadId,\n} from '../../../types';\nimport type { Signal } from '../../../util/signals';\nimport { type ApiMessage, type ApiPeer, MAIN_THREAD_ID } from '../../../api/types';\nimport { MediaViewerOrigin } from '../../../types';\n\nimport { MESSAGE_APPEARANCE_DELAY } from '../../../config';\nimport { getMessageHtmlId } from '../../../global/helpers';\nimport { getMessageReplyInfo } from '../../../global/helpers/replies';\nimport {\n  selectChat,\n  selectChatMessage,\n  selectIsCurrentUserPremium,\n  selectIsInSelectMode,\n  selectIsMessageFocused,\n  selectSender,\n  selectTabState,\n  selectTheme,\n} from '../../../global/selectors';\nimport buildClassName from '../../../util/buildClassName';\nimport { isLocalMessageId } from '../../../util/keys/messageKey';\nimport { isElementInViewport } from '../../../util/visibility/isElementInViewport';\nimport { IS_ANDROID, IS_ELECTRON, IS_FLUID_BACKGROUND_SUPPORTED } from '../../../util/windowEnvironment';\nimport { preventMessageInputBlur } from '../helpers/preventMessageInputBlur';\n\nimport useAppLayout from '../../../hooks/useAppLayout';\nimport useContextMenuHandlers from '../../../hooks/useContextMenuHandlers';\nimport useEnsureMessage from '../../../hooks/useEnsureMessage';\nimport useFlag from '../../../hooks/useFlag';\nimport { type ObserveFn, useOnIntersect } from '../../../hooks/useIntersectionObserver';\nimport useLastCallback from '../../../hooks/useLastCallback';\nimport useMessageResizeObserver from '../../../hooks/useResizeMessageObserver';\nimport useShowTransition from '../../../hooks/useShowTransition';\nimport { type OnIntersectPinnedMessage } from '../hooks/usePinnedMessage';\nimport useFluidBackgroundFilter from './hooks/useFluidBackgroundFilter';\nimport useFocusMessage from './hooks/useFocusMessage';\n\nimport ActionMessageText from './ActionMessageText';\nimport ChannelPhoto from './actions/ChannelPhoto';\nimport Gift from './actions/Gift';\nimport PremiumGiftCode from './actions/GiveawayPrize';\nimport StarGift from './actions/StarGift';\nimport StarGiftUnique from './actions/StarGiftUnique';\nimport SuggestedPhoto from './actions/SuggestedPhoto';\nimport ContextMenuContainer from './ContextMenuContainer';\nimport Reactions from './reactions/Reactions';\nimport SimilarChannels from './SimilarChannels';\n\nimport styles from './ActionMessage.module.scss';\n\ntype OwnProps = {\n  message: ApiMessage;\n  threadId: ThreadId;\n  appearanceOrder: number;\n  isJustAdded?: boolean;\n  isLastInList?: boolean;\n  memoFirstUnreadIdRef?: { current: number | undefined };\n  getIsMessageListReady?: Signal<boolean>;\n  onIntersectPinnedMessage?: OnIntersectPinnedMessage;\n  observeIntersectionForBottom?: ObserveFn;\n  observeIntersectionForLoading?: ObserveFn;\n  observeIntersectionForPlaying?: ObserveFn;\n};\n\ntype StateProps = {\n  sender?: ApiPeer;\n  currentUserId?: string;\n  isInsideTopic?: boolean;\n  isFocused?: boolean;\n  focusDirection?: FocusDirection;\n  noFocusHighlight?: boolean;\n  replyMessage?: ApiMessage;\n  patternColor?: string;\n  isCurrentUserPremium?: boolean;\n  isInSelectMode?: boolean;\n  hasUnreadReaction?: boolean;\n};\n\nconst SINGLE_LINE_ACTIONS: Set<ApiMessageAction['type']> = new Set([\n  'pinMessage',\n  'chatEditPhoto',\n  'chatDeletePhoto',\n  'unsupported',\n]);\nconst HIDDEN_TEXT_ACTIONS: Set<ApiMessageAction['type']> = new Set(['giftCode', 'prizeStars', 'suggestProfilePhoto']);\n\nconst ActionMessage = ({\n  message,\n  threadId,\n  sender,\n  currentUserId,\n  appearanceOrder,\n  isJustAdded,\n  isLastInList,\n  memoFirstUnreadIdRef,\n  getIsMessageListReady,\n  isInsideTopic,\n  isFocused,\n  focusDirection,\n  noFocusHighlight,\n  replyMessage,\n  patternColor,\n  isCurrentUserPremium,\n  isInSelectMode,\n  hasUnreadReaction,\n  onIntersectPinnedMessage,\n  observeIntersectionForBottom,\n  observeIntersectionForLoading,\n  observeIntersectionForPlaying,\n}: OwnProps & StateProps) => {\n  const {\n    requestConfetti,\n    openMediaViewer,\n    getReceipt,\n    checkGiftCode,\n    openPrizeStarsTransactionFromGiveaway,\n    openPremiumModal,\n    openStarsTransactionFromGift,\n    openGiftInfoModalFromMessage,\n    toggleChannelRecommendations,\n    animateUnreadReaction,\n    markMentionsRead,\n  } = getActions();\n\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n\n  const { id, chatId } = message;\n  const action = message.content.action!;\n  const isLocal = isLocalMessageId(id);\n\n  const isTextHidden = HIDDEN_TEXT_ACTIONS.has(action.type);\n  const isSingleLine = SINGLE_LINE_ACTIONS.has(action.type);\n  const isFluidMultiline = IS_FLUID_BACKGROUND_SUPPORTED && !isSingleLine;\n\n  const messageReplyInfo = getMessageReplyInfo(message);\n  const { replyToMsgId, replyToPeerId } = messageReplyInfo || {};\n\n  const withServiceReactions = Boolean(message.areReactionsPossible && message?.reactions?.results?.length);\n\n  const shouldSkipRender = isInsideTopic && action.type === 'topicCreate';\n\n  const { isTouchScreen } = useAppLayout();\n\n  useOnIntersect(ref, !shouldSkipRender ? observeIntersectionForBottom : undefined);\n\n  useMessageResizeObserver(ref, !shouldSkipRender && isLastInList && action.type !== 'channelJoined');\n\n  useEnsureMessage(\n    replyToPeerId || chatId,\n    replyToMsgId,\n    replyMessage,\n    id,\n  );\n  useFocusMessage({\n    elementRef: ref,\n    chatId: message.chatId,\n    isFocused,\n    focusDirection,\n    noFocusHighlight,\n    isJustAdded,\n  });\n\n  useUnmountCleanup(() => {\n    if (message.isPinned) {\n      onIntersectPinnedMessage?.({ viewportPinnedIdsToRemove: [message.id] });\n    }\n  });\n\n  const {\n    isContextMenuOpen, contextMenuAnchor,\n    handleBeforeContextMenu, handleContextMenu,\n    handleContextMenuClose, handleContextMenuHide,\n  } = useContextMenuHandlers(\n    ref,\n    isTouchScreen && isInSelectMode,\n    !IS_ELECTRON,\n    IS_ANDROID,\n    getIsMessageListReady,\n  );\n  const isContextMenuShown = contextMenuAnchor !== undefined;\n\n  const handleMouseDown = (e: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    preventMessageInputBlur(e);\n    handleBeforeContextMenu(e);\n  };\n\n  const noAppearanceAnimation = appearanceOrder <= 0;\n  const [isShown, markShown] = useFlag(noAppearanceAnimation);\n  useEffect(() => {\n    if (noAppearanceAnimation) {\n      return;\n    }\n\n    setTimeout(markShown, appearanceOrder * MESSAGE_APPEARANCE_DELAY);\n  }, [appearanceOrder, markShown, noAppearanceAnimation]);\n\n  const { ref: refWithTransition } = useShowTransition({\n    isOpen: isShown,\n    noOpenTransition: noAppearanceAnimation,\n    noCloseTransition: true,\n    className: false,\n    ref,\n  });\n\n  useEffect(() => {\n    const bottomMarker = ref.current;\n    if (!bottomMarker || !isElementInViewport(bottomMarker)) return;\n\n    if (hasUnreadReaction) {\n      animateUnreadReaction({ messageIds: [id] });\n    }\n\n    if (message.hasUnreadMention) {\n      markMentionsRead({ messageIds: [id] });\n    }\n  }, [hasUnreadReaction, id, animateUnreadReaction, message.hasUnreadMention]);\n\n  useEffect(() => {\n    if (action.type !== 'giftPremium') return;\n    if ((memoFirstUnreadIdRef?.current && id >= memoFirstUnreadIdRef.current) || isLocal) {\n      requestConfetti({});\n    }\n  }, [action.type, id, isLocal, memoFirstUnreadIdRef]);\n\n  const fluidBackgroundStyle = useFluidBackgroundFilter(isFluidMultiline ? patternColor : undefined);\n\n  const handleClick = useLastCallback(() => {\n    switch (action.type) {\n      case 'paymentSent':\n      case 'paymentRefunded': {\n        getReceipt({\n          chatId: message.chatId,\n          messageId: message.id,\n        });\n        break;\n      }\n\n      case 'chatEditPhoto': {\n        openMediaViewer({\n          chatId: message.chatId,\n          messageId: message.id,\n          threadId,\n          origin: MediaViewerOrigin.ChannelAvatar,\n        });\n        break;\n      }\n\n      case 'giftCode': {\n        checkGiftCode({ slug: action.slug, message: { chatId: message.chatId, messageId: message.id } });\n        break;\n      }\n\n      case 'prizeStars': {\n        openPrizeStarsTransactionFromGiveaway({\n          chatId: message.chatId,\n          messageId: message.id,\n        });\n        break;\n      }\n\n      case 'giftPremium': {\n        openPremiumModal({\n          isGift: true,\n          fromUserId: sender?.id,\n          toUserId: sender && sender.id === currentUserId ? chatId : currentUserId,\n          monthsAmount: action.months,\n        });\n        break;\n      }\n\n      case 'giftStars': {\n        openStarsTransactionFromGift({\n          chatId: message.chatId,\n          messageId: message.id,\n        });\n        break;\n      }\n\n      case 'starGift':\n      case 'starGiftUnique': {\n        openGiftInfoModalFromMessage({\n          chatId: message.chatId,\n          messageId: message.id,\n        });\n        break;\n      }\n\n      case 'channelJoined': {\n        toggleChannelRecommendations({ chatId });\n        break;\n      }\n    }\n  });\n\n  const fullContent = useMemo(() => {\n    switch (action.type) {\n      case 'chatEditPhoto': {\n        if (!action.photo) return undefined;\n        return (\n          <ChannelPhoto\n            action={action}\n            observeIntersection={observeIntersectionForLoading}\n            onClick={handleClick}\n          />\n        );\n      }\n\n      case 'suggestProfilePhoto':\n        return (\n          <SuggestedPhoto\n            message={message}\n            action={action}\n            observeIntersection={observeIntersectionForLoading}\n          />\n        );\n\n      case 'prizeStars':\n      case 'giftCode':\n        return (\n          <PremiumGiftCode\n            action={action}\n            observeIntersectionForLoading={observeIntersectionForLoading}\n            observeIntersectionForPlaying={observeIntersectionForPlaying}\n            onClick={handleClick}\n          />\n        );\n\n      case 'giftPremium':\n      case 'giftStars':\n        return (\n          <Gift\n            action={action}\n            observeIntersectionForLoading={observeIntersectionForLoading}\n            observeIntersectionForPlaying={observeIntersectionForPlaying}\n            onClick={handleClick}\n          />\n        );\n\n      case 'starGift':\n        return (\n          <StarGift\n            action={action}\n            message={message}\n            observeIntersectionForLoading={observeIntersectionForLoading}\n            observeIntersectionForPlaying={observeIntersectionForPlaying}\n            onClick={handleClick}\n          />\n        );\n\n      case 'starGiftUnique':\n        return (\n          <StarGiftUnique\n            action={action}\n            message={message}\n            observeIntersectionForLoading={observeIntersectionForLoading}\n            observeIntersectionForPlaying={observeIntersectionForPlaying}\n            onClick={handleClick}\n          />\n        );\n\n      case 'channelJoined':\n        return (\n          <SimilarChannels\n            chatId={message.chatId}\n          />\n        );\n\n      default:\n        return undefined;\n    }\n  }, [action, observeIntersectionForLoading, message, observeIntersectionForPlaying]);\n\n  if ((isInsideTopic && action.type === 'topicCreate') || action.type === 'phoneCall') {\n    return undefined;\n  }\n\n  return (\n    <div\n      ref={refWithTransition}\n      id={getMessageHtmlId(id)}\n      className={buildClassName(\n        'ActionMessage',\n        styles.root,\n        isSingleLine && styles.singleLine,\n        isFluidMultiline && styles.fluidMultiline,\n        fullContent && styles.hasFullContent,\n        isFocused && !noFocusHighlight && 'focused',\n        isContextMenuShown && 'has-menu-open',\n        isLastInList && 'last-in-list',\n      )}\n      data-message-id={message.id}\n      data-is-pinned={message.isPinned || undefined}\n      data-has-unread-mention={message.hasUnreadMention || undefined}\n      data-has-unread-reaction={hasUnreadReaction || undefined}\n      onMouseDown={handleMouseDown}\n      onContextMenu={handleContextMenu}\n    >\n      {!isTextHidden && (\n        <>\n          {isFluidMultiline && (\n            <div className={styles.inlineWrapper}>\n              <span className={styles.fluidBackground} style={fluidBackgroundStyle}>\n                <ActionMessageText message={message} isInsideTopic={isInsideTopic} />\n              </span>\n            </div>\n          )}\n          <div className={styles.inlineWrapper}>\n            <span className={styles.textContent} onClick={handleClick}>\n              <ActionMessageText message={message} isInsideTopic={isInsideTopic} />\n            </span>\n          </div>\n        </>\n      )}\n      {fullContent}\n      {contextMenuAnchor && (\n        <ContextMenuContainer\n          isOpen={isContextMenuOpen}\n          anchor={contextMenuAnchor}\n          message={message}\n          messageListType=\"thread\"\n          className={styles.contextContainer}\n          onClose={handleContextMenuClose}\n          onCloseAnimationEnd={handleContextMenuHide}\n        />\n      )}\n      {withServiceReactions && (\n        <Reactions\n          isOutside\n          message={message!}\n          threadId={threadId}\n          observeIntersection={observeIntersectionForPlaying}\n          isCurrentUserPremium={isCurrentUserPremium}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { message, threadId }): StateProps => {\n    const { settings: { themes } } = global;\n    const tabState = selectTabState(global);\n    const chat = selectChat(global, message.chatId);\n\n    const sender = selectSender(global, message);\n\n    const isInsideTopic = chat?.isForum && threadId !== MAIN_THREAD_ID;\n\n    const { replyToMsgId, replyToPeerId } = getMessageReplyInfo(message) || {};\n    const replyMessage = replyToMsgId\n      ? selectChatMessage(global, replyToPeerId || message.chatId, replyToMsgId) : undefined;\n\n    const isFocused = threadId ? selectIsMessageFocused(global, message, threadId) : false;\n    const {\n      direction: focusDirection,\n      noHighlight: noFocusHighlight,\n    } = (isFocused && tabState.focusedMessage) || {};\n\n    const isCurrentUserPremium = selectIsCurrentUserPremium(global);\n\n    const hasUnreadReaction = chat?.unreadReactions?.includes(message.id);\n\n    return {\n      sender,\n      currentUserId: global.currentUserId,\n      isCurrentUserPremium,\n      isFocused,\n      focusDirection,\n      noFocusHighlight,\n      isInsideTopic,\n      replyMessage,\n      isInSelectMode: selectIsInSelectMode(global),\n      patternColor: themes[selectTheme(global)]?.patternColor,\n      hasUnreadReaction,\n    };\n  },\n)(ActionMessage));\n","import React, { useEffect } from '../../../../lib/teact/teact';\n\nimport { SVG_NAMESPACE } from '../../../../config';\nimport { addSvgDefinition, removeSvgDefinition } from '../../../../util/svgController';\n\nconst SVG_MAP = new Map<string, SvgFluidBackgroundFilter>();\n\nclass SvgFluidBackgroundFilter {\n  public filterId: string;\n\n  private referenceCount = 0;\n\n  constructor(public color: string) {\n    this.filterId = `fluid-background-filter-${color.slice(1)}`;\n\n    addSvgDefinition((\n      <filter color-interpolation-filters=\"sRGB\" xmlns={SVG_NAMESPACE}>\n        <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"4\" result=\"blur\" />\n        <feColorMatrix in=\"blur\" mode=\"matrix\" values=\"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 30 -15\" result=\"goo\" />\n        <feComposite in=\"SourceAlpha\" in2=\"goo\" operator=\"over\" result=\"outline\" />\n        <feFlood flood-color={color} result=\"color\" />\n        <feComposite in=\"color\" in2=\"outline\" operator=\"in\" />\n      </filter>\n    ), this.filterId);\n  }\n\n  public getFilterId() {\n    this.referenceCount += 1;\n    return this.filterId;\n  }\n\n  public removeReference() {\n    this.referenceCount -= 1;\n    if (this.referenceCount === 0) {\n      removeSvgDefinition(this.filterId);\n    }\n  }\n\n  public isUsed() {\n    return this.referenceCount > 0;\n  }\n}\n\nexport default function useFluidBackgroundFilter(color?: string, asValue?: boolean) {\n  useEffect(() => {\n    if (!color) return undefined;\n\n    return () => {\n      const colorFilter = SVG_MAP.get(color);\n      if (colorFilter) {\n        colorFilter.removeReference();\n        if (!colorFilter.isUsed()) {\n          SVG_MAP.delete(colorFilter.color);\n        }\n      }\n    };\n  }, [color]);\n\n  if (!color) return undefined;\n\n  if (SVG_MAP.has(color)) {\n    const svg = SVG_MAP.get(color)!;\n    return prepareStyle(svg.getFilterId(), asValue);\n  }\n\n  const svg = new SvgFluidBackgroundFilter(color);\n  SVG_MAP.set(color, svg);\n\n  return prepareStyle(svg.getFilterId(), asValue);\n}\n\nfunction prepareStyle(filterId: string, asValue?: boolean) {\n  if (asValue) {\n    return `url(#${filterId})`;\n  }\n\n  return `filter: url(#${filterId});`;\n}\n"],"names":["_ref","children","className","onClick","React","createElement","buildClassName","COLORS","red","blue","COLOR_KEYS","Set","Object","keys","memo","withGlobal","global","theme","selectTheme","text","color","validSvgRandomId","useUniqueId","colorKey","has","undefined","gradientColor","startColor","endColor","styles","root","ribbon","width","height","viewBox","fill","d","id","x1","y1","x2","y2","gradientUnits","offset","AVATAR_SIZE","REM","action","observeIntersection","Avatar","channelPhoto","photo","loopIndefinitely","withVideo","size","_ref2","sticker","type","selectGiftStickerForDuration","months","selectGiftStickerForStars","stars","canPlayAnimatedEmojis","selectCanPlayAnimatedEmojis","observeIntersectionForLoading","observeIntersectionForPlaying","stickerRef","useRef","lang","useLang","message","contentBox","tabIndex","role","ref","stickerWrapper","style","StickerView","containerRef","noLoad","info","title","pluralValue","amount","renderTextWithEntities","actionButton","Sparkles","preset","channel","selectChat","boostPeerId","channelLink","useMemo","channelTitle","getPeerTitle","channelFallbackText","renderPeerLink","isViaGiveaway","withNodes","withMarkdown","renderTextFilters","messageSender","selectSender","giftSender","fromId","selectPeer","messageRecipient","chatId","sender","recipient","peerId","starGiftMaxConvertPeriod","appConfig","isOutgoing","getStickerFromGift","gift","peer","isChannel","isApiPeerChat","isChatChannel","backgroundColor","useDynamicColorListener","availabilityTotal","fallbackPeerTitle","peerTitle","isSelf","giftDescription","peerLink","starsAmount","starsToConvert","formatStarsAsText","isUpgraded","alreadyPaidUpgradeStars","translateWithYou","isConverted","getServerTime","date","starGift","GiftRibbon","total","formatIntegerCompact","subtitle","data","valueClassName","keyClassName","map","key","value","Fragment","attributes","getGiftAttributes","model","pattern","backdrop","backgroundColors","centerColor","edgeColor","adaptedPatternColor","patternColor","slice","tableData","name","uniqueGift","uniqueBackgroundWrapper","RadialPatternBackground","uniqueBackground","patternIcon","clearBottomSector","textColor","number","MiniTable","uniqueValue","buildStyle","openMediaViewer","uploadProfilePhoto","showNotification","getActions","cropModalBlob","setCropModalBlob","useState","isVideoModalOpen","openVideoModal","closeVideoModal","useFlag","suggestedPhotoUrl","useMedia","getPhotoMediaHash","suggestedVideoUrl","getVideoProfilePhotoMediaHash","isVideo","peerName","user","showAvatarNotification","useLastCallback","payload","screen","SettingsScreens","Main","actionText","handleSetSuggestedAvatar","file","handleCloseCropModal","handleSetVideo","async","blob","fetchBlob","File","videoTs","videoSizes","find","l","videoStartTs","messageId","threadId","MAIN_THREAD_ID","origin","MediaViewerOrigin","SuggestedAvatar","suggestedAvatar","suggestedText","CropModal","onClose","onChange","ConfirmDialog","isOpen","confirmHandler","SimilarChannel","openChat","fallbackColor","arguments","length","setColor","imgBlobUrl","getChatAvatarHash","ApiMediaFormat","BlobUrl","useEffect","averageColor","getAverageColor","rgb2hex","useAverageColor","Icon","membersCount","MoreChannels","_ref3","channelsCount","isCurrentUserPremium","openPremiumModal","openChatWithInfo","useOldLang","shouldReplaceHistory","profileTab","forceScrollProfileTab","_ref4","similarChannelIds","isExpanded","count","selectSimilarChannelIds","selectIsCurrentUserPremium","chatFullInfo","selectChatFullInfo","channelJoinInfo","joinInfo","toggleChannelRecommendations","loadChannelRecommendations","isShowing","markShowing","markNotShowing","isHiding","markHiding","markNotHiding","ignoreAutoScrollRef","similarChannels","getGlobal","filter","Boolean","shouldRenderSkeleton","setShouldRenderSkeleton","firstSimilarChannels","areSimilarChannelsPresent","shouldRenderChannels","useHorizontalScroll","useTimeout","setTimeout","clearTimeout","current","scrollIntoView","behavior","handleToggle","joinedDate","Skeleton","xmlns","Button","i","SHOW_CHANNELS_NUMBER","SINGLE_LINE_ACTIONS","HIDDEN_TEXT_ACTIONS","settings","themes","tabState","selectTabState","chat","isInsideTopic","isForum","replyToMsgId","replyToPeerId","getMessageReplyInfo","replyMessage","selectChatMessage","isFocused","selectIsMessageFocused","direction","focusDirection","noHighlight","noFocusHighlight","focusedMessage","hasUnreadReaction","unreadReactions","includes","currentUserId","isInSelectMode","selectIsInSelectMode","appearanceOrder","isJustAdded","isLastInList","memoFirstUnreadIdRef","getIsMessageListReady","onIntersectPinnedMessage","observeIntersectionForBottom","requestConfetti","getReceipt","checkGiftCode","openPrizeStarsTransactionFromGiveaway","openStarsTransactionFromGift","openGiftInfoModalFromMessage","animateUnreadReaction","markMentionsRead","content","isLocal","isLocalMessageId","isTextHidden","isSingleLine","isFluidMultiline","IS_FLUID_BACKGROUND_SUPPORTED","messageReplyInfo","withServiceReactions","areReactionsPossible","reactions","results","shouldSkipRender","isTouchScreen","useAppLayout","useOnIntersect","useMessageResizeObserver","useEnsureMessage","useFocusMessage","elementRef","useUnmountCleanup","isPinned","viewportPinnedIdsToRemove","isContextMenuOpen","contextMenuAnchor","handleBeforeContextMenu","handleContextMenu","handleContextMenuClose","handleContextMenuHide","useContextMenuHandlers","IS_ELECTRON","IS_ANDROID","isContextMenuShown","noAppearanceAnimation","isShown","markShown","MESSAGE_APPEARANCE_DELAY","refWithTransition","useShowTransition","noOpenTransition","noCloseTransition","bottomMarker","isElementInViewport","messageIds","hasUnreadMention","fluidBackgroundStyle","useFluidBackgroundFilter","handleClick","ChannelAvatar","slug","isGift","fromUserId","toUserId","monthsAmount","fullContent","ChannelPhoto","SuggestedPhoto","PremiumGiftCode","Gift","StarGift","StarGiftUnique","SimilarChannels","getMessageHtmlId","singleLine","fluidMultiline","hasFullContent","onMouseDown","e","preventMessageInputBlur","onContextMenu","inlineWrapper","fluidBackground","ActionMessageText","textContent","ContextMenuContainer","anchor","messageListType","contextContainer","onCloseAnimationEnd","Reactions","isOutside","SVG_MAP","Map","SvgFluidBackgroundFilter","constructor","_defineProperty","this","filterId","addSvgDefinition","SVG_NAMESPACE","in","stdDeviation","result","mode","values","in2","operator","getFilterId","referenceCount","removeReference","removeSvgDefinition","isUsed","asValue","colorFilter","get","delete","prepareStyle","svg","set"],"sourceRoot":""}