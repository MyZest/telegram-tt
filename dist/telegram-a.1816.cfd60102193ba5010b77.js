"use strict";(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[1816],{81949:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(84051),r=n(87357);const i=e=>{let{children:t,className:n,onClick:i}=e;return a.Ay.createElement("div",{className:(0,r.A)("hJUqHi4B",i&&"hjDEmFaT",n),onClick:i},t)}},87049:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(84051),r=n(13439),i=n(29807),o=n(87357),s=n(14745);const c={root:"AmQSvxpZ",text:"pQW7dcwr"},l={red:[["#FF5B54","#ED1C26"],["#653633","#532224"]],blue:[["#6ED2FF","#34A4FC"],["#344F5A","#152E42"]]},d=new Set(Object.keys(l)),m=(0,a.ph)((0,r.EK)((e=>({theme:(0,i.SJA)(e)})))((e=>{let{text:t,color:n,className:r,theme:i}=e;const m=`svg-${(0,s.A)()}`,A=d.has(n)?n:void 0,u=A?l[A]["dark"===i?1:0]:void 0,h=u?u[0]:n,y=u?u[1]:n;return a.Ay.createElement("div",{className:(0,o.A)(c.root,r)},a.Ay.createElement("svg",{className:c.ribbon,width:"56",height:"56",viewBox:"0 0 56 56",fill:"none"},a.Ay.createElement("path",{d:"M52.4851 26.4853L29.5145 3.51472C27.2641 1.26428 24.2119 0 21.0293 0H2.82824C1.04643 0 0.154103 2.15429 1.41403 3.41422L52.5856 54.5858C53.8455 55.8457 55.9998 54.9534 55.9998 53.1716V34.9706C55.9998 31.788 54.7355 28.7357 52.4851 26.4853Z",fill:`url(#${m})`}),a.Ay.createElement("defs",null,a.Ay.createElement("linearGradient",{id:m,x1:"27.9998",y1:"1",x2:"27.9998",y2:"55",gradientUnits:"userSpaceOnUse"},a.Ay.createElement("stop",{"stop-color":h}),a.Ay.createElement("stop",{offset:"1","stop-color":y})))),a.Ay.createElement("div",{className:c.text},t))})))},88668:(e,t,n)=>{n.d(t,{A:()=>Ne});var a=n(84051),r=n(13439),i=n(23174),o=n(89925),s=n(31481),c=n(90709),l=n(26129),d=n(29807),m=n(87357),A=n(60343),u=n(41512),h=n(82393),y=n(54464),g=n(43874),p=n(10722),v=n(49746),f=n(37661),E=n(5912),I=n(17712),C=n(14622),b=n(21511),N=n(48196),P=n(79519),k=n(96773),S=n(76023),x=n(21849),F=n(50805);const w=15*S.$,T=(0,a.ph)((e=>{let{action:t,onClick:n,observeIntersection:r}=e;return a.Ay.createElement(x.A,{className:F.A.channelPhoto,photo:t.photo,loopIndefinitely:!0,withVideo:!0,observeIntersection:r,onClick:n,size:w})}));var G=n(18501),B=n(39351),M=n(85118),U=n(82855);const V=(0,a.ph)((0,r.EK)(((e,t)=>{let{action:n}=t;return{sticker:"giftPremium"===n.type?(0,d.t0O)(e,n.months):(0,d.WLj)(e,n.stars),canPlayAnimatedEmojis:(0,d.BWX)(e)}}))((e=>{let{action:t,sticker:n,canPlayAnimatedEmojis:r,onClick:i,observeIntersectionForLoading:o,observeIntersectionForPlaying:s}=e;const c=(0,a.li)(null),l=(0,B.A)(),d="giftPremium"===t.type?t.message:void 0;return a.Ay.createElement("div",{className:F.A.contentBox,tabIndex:0,role:"button",onClick:i},a.Ay.createElement("div",{ref:c,className:F.A.stickerWrapper,style:"width: 150px; height: 150px"},n&&a.Ay.createElement(U.A,{containerRef:c,sticker:n,size:150,observeIntersectionForLoading:o,observeIntersectionForPlaying:s,noLoad:!r})),a.Ay.createElement("div",{className:F.A.info},a.Ay.createElement("h3",{className:F.A.title},"giftPremium"===t.type?l("ActionGiftPremiumTitle",{months:t.months},{pluralValue:t.months}):l("ActionGiftStarsTitle",{amount:t.stars},{pluralValue:t.stars})),a.Ay.createElement("div",null,d&&(0,G.f)(d),!d&&l("giftPremium"===t.type?"ActionGiftPremiumText":"ActionGiftStarsText"))),a.Ay.createElement("div",{className:F.A.actionButton},a.Ay.createElement(M.A,{preset:"button"}),l("ActionViewButton")))})));var R=n(4262);const L=(0,a.ph)((0,r.EK)(((e,t)=>{let{action:n}=t;return{sticker:"giftCode"===n.type?(0,d.t0O)(e,n.months):(0,d.WLj)(e,n.stars),canPlayAnimatedEmojis:(0,d.BWX)(e),channel:(0,d.hds)(e,n.boostPeerId)}}))((e=>{let{action:t,sticker:n,canPlayAnimatedEmojis:r,channel:i,onClick:o,observeIntersectionForLoading:s,observeIntersectionForPlaying:l}=e;const d=(0,a.li)(null),m=(0,B.A)(),A=(0,a.Kr)((()=>{const e=i&&(0,c.F9N)(m,i),t=m("ActionFallbackChannel");return(0,R.Nm)(i?.id,e||t)}),[i,m]);return a.Ay.createElement("div",{className:F.A.contentBox,tabIndex:0,role:"button",onClick:o},a.Ay.createElement("div",{ref:d,className:F.A.stickerWrapper,style:"width: 150px; height: 150px"},n&&a.Ay.createElement(U.A,{containerRef:d,sticker:n,size:150,observeIntersectionForLoading:s,observeIntersectionForPlaying:l,noLoad:!r})),a.Ay.createElement("div",null,a.Ay.createElement("h3",{className:F.A.title},m("ActionGiveawayResultTitle")),a.Ay.createElement("div",null,"giftCode"===t.type&&m(t.isViaGiveaway?"ActionGiveawayResultPremiumText":"ActionGiftCodePremiumText",{months:t.months,channel:A},{withNodes:!0,withMarkdown:!0,pluralValue:t.months,renderTextFilters:["br"]}),"prizeStars"===t.type&&m("ActionGiveawayResultStarsText",{amount:t.stars,channel:A},{withNodes:!0,withMarkdown:!0,pluralValue:t.stars,renderTextFilters:["br"]}))),a.Ay.createElement("div",{className:F.A.actionButton},a.Ay.createElement(M.A,{preset:"button"}),m("giftCode"===t.type?"ActionOpenGiftButton":"ActionViewButton")))})));var J=n(70636),j=n(48775),O=n(80140),K=n(14242),W=n(66833),q=n(87094),z=n(87049);const D=(0,a.ph)((0,r.EK)(((e,t)=>{let{message:n,action:a}=t;const r=(0,d.BWX)(e),i=(0,d.Y7C)(e,n),o=a.fromId?(0,d.PVB)(e,a.fromId):void 0,s=(0,d.PVB)(e,n.chatId);return{canPlayAnimatedEmojis:r,sender:o||i,recipient:(a.peerId?(0,d.PVB)(e,a.peerId):void 0)||s,starGiftMaxConvertPeriod:e.appConfig?.starGiftMaxConvertPeriod}}))((e=>{let{action:t,message:n,canPlayAnimatedEmojis:r,sender:i,recipient:o,starGiftMaxConvertPeriod:s,onClick:l,observeIntersectionForLoading:d,observeIntersectionForPlaying:A}=e;const u=(0,a.li)(null),h=(0,a.li)(null),y=(0,B.A)(),{isOutgoing:g}=n,p=(0,W.yQ)(t.gift),v=g?o:i,f=v&&(0,J.vj)(v)&&(0,c.WXB)(v),E=(0,q.A)(u,"background-color",!t.gift.availabilityTotal),I=y("ActionFallbackSomeone"),C=v&&(0,c.F9N)(y,v),b=i?.id===o?.id,N=(0,a.Kr)((()=>{const e=(0,R.Nm)(v?.id,C||I),a=void 0!==t.starsToConvert?(0,j.K)(y,t.starsToConvert):void 0;return t.isUpgraded?y("ActionStarGiftUpgraded"):t.alreadyPaidUpgradeStars?(0,R.AD)(y,"ActionStarGiftUpgradeText",!g||b,{peer:e}):t.isConverted?(0,R.AD)(y,"ActionStarGiftConvertedText",!g||b,{peer:e,amount:a}):s&&(0,O.Fm)()<n.date+s?(0,R.AD)(y,"ActionStarGiftConvertText",!g||b,{peer:e,amount:a}):f?y("ActionStarGiftChannelText",{amount:a},{withNodes:!0}):(0,R.AD)(y,"ActionStarGiftNoConvertText",!g||b,{peer:e})}),[t,I,f,g,y,n.date,v?.id,C,s,b]);return a.Ay.createElement("div",{ref:u,className:(0,m.A)(F.A.contentBox,F.A.starGift),tabIndex:0,role:"button",onClick:l},a.Ay.createElement("div",{ref:h,className:F.A.stickerWrapper,style:"width: 120px; height: 120px"},p&&a.Ay.createElement(U.A,{containerRef:h,sticker:p,size:120,observeIntersectionForLoading:d,observeIntersectionForPlaying:A,noLoad:!r})),t.gift.availabilityTotal&&a.Ay.createElement(z.A,{color:E||"blue",text:y("ActionStarGiftLimitedRibbon",{total:(0,K.Vw)(t.gift.availabilityTotal)})}),a.Ay.createElement("div",{className:F.A.info},a.Ay.createElement("h3",{className:F.A.title},b?y("ActionStarGiftSelf"):y(g?"ActionStarGiftTo":"ActionStarGiftFrom",{peer:(0,R.Nm)(v?.id,C||I)},{withNodes:!0})),a.Ay.createElement("div",{className:F.A.subtitle},t.message&&(0,G.f)(t.message),!t.message&&N)),a.Ay.createElement("div",{className:F.A.actionButton},a.Ay.createElement(M.A,{preset:"button"}),!t.alreadyPaidUpgradeStars||t.isUpgraded||g?y("ActionViewButton"):y("ActionStarGiftUnpack")))})));var H=n(95807);const Q=(0,a.ph)((e=>{let{data:t,style:n,className:r,valueClassName:i,keyClassName:o}=e;return a.Ay.createElement("div",{className:(0,m.A)("cKr8J5k_",r),style:n},t.map((e=>{let[t,n]=e;return a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement("div",{className:(0,m.A)("c9RLLvfs",o)},t),a.Ay.createElement("div",{className:(0,m.A)("QEuGpzIc",i)},n))})))}));var $=n(40558);const X=(0,a.ph)((0,r.EK)(((e,t)=>{let{message:n,action:a}=t;const r=(0,d.BWX)(e),i=(0,d.Y7C)(e,n),o=a.fromId?(0,d.PVB)(e,a.fromId):void 0,s=(0,d.PVB)(e,n.chatId);return{canPlayAnimatedEmojis:r,sender:o||i,recipient:(a.peerId?(0,d.PVB)(e,a.peerId):void 0)||s}}))((e=>{let{action:t,message:n,canPlayAnimatedEmojis:r,sender:i,recipient:o,onClick:s,observeIntersectionForLoading:l,observeIntersectionForPlaying:d}=e;const A=(0,a.li)(null),u=(0,B.A)(),{isOutgoing:h}=n,y=(0,W.yQ)(t.gift),g=(0,W.uc)(t.gift),p=g.model,v=g.pattern,f=g.backdrop,E=[f.centerColor,f.edgeColor],I=`${f.patternColor.slice(0,7)}55`,C=(0,a.Kr)((()=>[[u("ActionStarGiftUniqueModel"),p.name],[u("ActionStarGiftUniqueBackdrop"),f.name],[u("ActionStarGiftUniqueSymbol"),v.name]]),[u,p,v,f]),b=h?o:i,N=u("ActionFallbackSomeone"),P=b&&(0,c.F9N)(u,b),k=i?.id===o?.id;return a.Ay.createElement("div",{className:(0,m.A)(F.A.contentBox,F.A.starGift,F.A.uniqueGift),tabIndex:0,role:"button",onClick:s},a.Ay.createElement("div",{className:F.A.uniqueBackgroundWrapper},a.Ay.createElement($.A,{className:F.A.uniqueBackground,backgroundColors:E,patternColor:f.patternColor,patternIcon:v.sticker,clearBottomSector:!0})),a.Ay.createElement("div",{ref:A,className:F.A.stickerWrapper,style:"width: 120px; height: 120px"},y&&a.Ay.createElement(U.A,{containerRef:A,sticker:y,size:120,observeIntersectionForLoading:l,observeIntersectionForPlaying:d,noLoad:!r})),a.Ay.createElement(z.A,{color:I,text:u("ActionStarGiftUniqueRibbon")}),a.Ay.createElement("div",{className:F.A.info},a.Ay.createElement("h3",{className:F.A.title},k?u("ActionStarGiftSelf"):u(h?"ActionStarGiftTo":"ActionStarGiftFrom",{peer:(0,R.Nm)(b?.id,P||N)},{withNodes:!0})),a.Ay.createElement("div",{className:F.A.subtitle,style:`color: ${f.textColor}`},u("GiftUnique",{title:t.gift.title,number:t.gift.number})),a.Ay.createElement(Q,{data:C,style:`color: ${f.textColor}`,valueClassName:F.A.uniqueValue})),a.Ay.createElement("div",{className:F.A.actionButton,style:(0,H.A)(I&&`background-color: ${I}`)},a.Ay.createElement(M.A,{preset:"button"}),u("ActionViewButton")))})));var Z=n(87679),_=n(62587),Y=n(94189),ee=n(68584);const te=(0,a.ph)((0,r.EK)(((e,t)=>{let{message:n}=t;return{peer:(0,d.PVB)(e,n.chatId)}}))((e=>{let{message:t,action:n,peer:s,observeIntersection:l}=e;const{openMediaViewer:d,uploadProfilePhoto:m,showNotification:A}=(0,r.ko)(),{isOutgoing:u}=t,h=n.photo,y=(0,B.A)(),[g,p]=(0,a.J0)(),[v,E,C]=(0,f.A)(!1),b=(0,_.A)((0,c.rIo)(h,"full")),N=(0,_.A)((0,c.Pgy)(h)),P=h.isVideo,k=(0,a.Kr)((()=>{const e=s&&(0,c.F9N)(y,s)||y("ActionFallbackUser"),t=(0,R.Nm)(s?.id,e);return y(u?"ActionSuggestedPhotoYou":"ActionSuggestedPhoto",{user:t},{withNodes:!0})}),[y,u,s]),S=(0,I.A)((()=>{A({title:y("ActionSuggestedPhotoUpdatedTitle"),message:y("ActionSuggestedPhotoUpdatedDescription"),action:{action:"requestNextSettingsScreen",payload:{screen:o.VS.Main}},actionText:y("Open")})})),w=(0,I.A)((e=>{p(void 0),m({file:e}),S()})),T=(0,I.A)((()=>{p(void 0)})),G=(0,I.A)((async()=>{if(!N)return;C(),S();const e=await(0,Z.sZ)(N);m({file:new File([e],"avatar.mp4"),isVideo:!0,videoTs:h.videoSizes?.find((e=>void 0!==e.videoStartTs))?.videoStartTs})}));return a.Ay.createElement("div",{className:F.A.contentBox,tabIndex:0,role:"button",onClick:async()=>{!u&&b?P?E():p(await(0,Z.sZ)(b)):d({chatId:t.chatId,messageId:t.id,threadId:i.l3,origin:o.TQ.SuggestedAvatar})}},a.Ay.createElement(x.A,{className:F.A.suggestedAvatar,photo:n.photo,loopIndefinitely:!0,withVideo:!0,observeIntersection:l,size:"jumbo"}),a.Ay.createElement("div",{className:F.A.suggestedText},k),a.Ay.createElement("div",{className:F.A.actionButton},y("ActionSuggestedPhotoButton")),a.Ay.createElement(ee.A,{file:g,onClose:T,onChange:w}),a.Ay.createElement(Y.A,{isOpen:v,title:y("ActionSuggestedVideoTitle"),confirmHandler:G,onClose:C,text:y("ActionSuggestedVideoText")}))})));var ne=n(99515),ae=n(43581),re=n(14737),ie=n(48894);var oe=n(36838),se=n(59030),ce=n(18276),le=n(64493),de=n(55158);const me="d8axZxyN",Ae="glDpC2av",ue="gqCs9fSo",he="gnYhwnvf",ye="HWgwnKui",ge="BTNQ4KBH",pe="Xl9MVMTn",ve="Qizai7yv";function fe(e){let{channel:t}=e;const{openChat:n}=(0,r.ko)(),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#00000000";const[n,r]=(0,a.J0)(t),o=(0,_.A)((0,c.cP1)(e),!1,i.qZ.BlobUrl);return(0,a.vJ)((()=>{(async()=>{if(!o)return;const e=await(0,ie.rX)(o);r(`#${(0,ie.v2)(e)}`)})()}),[o]),n}(t,"#3C3C4399");return a.Ay.createElement("div",{className:Ae,onClick:()=>n({id:t.id})},a.Ay.createElement(x.A,{className:ue,key:t.id,size:"large",peer:t}),a.Ay.createElement("div",{style:`background: ${o}`,className:he},a.Ay.createElement(ce.A,{name:"user-filled",className:me}),a.Ay.createElement("span",{className:ye},(0,K.Vw)(t?.membersCount||0))),a.Ay.createElement("span",{className:ge},t.title))}function Ee(e){let{channel:t,chatId:n,channelsCount:i,isCurrentUserPremium:o}=e;const{openPremiumModal:s,openChatWithInfo:c}=(0,r.ko)(),l=(0,se.A)();return a.Ay.createElement("div",{className:(0,m.A)(Ae,"MBChXyXk"),onClick:()=>{o?c({id:n,shouldReplaceHistory:!0,profileTab:"similarChannels",forceScrollProfileTab:!0}):s()}},a.Ay.createElement(x.A,{className:ue,key:t.id,size:"large",peer:t}),a.Ay.createElement("div",{className:pe},a.Ay.createElement("div",{className:ve})),a.Ay.createElement("div",{className:(0,m.A)(pe,"JxSmtOFi")},a.Ay.createElement("div",{className:ve})),a.Ay.createElement("div",{className:he},a.Ay.createElement("span",{className:ye},`+${i}`),!o&&a.Ay.createElement(ce.A,{name:"lock-badge",className:me})),a.Ay.createElement("span",{className:ge},l("MoreSimilar")))}const Ie=(0,a.ph)((0,r.EK)(((e,t)=>{let{chatId:n}=t;const{similarChannelIds:a,isExpanded:r,count:i}=(0,d.dg4)(e,n)||{},o=(0,d.g29)(e),s=(0,d.AWZ)(e,n);return{similarChannelIds:a,isExpanded:r,count:i,isCurrentUserPremium:o,channelJoinInfo:s?.joinInfo}}))((e=>{let{chatId:t,similarChannelIds:n,isExpanded:i,count:o,isCurrentUserPremium:s,channelJoinInfo:c}=e;const{toggleChannelRecommendations:l,loadChannelRecommendations:A}=(0,r.ko)(),u=(0,se.A)(),[h,y,g]=(0,f.A)(!1),[p,v,E]=(0,f.A)(!1),C=(0,a.li)(null),b=(0,a.li)(!1),N=(0,a.Kr)((()=>{if(!n)return;const e=(0,r.mS)();return n.map((t=>(0,d.hds)(e,t))).filter(Boolean)}),[n]),[P,k]=(0,a.J0)(!1),S=(0,a.Kr)((()=>N?.slice(0,10)),[N]),x=Boolean(S?.length),F=Boolean(!P&&(i||p||h)&&x);(0,oe.A)(C,!F,!0),(0,a.vJ)((()=>{n||A({chatId:t})}),[t,n]),(0,re.A)((()=>k(!1)),2e3),(0,a.vJ)((()=>{if(P&&N&&i){const e=setTimeout((()=>{k(!1)}),300);return()=>clearTimeout(e)}}),[N,i,P]),(0,a.vJ)((()=>{i?(y(),E(),k(!n),b.current||setTimeout((()=>{C.current?.scrollIntoView({behavior:"smooth"})}),150)):(g(),v())}),[i,n]);const w=(0,I.A)((()=>{l({chatId:t})}));if((0,a.vJ)((()=>{c?.joinedDate&&!i&&(0,O.Fm)()-c.joinedDate<=10&&(w(),b.current=!0)}),[c,i]),F||P)return a.Ay.createElement("div",{className:(0,m.A)("V3RHiOJR")},P&&a.Ay.createElement(de.A,{className:"xKVZv7KE"}),F&&a.Ay.createElement("div",{className:(0,m.A)(h&&"eb8rX09E",p&&"XR6_qLCc")},a.Ay.createElement("div",{className:"tfG_BSDt"},a.Ay.createElement("svg",{width:"19",height:"7",viewBox:"0 0 19 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.Ay.createElement("path",{className:"HVbeGv4t","fill-rule":"evenodd","clip-rule":"evenodd",d:"M19 7C16.8992 7 13.59 3.88897 11.5003 1.67424C10.7648 0.894688 10.397 0.50491 10.0434 0.385149C9.70568 0.270811 9.4225 0.270474 9.08456 0.38401C8.73059 0.50293 8.36133 0.892443 7.62279 1.67147C5.52303 3.88637 2.18302 7 0 7L19 7Z",fill:"white"}))),a.Ay.createElement("div",{className:"njAC8dR9"},a.Ay.createElement("div",{className:"s7QOi22Q"},a.Ay.createElement("span",{className:"JstcOhAN"},u("SimilarChannels")),a.Ay.createElement(le.A,{className:"meewH7t_",color:"translucent",onClick:w},a.Ay.createElement(ce.A,{name:"close"}))),a.Ay.createElement("div",{ref:C,className:(0,m.A)("h4gWlNen","no-scrollbar")},S?.map(((e,n)=>9===n?a.Ay.createElement(Ee,{channel:e,chatId:t,channelsCount:o-10+1,isCurrentUserPremium:s}):a.Ay.createElement(fe,{channel:e})))))))}))),Ce=new Set(["pinMessage","chatEditPhoto","chatDeletePhoto","unsupported"]),be=new Set(["giftCode","prizeStars","suggestProfilePhoto"]),Ne=(0,a.ph)((0,r.EK)(((e,t)=>{let{message:n,threadId:a}=t;const{settings:{themes:r}}=e,o=(0,d.nTw)(e),s=(0,d.hds)(e,n.chatId),c=(0,d.Y7C)(e,n),m=s?.isForum&&a!==i.l3,{replyToMsgId:A,replyToPeerId:u}=(0,l.Q)(n)||{},h=A?(0,d.O5q)(e,u||n.chatId,A):void 0,y=!!a&&(0,d.nJv)(e,n,a),{direction:g,noHighlight:p}=y&&o.focusedMessage||{},v=(0,d.g29)(e),f=s?.unreadReactions?.includes(n.id);return{sender:c,currentUserId:e.currentUserId,isCurrentUserPremium:v,isFocused:y,focusDirection:g,noFocusHighlight:p,isInsideTopic:m,replyMessage:h,isInSelectMode:(0,d.rTV)(e),patternColor:r[(0,d.SJA)(e)]?.patternColor,hasUnreadReaction:f}}))((e=>{let{message:t,threadId:n,sender:i,currentUserId:d,appearanceOrder:S,isJustAdded:x,isLastInList:w,memoFirstUnreadIdRef:G,getIsMessageListReady:B,isInsideTopic:M,isFocused:U,focusDirection:R,noFocusHighlight:J,replyMessage:j,patternColor:O,isCurrentUserPremium:K,isInSelectMode:W,hasUnreadReaction:q,onIntersectPinnedMessage:z,observeIntersectionForBottom:H,observeIntersectionForLoading:Q,observeIntersectionForPlaying:$}=e;const{requestConfetti:Z,openMediaViewer:_,getReceipt:Y,checkGiftCode:ee,openPrizeStarsTransactionFromGiveaway:re,openPremiumModal:ie,openStarsTransactionFromGift:oe,openGiftInfoModalFromMessage:se,toggleChannelRecommendations:ce,animateUnreadReaction:le,markMentionsRead:de}=(0,r.ko)(),me=(0,a.li)(null),{id:Ae,chatId:ue}=t,he=t.content.action,ye=(0,A.iL)(Ae),ge=be.has(he.type),pe=Ce.has(he.type),ve=h.uH&&!pe,fe=(0,l.Q)(t),{replyToMsgId:Ee,replyToPeerId:Ne}=fe||{},Pe=Boolean(t.areReactionsPossible&&t?.reactions?.results?.length),ke=M&&"topicCreate"===he.type,{isTouchScreen:Se}=(0,g.Ay)();(0,E.mv)(me,ke?void 0:H),(0,C.A)(me,!ke&&w&&"channelJoined"!==he.type),(0,v.A)(Ne||ue,Ee,j,Ae),(0,P.A)({elementRef:me,chatId:t.chatId,isFocused:U,focusDirection:R,noFocusHighlight:J,isJustAdded:x}),(0,a._W)((()=>{t.isPinned&&z?.({viewportPinnedIdsToRemove:[t.id]})}));const{isContextMenuOpen:xe,contextMenuAnchor:Fe,handleBeforeContextMenu:we,handleContextMenu:Te,handleContextMenuClose:Ge,handleContextMenuHide:Be}=(0,p.A)(me,Se&&W,!h.cp,h.Ni,B),Me=void 0!==Fe,Ue=S<=0,[Ve,Re]=(0,f.A)(Ue);(0,a.vJ)((()=>{Ue||setTimeout(Re,S*s.zq7)}),[S,Re,Ue]);const{ref:Le}=(0,b.A)({isOpen:Ve,noOpenTransition:Ue,noCloseTransition:!0,className:!1,ref:me});(0,a.vJ)((()=>{const e=me.current;e&&(0,u.Y)(e)&&(q&&le({messageIds:[Ae]}),t.hasUnreadMention&&de({messageIds:[Ae]}))}),[q,Ae,le,t.hasUnreadMention]),(0,a.vJ)((()=>{"giftPremium"===he.type&&(G?.current&&Ae>=G.current||ye)&&Z({})}),[he.type,Ae,ye,G]);const Je=(0,N.A)(ve?O:void 0),je=(0,I.A)((()=>{switch(he.type){case"paymentSent":case"paymentRefunded":Y({chatId:t.chatId,messageId:t.id});break;case"chatEditPhoto":_({chatId:t.chatId,messageId:t.id,threadId:n,origin:o.TQ.ChannelAvatar});break;case"giftCode":ee({slug:he.slug,message:{chatId:t.chatId,messageId:t.id}});break;case"prizeStars":re({chatId:t.chatId,messageId:t.id});break;case"giftPremium":ie({isGift:!0,fromUserId:i?.id,toUserId:i&&i.id===d?ue:d,monthsAmount:he.months});break;case"giftStars":oe({chatId:t.chatId,messageId:t.id});break;case"starGift":case"starGiftUnique":se({chatId:t.chatId,messageId:t.id});break;case"channelJoined":ce({chatId:ue})}})),Oe=(0,a.Kr)((()=>{switch(he.type){case"chatEditPhoto":if(!he.photo)return;return a.Ay.createElement(T,{action:he,observeIntersection:Q,onClick:je});case"suggestProfilePhoto":return a.Ay.createElement(te,{message:t,action:he,observeIntersection:Q});case"prizeStars":case"giftCode":return a.Ay.createElement(L,{action:he,observeIntersectionForLoading:Q,observeIntersectionForPlaying:$,onClick:je});case"giftPremium":case"giftStars":return a.Ay.createElement(V,{action:he,observeIntersectionForLoading:Q,observeIntersectionForPlaying:$,onClick:je});case"starGift":return a.Ay.createElement(D,{action:he,message:t,observeIntersectionForLoading:Q,observeIntersectionForPlaying:$,onClick:je});case"starGiftUnique":return a.Ay.createElement(X,{action:he,message:t,observeIntersectionForLoading:Q,observeIntersectionForPlaying:$,onClick:je});case"channelJoined":return a.Ay.createElement(Ie,{chatId:t.chatId});default:return}}),[he,Q,t,$]);if(!(M&&"topicCreate"===he.type||"phoneCall"===he.type))return a.Ay.createElement("div",{ref:Le,id:(0,c.GZP)(Ae),className:(0,m.A)("ActionMessage",F.A.root,pe&&F.A.singleLine,ve&&F.A.fluidMultiline,Oe&&F.A.hasFullContent,U&&!J&&"focused",Me&&"has-menu-open",w&&"last-in-list"),"data-message-id":t.id,"data-is-pinned":t.isPinned||void 0,"data-has-unread-mention":t.hasUnreadMention||void 0,"data-has-unread-reaction":q||void 0,onMouseDown:e=>{(0,y.l)(e),we(e)},onContextMenu:Te},!ge&&a.Ay.createElement(a.Ay.Fragment,null,ve&&a.Ay.createElement("div",{className:F.A.inlineWrapper},a.Ay.createElement("span",{className:F.A.fluidBackground,style:Je},a.Ay.createElement(k.A,{message:t,isInsideTopic:M}))),a.Ay.createElement("div",{className:F.A.inlineWrapper},a.Ay.createElement("span",{className:F.A.textContent,onClick:je},a.Ay.createElement(k.A,{message:t,isInsideTopic:M})))),Oe,Fe&&a.Ay.createElement(ne.A,{isOpen:xe,anchor:Fe,message:t,messageListType:"thread",className:F.A.contextContainer,onClose:Ge,onCloseAnimationEnd:Be}),Pe&&a.Ay.createElement(ae.A,{isOutside:!0,message:t,threadId:n,observeIntersection:$,isCurrentUserPremium:K}))})))},48196:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(84051),r=n(31481),i=n(28470);function o(e,t,n){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,"string");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(t))?a:a+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const s=new Map;class c{constructor(e){this.color=e,o(this,"filterId",void 0),o(this,"referenceCount",0),this.filterId=`fluid-background-filter-${e.slice(1)}`,(0,i.z)(a.Ay.createElement("filter",{"color-interpolation-filters":"sRGB",xmlns:r.jNX},a.Ay.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"4",result:"blur"}),a.Ay.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 30 -15",result:"goo"}),a.Ay.createElement("feComposite",{in:"SourceAlpha",in2:"goo",operator:"over",result:"outline"}),a.Ay.createElement("feFlood",{"flood-color":e,result:"color"}),a.Ay.createElement("feComposite",{in:"color",in2:"outline",operator:"in"})),this.filterId)}getFilterId(){return this.referenceCount+=1,this.filterId}removeReference(){this.referenceCount-=1,0===this.referenceCount&&(0,i.e)(this.filterId)}isUsed(){return this.referenceCount>0}}function l(e,t){if((0,a.vJ)((()=>{if(e)return()=>{const t=s.get(e);t&&(t.removeReference(),t.isUsed()||s.delete(t.color))}}),[e]),!e)return;if(s.has(e))return d(s.get(e).getFilterId(),t);const n=new c(e);return s.set(e,n),d(n.getFilterId(),t)}function d(e,t){return t?`url(#${e})`:`filter: url(#${e});`}}}]);
//# sourceMappingURL=telegram-a.1816.cfd60102193ba5010b77.js.map