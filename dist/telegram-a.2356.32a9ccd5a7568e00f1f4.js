"use strict";(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[2356],{68292:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(84051),o=n(13439),i=n(29807),s=n(87357),r=n(37836),c=n(30857),l=n(39351),d=n(73767);let u=0;const m=(0,r.Fe)((()=>{u=0})),h=(0,a.ph)((e=>{let{text:t,className:n,isDisabled:r,ref:h}=e;const{isRtl:p}=(0,l.A)(),g=(0,d.A)(t),A=(0,c.A)(),y=!(!(!r&&(0,i.PKK)((0,o.mS)())&&void 0!==g&&g!==t)||u>=10||(0===u&&m(),u++,0)),f=(0,a.Kr)((()=>y?function(e,t){const n=[],o=e.length,i=t?.length??0;for(let s=0;s<=o;s++){const r=o-s,c=i-s;t&&c>=0&&e[r]!==t[c]?n.unshift(a.Ay.createElement("div",{className:"IYTzbS8o"},a.Ay.createElement("div",{className:"Jw1oQFdk"},e[r]??""),a.Ay.createElement("div",{className:"TZfEz3sc"},t[c]),a.Ay.createElement("div",{className:"Y9ied8_t"},e[r]??""))):n.unshift(a.Ay.createElement("span",null,e[r]??""))}return n}(t,g):t),[y,g,t]);return(0,a.vJ)((()=>{if(!y)return;const e=window.setTimeout((()=>{A()}),200);return()=>{window.clearTimeout(e)}}),[y,t]),a.Ay.createElement("span",{ref:h,className:(0,s.A)(n,!r&&"tgKbsVmz"),dir:p?"rtl":void 0},f)}))},79577:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(84051),o=n(23174),i=n(90709),s=n(62587),r=n(64489);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c.apply(this,arguments)}const l=(0,a.ph)((function(e){const{sticker:t,noLoad:n,forcePreview:l,...d}=e,u=t?.thumbnail?.dataUri,m=t&&(0,i.Mwy)(t,"full"),h=(0,s.A)(t?(0,i.Mwy)(t,"preview"):void 0,n&&!l,o.qZ.BlobUrl),p=(0,s.A)(m,n);return a.Ay.createElement(r.A,c({tgsUrl:p,previewUrl:h,thumbDataUri:u},d))}))},64489:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(84051),o=n(87357),i=n(95807),s=n(37661),r=n(17712),c=n(83057),l=n(4438);const d="lM2usrZU";function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},u.apply(this,arguments)}const m=new Set,h=(0,a.ph)((function(e){const{previewUrl:t,thumbDataUri:n,className:h,...p}=e,[g,,A]=(0,s.A)(Boolean(n)),y=(0,c.A)(g),[f,v,C]=(0,s.A)(m.has(t)),I=(0,c.A)(f),[S,E]=(0,s.A)(!1),w=(0,r.A)((()=>{v(),m.add(t)})),b=(0,r.A)((()=>{A(),C(),setTimeout(E,300)})),{size:R}=e;return a.Ay.createElement("div",{className:(0,o.A)(h,"xCi2f0YH"),style:(0,i.A)(void 0!==R&&`width: ${R}px; height: ${R}px;`)},n&&!S&&a.Ay.createElement("img",{src:n,className:(0,o.A)(d,y),draggable:!1}),t&&!S&&a.Ay.createElement("img",{src:t,className:(0,o.A)(d,I),draggable:!1,onLoad:w}),a.Ay.createElement(l.A,u({},p,{onLoad:b})))}))},26875:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(84051),o=n(87357),i=n(59030),s=n(21849);const r=3,c=(0,a.ph)((e=>{let{peers:t,size:n,className:c,limit:l=r,badgeText:d}=e;const u=(0,i.A)(),m="number"==typeof n?n:s.R[n],h=(0,a.Kr)((()=>d||(!t?.length||t.length<=l?void 0:"+"+(t.length-l))),[d,t,l]);return a.Ay.createElement("div",{className:(0,o.A)(c,"kXs18Nmi"),style:`--_size: ${m}px;`,dir:u.isRtl?"rtl":"ltr"},t?.slice(0,l).map((e=>a.Ay.createElement(s.A,{size:n,peer:e,className:"XND8fhC1"}))),h&&a.Ay.createElement("div",{className:"SHyAyGFO"},h))}))},27860:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(84051),o=n(66644),i=n(87357),s=n(45470),r=n(17712),c=n(50680);const l=(0,a.ph)((e=>{let{isVisible:t,withAnimation:n,thumbDataUri:l,className:d,width:u,height:m}=e;const h=(0,a.li)(null),{shouldRender:p,transitionClassNames:g}=(0,c.A)(t,void 0,!0,!n&&void 0,void 0,500),A=(0,s.A)(l,!p,void 0,25,u,m),y=(0,r.A)((e=>{if(!h.current)return;const t=h.current,n=e.currentTarget.getBoundingClientRect(),a=e.clientX-n.left,i=e.clientY-n.top,s=a-n.width/2,r=i-n.height/2;(0,o.RK)((()=>{t.setAttribute("style",`--click-shift-x: ${s}px; --click-shift-y: ${r}px`)}))}));if(p)return a.Ay.createElement("div",{className:(0,i.A)("qF2WgYVg",g,d,n&&"pNM3cgkY"),ref:h,onClick:n?y:void 0},a.Ay.createElement("canvas",{ref:A,className:"eULqS2yR",width:u,height:m}),a.Ay.createElement("div",{className:"XBor45hE"}))}))},15535:(e,t,n)=>{n.d(t,{A:()=>p});var a=n(84051),o=n(31481),i=n(66644),s=n(87357),r=n(83868),c=n(82393),l=n(14737),d=n(43874),u=n(59030),m=n(64493),h=n(18276);const p=(0,a.ph)((e=>{let{isLoading:t=!1,isPasswordVisible:n,error:p,hint:g,placeholder:A="Password",submitLabel:y="Next",description:f,shouldShowSubmit:v,shouldResetValue:C,shouldDisablePasswordManager:I=!1,noRipple:S=!1,clearError:E,onChangePasswordVisibility:w,onInputChange:b,onSubmit:R}=e;const N=(0,a.li)(null),M=(0,u.A)(),{isMobile:k}=(0,d.Ay)(),[P,T]=(0,a.J0)(""),[x,L]=(0,a.J0)(!1),B=k?550:400;return(0,a.vJ)((()=>{C&&T("")}),[C]),(0,l.A)((()=>{c.TF||N.current.focus()}),B),(0,a.vJ)((()=>{p&&(0,i.RK)((()=>{N.current.focus(),N.current.select()}))}),[p]),a.Ay.createElement("form",{action:"",onSubmit:R?function(e){e.preventDefault(),t||x&&R(P)}:r.A,autoComplete:"off"},a.Ay.createElement("div",{className:(0,s.A)("input-group password-input",P&&"touched",p&&"error"),dir:M.isRtl?"rtl":void 0},I&&a.Ay.createElement("input",{type:"password",id:"prevent_autofill",autoComplete:"off",className:"visually-hidden",tabIndex:-2}),a.Ay.createElement("input",{ref:N,className:"form-control",type:n?"text":"password",id:"sign-in-password",value:P||"",autoComplete:I?"one-time-code":"current-password",onChange:function(e){p&&E();const{target:t}=e;T(t.value),L(t.value.length>=o.AGC),b&&b(t.value)},maxLength:256,dir:"auto"}),a.Ay.createElement("label",null,p||g||A),a.Ay.createElement("div",{className:"div-button toggle-password",onClick:function(){w(!n)},role:"button",tabIndex:0,title:"Toggle password visibility","aria-label":"Toggle password visibility"},a.Ay.createElement(h.A,{name:n?"eye":"eye-closed"}))),f&&a.Ay.createElement("p",{className:"description"},f),R&&(x||v)&&a.Ay.createElement(m.A,{size:"smaller",type:"submit",ripple:!S,isLoading:t,disabled:!x},y))}))},10187:(e,t,n)=>{n.d(t,{A:()=>p});var a=n(84051),o=n(13439),i=n(90709),s=n(70636),r=n(29807),c=n(87357),l=n(35049),d=n(59030),u=n(21849),m=n(34431),h=n(18276);const p=(0,a.ph)((0,o.EK)(((e,t)=>{let{peerId:n,forceShowSelf:a}=t;if(!n)return{};const o=(0,r.PVB)(e,n),i=(0,r.mBe)(e,n);return{peer:o,isSavedMessages:!a&&i&&i.isSelf}}))((e=>{let{icon:t,title:n,isMinimized:o,canClose:r,isCloseNonDestructive:p,clickArg:g,peer:A,mockPeer:y,customPeer:f,className:v,isSavedMessages:C,withPeerColors:I,withEmojiStatus:S,onClick:E,itemClassName:w}=e;const b=(0,d.A)(),R=y||A,N=f||R,M=R&&(0,s.vj)(R)?R:void 0;let k,P,T;t&&n?(k=a.Ay.createElement("div",{className:"NtoGLT22"},a.Ay.createElement(h.A,{name:t,style:"f91Ad80i"})),P=n):N&&(k=a.Ay.createElement(u.A,{className:"La8BQ9yr",peer:N,size:"small",isSavedMessages:C}),T=(0,i.F9N)(b,N)||n,P=n||a.Ay.createElement(m.A,{peer:N,isSavedMessages:C,withEmojiStatus:S}));const x=(0,c.A)("_Lq6_4e5",(M?.isForum||f?.isAvatarSquare)&&"JIHfTUVn",o&&"UhOZvxvs",r&&"uvvgSFUJ",p&&"fAk5yEeV",!E&&"P8r3OoaX",I&&(0,l.y)(f||A),v);return a.Ay.createElement("div",{className:x,onClick:()=>E?.(g),title:o?T:void 0,dir:b.isRtl?"rtl":void 0},k,!o&&a.Ay.createElement("div",{className:(0,c.A)("XPVuH29G",w),dir:"auto"},P),r&&a.Ay.createElement("div",{className:"xVPG2UTy"},a.Ay.createElement(h.A,{name:"close"})))})))},20333:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(84051),o=n(87357),i=n(95807),s=n(59030),r=n(93545),c=n(18276);const l="_b5HgBXr",d="P6mch4bB",u=(0,a.ph)((e=>{let{leftText:t,rightText:n,floatingBadgeText:u,floatingBadgeIcon:m,progress:h,isPrimary:p,className:g}=e;const A=(0,s.A)(),y=(0,a.li)(null),f=(0,a.li)(null),[v,C]=(0,a.J0)(0),[I,S]=(0,a.J0)(0),E=()=>{if(y.current&&f.current&&void 0!==h){const e=y.current.offsetWidth,t=f.current.offsetWidth,n=e/2,a=t-e/2,o=h*t,i=Math.max(n,Math.min(o,a));let s;C(i/t),s=o<n?h*t/(2*n):o>a?.5+(h-a/t)/(1-a/t)*.4:.5,S(s)}};(0,a.vJ)(E,[h]),(0,r.A)(f,E);const w=Boolean(m||u),b=Boolean(h)&&h>.99;return a.Ay.createElement("div",{ref:f,className:(0,o.A)("nY2ggBsF",w&&"RYtVQAjM",p&&"Zi0w7QJ3",g),style:(0,i.A)(void 0!==h&&`--progress: ${h}`,void 0!==I&&`--tail-position: ${I}`,`--shift-x: ${v}`)},w&&a.Ay.createElement("div",{className:"dhigNjAq"},a.Ay.createElement("div",{className:"cOpfCGPh"},a.Ay.createElement("div",{className:"uNwBLNOy",ref:y},m&&a.Ay.createElement(c.A,{name:m,className:"MJ7MTmxi"}),u&&a.Ay.createElement("div",{className:"MwzZt3Qo",dir:A.isRtl?"rtl":void 0},u)),a.Ay.createElement("div",{className:"qRwO7SZm"},a.Ay.createElement("svg",{width:"28",height:"28",viewBox:"0 0 28 28",fill:"none"},a.Ay.createElement("path",{d:"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z",fill:"#7E85FF"}))))),a.Ay.createElement("div",{className:l},a.Ay.createElement("span",null,t)),a.Ay.createElement("div",{className:d},a.Ay.createElement("span",null,n)),a.Ay.createElement("div",{className:(0,o.A)("sZZV0yoe",b&&"m8ie8IxL")},a.Ay.createElement("div",{className:l},a.Ay.createElement("span",null,t)),a.Ay.createElement("div",{className:d},a.Ay.createElement("span",null,n))))}))},66833:(e,t,n)=>{function a(e){return"starGift"===e.type?e.sticker:e.attributes.find((e=>"model"===e.type))?.sticker}function o(e){return"starGift"===e.type?e.availabilityTotal:e.totalCount}function i(e){if("starGiftUnique"===e.type)return function(e){const t=e.find((e=>"model"===e.type)),n=e.find((e=>"backdrop"===e.type)),a=e.find((e=>"pattern"===e.type));return{model:t,originalDetails:e.find((e=>"originalDetails"===e.type)),pattern:a,backdrop:n}}(e.attributes)}n.d(t,{UC:()=>o,uc:()=>i,yQ:()=>a})},49086:(e,t,n)=>{n.d(t,{C:()=>m,V:()=>u});var a=n(13439),o=n(23174),i=n(90709),s=n(3544),r=n(60343),c=n(58849),l=n(4961),d=n(18501);function u(e){let{message:t,highlight:n,emojiSize:a,asPreview:o,truncateLength:s,isProtected:l,forcePlayback:u,shouldRenderAsHtml:m,isForMediaViewer:h,threadId:p,maxTimestamp:g}=e;const{text:A,entities:y}=t.content.text||{};if(!A){const e=(0,i.P5b)(t)?.text;return e?[(0,c.A)(e,s)]:void 0}const f=(0,r.bj)(t);return(0,d.f)({text:(0,c.A)(A,s),entities:y,highlight:n,emojiSize:a,shouldRenderAsHtml:m,containerId:`${h?"mv-":""}${f}`,asPreview:o,isProtected:l,forcePlayback:u,messageId:"id"in t?t.id:void 0,chatId:t.chatId,threadId:p,maxTimestamp:g})}function m(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.vs;const{entities:m}=t.content.text||{},h=(0,a.mS)(),p=(0,i.niV)(h,t),g=m?.some((e=>e.type===o.C7.Spoiler)),A=m?.some((e=>e.type===o.C7.CustomEmoji));if(!g&&!A){const a=(0,c.A)((0,s.dS)(e,t,p,n),d);return r?(0,l.A)(a,["emoji","highlight"],{highlight:r}):(0,l.A)(a)}const y=!n&&(0,s.Su)(t),f=y?`${y} `:"",v=u({message:t,highlight:r,asPreview:!0,truncateLength:d}),C=(0,s.oL)(e,t,p,v);return[...(0,l.A)(f),...Array.isArray(C)?C:[C]].filter(Boolean)}},79582:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(13439),o=n(29807),i=n(87894);const s=3e9,r=3e8;function c(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0;const l=(0,a.mS)();return(0,i.My)(e,(e=>{if(e===c)return 1/0;const a=(0,o.hds)(l,e);if(!a)return 0;let i=0;const d=(0,o.yHC)(l,e);return d&&(i+=d.date),t&&a.isVerified&&(i+=s),n&&n.includes(e)&&(i=Date.now()+r+(n.length-n.indexOf(e))),i}),"desc")}},54960:(e,t,n)=>{n.d(t,{A:()=>M});var a=n(84051),o=n(13439),i=n(31481),s=n(66644),r=n(90709),c=n(70636),l=n(29807),d=n(87357),u=n(87894),m=n(79824),h=n(96374),p=n(17712),g=n(59030),A=n(19806),y=n(46222),f=n(40664),v=n(52745),C=n(24956),I=n(21849),S=n(34431),E=n(18276),w=n(10187),b=n(45780),R=n(31722);const N="PeerPickerItem",M=(0,a.ph)((e=>{let{className:t,categories:n,itemIds:M,categoryPlaceholderKey:k,filterValue:P,filterPlaceholder:T,notFoundText:x,searchInputId:L,itemClassName:B,isLoading:D,noScrollRestore:O,isSearchable:F,lockedUnselectedSubtitle:K,forceShowSelf:U,isViewOnly:_,itemInputType:$,withStatus:j,withPeerTypes:z,withPeerUsernames:H,withDefaultPadding:G,onFilterChange:J,onDisabledClick:V,onLoadMore:q,...W}=e;const Y=(0,g.A)(),Z=W.allowMultiple,X=Z?W.lockedSelectedIds:void 0,Q=Z?W.lockedUnselectedIds:void 0,ee=(0,a.Kr)((()=>Z?W.selectedCategories:W.selectedCategory?[W.selectedCategory]:m.p),[Z,W.selectedCategory,W.selectedCategories]),te=(0,a.Kr)((()=>Z?W.selectedIds:W.selectedId?[W.selectedId]:m.p),[Z,W.selectedId,W.selectedIds]),ne=(0,a.li)(null),ae=te.length>10;(0,a.vJ)((()=>{if(!F)return;const e=window.setTimeout((()=>{(0,s.YS)((()=>{ne.current?.focus()}))}),500);return()=>{window.clearTimeout(e)}}),[F]);const oe=(0,a.Kr)((()=>new Set(X)),[X]),ie=(0,a.Kr)((()=>new Set(Q)),[Q]),se=(0,a.Kr)((()=>te.filter((e=>!oe.has(e)))),[oe,te]),re=(0,a.Kr)((()=>n?(0,u.dU)(n,"type"):{}),[n]),ce=(0,a.Kr)((()=>{if(P)return M;const e=[],t=[],n=[];return M.forEach((a=>{oe.has(a)?e.push(a):ie.has(a)?n.push(a):t.push(a)})),e.concat(t,n)}),[P,M,oe,ie]),le=(0,p.A)((e=>{if(oe.has(e))V?.(e,!0);else if(ie.has(e))V?.(e,!1);else{if(Z&&re[e]){const t=re[e].type,n=ee?.slice()||[];return n.includes(t)?n.splice(n.indexOf(t),1):n.push(t),void W.onSelectedCategoriesChange?.(n)}if(Z){const t=te.slice();return t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),void W.onSelectedIdsChange?.(t)}re[e]?W.onSelectedCategoryChange?.(re[e].type):W.onSelectedIdChange?.(e)}})),de=(0,p.A)((e=>{const{value:t}=e.currentTarget;J?.(t)})),[ue,me]=(0,h.A)(q,ce,Boolean(P)),he=(0,a.hb)(((e,t)=>{const n=(0,o.mS)(),s=t?re[e]:void 0,u=t?void 0:(0,l.PVB)(n,e),m=u||s;if(!m)return i.Oig?a.Ay.createElement("div",{key:e},"No peer or category with ID ",e):void 0;const h=u&&!(0,c.vj)(u)?u.isSelf&&!U:void 0,p=ie.has(e),g=oe.has(e),y=p||g,f=s?ee?.includes(s.type):te.includes(e),[v,w]=function(){if(p)return[K];if(u){if(H){const e=u.usernames?.[0]?.username;if(e)return[`@${e}`]}if(j){if((0,c.vj)(u))return[(0,r.sTh)(Y,u)];const e=(0,l.K0y)(n,u.id);return[(0,r.CDb)(Y,u,e),(0,d.A)((0,r.PFE)(u,e,!0)&&R.A.onlineStatus)]}if(z){const e=(0,c.cy)(u);return e&&[Y(e)]}}}()||[];return a.Ay.createElement(b.A,{key:e,className:(0,d.A)(N,B),title:a.Ay.createElement(S.A,{peer:m}),avatarElement:a.Ay.createElement(I.A,{peer:u||s,isSavedMessages:h,size:"medium"}),subtitle:v,subtitleClassName:w,disabled:y,inactive:_,ripple:!0,inputElement:y?a.Ay.createElement(E.A,{name:"lock-badge"}):"radio"===$?a.Ay.createElement(C.A,{checked:f,disabled:y,onlyInput:!0}):"checkbox"===$?a.Ay.createElement(A.A,{checked:f,disabled:y,onlyInput:!0}):void 0,inputPosition:"end",onClick:()=>le(e),onDisabledClick:V&&(()=>V(e,g))})}),[re,U,_,B,$,Y,oe,ie,K,V,ee,te,z,j,H]),pe=(0,a.Kr)((()=>{if(n?.length)return a.Ay.createElement("div",{key:"categories"},k&&a.Ay.createElement("div",{className:R.A.pickerCategoryTitle},Y(k)),n?.map((e=>he(e.type,!0))),a.Ay.createElement("div",{className:R.A.pickerCategoryTitle},Y("FilterChats")))}),[n,k,Y,he]);return a.Ay.createElement("div",{className:(0,d.A)(R.A.container,t)},F&&a.Ay.createElement("div",{className:(0,d.A)(R.A.header,"custom-scroll"),dir:Y.isRtl?"rtl":void 0},ee?.map((e=>a.Ay.createElement(w.A,{className:R.A.peerChip,customPeer:re[e],onClick:le,clickArg:e,canClose:!0}))),X?.map(((e,t)=>a.Ay.createElement(w.A,{className:R.A.peerChip,peerId:e,isMinimized:ae&&t<te.length-5,forceShowSelf:U,onClick:le,clickArg:e}))),se.map(((e,t)=>a.Ay.createElement(w.A,{className:R.A.peerChip,peerId:e,isMinimized:ae&&t+(X?.length||0)<te.length-5,canClose:!0,onClick:le,clickArg:e}))),a.Ay.createElement(f.A,{id:L,ref:ne,value:P,onChange:de,placeholder:T||Y("SelectChat")})),ue?.length?a.Ay.createElement(y.A,{className:(0,d.A)(R.A.pickerList,G&&R.A.padded,"custom-scroll"),items:ue,itemSelector:`.${N}`,beforeChildren:pe,onLoadMore:me,noScrollRestore:O},ue.map((e=>he(e)))):D||!ue||ue.length?a.Ay.createElement(v.A,null):a.Ay.createElement("p",{className:R.A.noResults},x||"Sorry, nothing found."))}))},45780:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(84051),o=n(87357),i=n(82393),s=n(17712),r=n(59030),c=n(42452);const l=e=>{let{title:t,subtitle:n,avatarElement:l,inputElement:d,inputPosition:u="start",disabled:m,inactive:h,ripple:p,className:g,titleClassName:A,subtitleClassName:y,style:f,onClick:v,onDisabledClick:C}=e;const I=(0,r.A)(),S=!h&&!m,E=(0,s.A)((()=>{h||(m?C?.():v?.())}));return a.Ay.createElement("div",{className:(0,o.A)("OHkx_W75",n&&"neXqB2_A",m&&"tvZeVJPh",S&&"VUSwo4t5",l&&"dMT9byM6",g),onClick:E,style:f,dir:I.isRtl?"rtl":void 0,role:S?"button":void 0,tabIndex:S?0:void 0},!m&&!h&&p&&a.Ay.createElement(c.A,null),d&&a.Ay.createElement("div",{className:(0,o.A)("kmjqObdP","end"===u?"iqGhSQGm":"F0Hv3EQm")},d),l&&a.Ay.createElement("div",{className:"dnAaRPCo"},l),a.Ay.createElement("div",{className:(0,o.A)("JSSC0N8V",A)},t),n&&a.Ay.createElement("div",{className:(0,o.A)("OYmzCSp2",y)},n),!d&&i.pz&&a.Ay.createElement("div",{className:"P53DrbWA"}))}},40558:(e,t,n)=>{n.d(t,{A:()=>h});var a=n(84051),o=n(66644),i=n(90709),s=n(87357),r=n(95807),c=n(87679),l=n(17712),d=n(62587),u=n(93545),m=n(38691);const h=(0,a.ph)((e=>{let{backgroundColors:t,patternColor:n,patternIcon:h,clearBottomSector:p,className:g}=e;const A=(0,a.li)(null),y=(0,a.li)(null),[f,v]=(0,a.Ul)({width:0,height:0}),C=(0,m.A)(),[I,S]=(0,a.J0)(),E=h&&(0,i.Mwy)(h,"preview"),w=(0,d.A)(E);(0,a.vJ)((()=>{w&&(0,c.NN)(w).then(S)}),[w]);const b=(0,a.Kr)((()=>{const e=[];for(let t=1;t<=3;t++){const n=Math.floor(8*(1+.5*(t-1))),a=t/3,o=.05+(.4-.05)*a,i=t%2==0?Math.PI/n:0;for(let t=0;t<n;t++){const s=t/n*Math.PI*2+i;if(p&&s>.45*Math.PI&&s<.55*Math.PI)continue;const r=.5+1.71*o*Math.cos(s),c=.5+o*Math.sin(s),l=1.4-a*Math.random();e.push({x:r,y:c,sizeFactor:l})}}return e}),[p]);(0,u.A)(A,(e=>{v({width:e.contentRect.width,height:e.contentRect.height})})),(0,a.vJ)((()=>{const e=A.current;e&&v({width:e.clientWidth,height:e.clientHeight})}),[v]);const R=(0,l.A)((()=>{const e=y.current;if(!e||!I)return;const t=e.getContext("2d"),{width:a,height:o}=e;if(!a||!o)return;t.save(),b.forEach((e=>{let{x:n,y:i,sizeFactor:s}=e;const r=(a-Math.max(a,250*C))/2,c=n*Math.max(a,250*C)+r,l=i*Math.max(o,250*C)+r,d=20*C*s*(r?.8:1);t.drawImage(I,c-d/2,l-d/2,d,d)})),t.restore(),n&&(t.save(),t.fillStyle=n,t.globalCompositeOperation="source-atop",t.fillRect(0,0,a,o),t.restore());const i=t.createRadialGradient(a/2,o/2,0,a/2,o/2,a/2);i.addColorStop(0,"#FFFFFF77"),i.addColorStop(1,"#FFFFFF"),t.save(),t.globalCompositeOperation="destination-out",t.fillStyle=i,t.fillRect(0,0,a,o),t.restore()}));return(0,a.vJ)((()=>{R()}),[I]),(0,a.vJ)((()=>{const{width:e,height:t}=f(),n=y.current;if(!e||!t)return;const a=Math.max(e,t);(0,o.RK)((()=>{n.width=a*C,n.height=a*C,R()}))}),[f,C]),a.Ay.createElement("div",{ref:A,className:(0,s.A)("Af3tYFMg",g),style:(0,r.A)(`--_bg-1: ${t[0]}`,`--_bg-2: ${t[1]||t[0]}`)},a.Ay.createElement("canvas",{className:"GbpiDSS_",ref:y}))}))},83594:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(84051),o=n(90709),i=n(87357),s=n(95807),r=n(82393),c=n(62587),l=n(87412);const d="PZAuNVZH",u=(0,a.ph)((e=>{let{reaction:t,isLottie:n,className:u,particleSize:m,onEnded:h}=e;const p=(0,o.aLQ)(t.documentId,!0),g=(0,c.A)(n?void 0:p),A=(0,a.Kr)((()=>r.ol?Array.from({length:7}).map((()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;const t=(e/2+Math.random()*e*3)*(Math.random()>.5?1:-1),n=e+Math.random()*e*4;return`M 0 0 C 0 0 ${t} ${-n-e} ${t} ${n}`}(m))):[]),[m]);if(g||n)return a.Ay.createElement("div",{className:(0,i.A)("aInga6VW",u),style:(0,s.A)(Boolean(m)&&`--particle-size: ${m}px`)},A.map(((e,o)=>{const i=`--offset-path: path('${e}');`;return n?a.Ay.createElement(l.A,{documentId:t.documentId,className:d,style:i,withSharedAnimation:!0,size:m,onAnimationEnd:0===o?h:void 0}):a.Ay.createElement("img",{src:g,alt:"",className:d,style:i,draggable:!1,onAnimationEnd:0===o?h:void 0})})))}))},11241:(e,t,n)=>{n.d(t,{A:()=>w});var a=n(84051),o=n(13439),i=n(90709),s=n(29807),r=n(87357),c=n(43336),l=n(76023),d=n(37661),u=n(5912),m=n(17712),h=n(62587),p=n(50680),g=n(47483),A=n(18104),y=n(87412),f=n(83594),v=n(17794),C=n(93879);const I=1.5*l.$,S=6.5*l.$,E=l.$,w=(0,a.ph)((0,o.EK)(((e,t)=>{let{containerId:n}=t;const{genericEmojiEffects:a,reactions:o}=e,{activeReactions:i}=(0,s.nTw)(e),r=(0,s.xYJ)(e,"reactionEffects");return{activeReactions:i?.[n],availableReactions:o.availableReactions,genericEffects:a,withEffects:r}}))((e=>{let{containerId:t,reaction:n,className:s,size:l=I,effectSize:w=S,activeReactions:b,availableReactions:R,genericEffects:N,withEffects:M,withEffectOnly:k,shouldPause:P,shouldLoop:T,loopLimit:x,observeIntersection:L}=e;const{stopActiveReaction:B}=(0,o.ko)(),D=(0,a.li)(null),O="custom"===n.type,F=(0,a.Kr)((()=>R?.find((e=>(0,i.a0K)(e.reaction,n)))),[R,n]),K=F?.centerIcon?.id,{customEmoji:U}=(0,g.A)(O?n.documentId:void 0),_=(0,a.Kr)((()=>{if(!O)return F?.aroundAnimation?.id;if(!U)return;const e=R?.find((e=>e.reaction.emoticon===U.emoji))?.aroundAnimation?.id;return e}),[F,R,U,O]),$=(0,a.Kr)((()=>{if(_)return _;if(!N?.stickers)return;const{stickers:e}=N;return e[Math.floor(Math.random()*e.length)].id}),[_,N]),j=(0,u.Vz)(D,L),z=K&&(0,i.aLQ)(K),H=$&&(0,i.aLQ)($),G=(0,h.A)(z),J=(0,h.A)(H),V=(0,a.Kr)((()=>b?.find((e=>(0,i.a0K)(e,n)))),[b,n]),q=Boolean(M&&V&&(O||G)&&J),W=j&&(q&&!k||T),{shouldRender:Y,transitionClassNames:Z}=(0,p.A)(q,void 0,!0,"slow"),{shouldRender:X,transitionClassNames:Q}=(0,p.A)(W,void 0,!0,"slow"),ee=(0,m.A)((()=>{B({containerId:t,reaction:n})})),[te,ne,ae]=(0,d.A)(),oe=!(O||W&&te),{shouldRender:ie,transitionClassNames:se}=(0,p.A)(oe,void 0,!0),re=(0,r.A)(C.A.root,Y&&C.A.animating,k&&C.A.withEffectOnly,s);return a.Ay.createElement("div",{className:re,ref:D},!k&&ie&&a.Ay.createElement(v.A,{className:se,reaction:n,availableReactions:R,size:l,observeIntersection:L}),!k&&O&&a.Ay.createElement(y.A,{documentId:n.documentId,className:C.A.customEmoji,size:l,noPlay:P,noVideoOnMobile:!0,loopLimit:x,observeIntersectionForPlaying:L,forceAlways:!0}),X&&!O&&a.Ay.createElement(A.A,{key:`${K}-${l}`,className:(0,r.A)(C.A.animatedIcon,Q),size:(0,c.Ki)(1.9*l),tgsUrl:G,play:j&&!P,noLoop:!T,onLoad:ne,onEnded:ae,forceAlways:!0}),Y&&a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(A.A,{key:`${$}-${w}`,className:(0,r.A)(C.A.effect,Z),size:w,tgsUrl:J,play:j,noLoop:!0,onEnded:ee,forceAlways:!0}),O&&!_&&j&&a.Ay.createElement(f.A,{reaction:n,className:Z,particleSize:Math.max(.5*l,E),onEnded:ee})))})))},17794:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(84051),o=n(90709),i=n(87357),s=n(62587),r=n(83057),c=n(87412),l=n(18276),d=n(61911);const u=(0,a.ph)((e=>{let{reaction:t,availableReactions:n,className:u,size:m,withIconHeart:h,observeIntersection:p}=e;const g=(0,a.Kr)((()=>n?.find((e=>(0,o.a0K)(e.reaction,t)))),[n,t]),A=g?.staticIcon?.id,y=A?`document${A}`:void 0,f=(0,s.A)(y),v=(0,r.A)(f),C="emoji"===t.type&&"ðŸ¦„"===t.emoticon,I=h&&"emoji"===t.type&&"â¤"===t.emoticon;return"custom"===t.type?a.Ay.createElement(c.A,{documentId:t.documentId,className:(0,i.A)("ReactionStaticEmoji",u),size:m,observeIntersectionForPlaying:p}):I?a.Ay.createElement(l.A,{name:"heart",className:"ReactionStaticEmoji",style:`font-size: ${m}px; width: ${m}px`}):a.Ay.createElement("img",{className:(0,i.A)("ReactionStaticEmoji",C&&"with-unicorn-fix",v,u),style:m?`width: ${m}px; height: ${m}px`:void 0,src:f||d,alt:g?.title,draggable:!1})}))},99515:(e,t,n)=>{n.d(t,{A:()=>q});var a=n(84051),o=n(13439),i=n(23174),s=n(31481),r=n(90709),c=n(29807),l=n(87357),d=n(85982),u=n(80539);const m=document.createElement("div"),h=new Set([i.C7.Bold,i.C7.Italic,i.C7.Underline,i.C7.Strike,i.C7.Spoiler,i.C7.CustomEmoji]);function p(e){const t=function(e){const t=e.cloneContents();m.appendChild(t);const n=function(e,t){const n=e.commonAncestorContainer;if(n.nodeType===Node.ELEMENT_NODE&&n.classList.contains("text-content"))return t;let a=e.commonAncestorContainer.parentElement;for(;a&&!a.classList.contains("text-content");){const e=a.tagName.toLowerCase(),n=a.dataset.entityType;t=`<${e} ${n?`data-entity-type="${n}"`:""}>${t}</${e}>`,a=a.parentElement}return t}(e,m.innerHTML);return m.innerHTML="",n.replace(/<br\s*\/?>/gi,"\n").replace(/&nbsp;/gi," ").replace(/\u00a0/gi," ")}(e);return function(e){if(!e.entities)return e;const t=e.entities.filter((e=>h.has(e.type)));return{...e,entities:t.length?t:void 0}}((0,u.Ay)(t,!1,!0))}var g=n(37661),A=n(17712),y=n(59030),f=n(24531),v=n(21511),C=n(80089),I=n(80464);const S=e=>{const{isOpen:t}=e,n=(0,I.A)(C.ar.Extra,"PinMessageModal",!t);return n?a.Ay.createElement(n,e):void 0};var E=n(94189),w=n(73104),b=n(76023),R=n(4961),N=n(3544),M=n(81686),k=n(58554),P=n(82393),T=n(49086);function x(e){return e?"lng_context_copy_selected":"lng_context_copy_text"}var L=n(43874),B=n(26875),D=n(71429),O=n(24433),F=n(60859),K=n(55158),U=n(17663);const _="C3LVl_JT",$="cd1ZZeSy",j=(0,a.ph)((function(e){let{message:t}=e;const n=(0,y.A)(),{editDate:o}=t,i=!o;return a.Ay.createElement(O.A,{icon:"clock-edit",className:_},i?a.Ay.createElement(K.A,{className:$}):Boolean(o)&&n("Chat.PrivateMessageEditTimestamp.Date",(0,U.U)(n,1e3*o)))}));var z=n(76283),H=n(41036);const G=(0,a.ph)((function(e){let{message:t,shouldRenderShowWhen:n,canLoadReadDate:i,closeContextMenu:s}=e;const{openPrivacySettingsNoticeModal:r}=(0,o.ko)(),c=(0,y.A)(),{readDate:l}=t,d=i&&!l&&!n;return a.Ay.createElement(O.A,{icon:"message-read",className:_},a.Ay.createElement(H.Ay,{name:"fade",activeKey:d?1:2,className:"mg4sBQ9n"},d?a.Ay.createElement(K.A,{className:$}):a.Ay.createElement(a.Ay.Fragment,null,Boolean(l)&&c("PmReadAt",(0,U.U)(c,1e3*l)),!l&&n&&a.Ay.createElement("div",null,c("PmRead"),a.Ay.createElement("span",{className:"bmxij_dk",onClick:()=>{s(),r({chatId:t.chatId,isReadDate:!0})}},c("PmReadShowWhen"))))))})),J=(0,a.ph)((e=>{let{isReactionPickerOpen:t,availableReactions:n,topReactions:s,defaultTagReactions:c,isOpen:u,message:m,poll:h,story:p,isPrivate:f,isCurrentUserPremium:v,enabledReactions:C,isWithPaidReaction:I,reactionsLimit:S,anchor:E,targetHref:U,canSendNow:_,canReschedule:$,canBuyPremium:H,canReply:J,canQuote:V,canEdit:q,noReplies:W,canPin:Y,canUnpin:Z,canDelete:X,canForward:Q,canReport:ee,canFaveSticker:te,canUnfaveSticker:ne,canCopy:ae,canCopyLink:oe,canSelect:ie,canDownload:se,canSaveGif:re,canRevote:ce,canClosePoll:le,canTranslate:de,canShowOriginal:ue,canSelectLanguage:me,isDownloading:he,repliesThreadInfo:pe,canShowSeenBy:ge,canShowReactionsCount:Ae,canShowReactionList:ye,seenByRecentPeers:fe,hasCustomEmoji:ve,customEmojiSets:Ce,canPlayAnimatedEmojis:Ie,isInSavedMessages:Se,shouldRenderShowWhen:Ee,canLoadReadDate:we,onReply:be,onOpenThread:Re,onEdit:Ne,onPin:Me,onUnpin:ke,onForward:Pe,onDelete:Te,onFaveSticker:xe,onReport:Le,onUnfaveSticker:Be,onSelect:De,onSend:Oe,onReschedule:Fe,onClose:Ke,onCloseAnimationEnd:Ue,onCopyLink:_e,onCopyNumber:$e,onDownload:je,onSaveGif:ze,onCancelVote:He,onClosePoll:Ge,onShowSeenBy:Je,onShowReactors:Ve,onToggleReaction:qe,onSendPaidReaction:We,onShowPaidReactionModal:Ye,onCopyMessages:Ze,onReactionPickerOpen:Xe,onTranslate:Qe,onShowOriginal:et,onSelectLanguage:tt,userFullName:nt,canGift:at}=e;const{showNotification:ot,openStickerSet:it,openCustomEmojiSets:st,loadStickers:rt,openGiftModal:ct}=(0,o.ko)(),lt=(0,a.li)(null),dt=(0,a.li)(null),ut=(0,y.A)(),mt=!f&&!C,ht=m.areReactionsPossible,pt=ye&&!mt||ht,gt="isEdited"in m&&m.isEdited,At=m.seenByDates,yt="giftPremium"===m.content.action?.type,ft="giftCode"===m.content.action?.type,vt="starGift"===m.content.action?.type,Ct="starGiftUnique"===m.content.action?.type,It=(0,r.L8L)(m.chatId)&&at&&(yt||ft||vt||Ct),[St,Et]=(0,g.A)(),[wt,bt,Rt]=(0,g.A)(),{isMobile:Nt,isDesktop:Mt}=(0,L.Ay)(),kt=(0,a.Kr)((()=>At?Object.keys(At).length:0),[At]),Pt=(0,A.A)((()=>{ot({message:ut("Share.Link.Copied")}),Ke()})),Tt=(0,A.A)((()=>{ct({forUserId:m.chatId}),Ke()}));(0,a.vJ)((()=>{u&&St&&!t&&Ke()}),[Ke,u,t,St]),(0,a.vJ)((()=>{Ce?.length&&Ce.map((e=>rt({stickerSetInfo:{id:e.id,accessHash:e.accessHash}})))}),[Ce,st]);const xt=(0,A.A)((()=>{Ce&&(1===Ce.length?it({stickerSetInfo:{shortName:Ce[0].shortName}}):st({setIds:Ce.map((e=>e.id))}),Ke())})),Lt=function(e,t,n,a,o,s,c,l){const u=[],m=(0,r.P5b)(e),h=(0,r.ylE)(e)||((0,r.QCd)(e)?void 0:(0,r.dc_)(e)),p=(0,r.QmU)(e),g=h?(0,r.rIo)(h,"full"):void 0,A=a&&h&&(g||(0,r.KGi)(h))&&d.WO&&!P.Yw,y=window.getSelection();if(A&&u.push({label:"lng_context_copy_image",icon:"copy-media",handler:()=>{Promise.resolve(g?k.hd(g,i.qZ.BlobUrl):h.blobUrl).then(d.qp),o?.()}}),a&&n)u.push({label:"lng_context_copy_link",icon:"copy",handler:()=>{(0,d.eM)(n),o?.()}});else if(a&&m){const n=Boolean(y?.anchorNode?.parentNode&&y.anchorNode.parentNode.closest(".Message .content-inner")&&""!==y.toString().replace(/(?:\r\n|\r|\n)/g,"")&&function(e){const t=window.getSelection(),n=t?.anchorNode?.parentNode,a=n?.closest(".Message.message-list-item");return(0,r.GZP)(e.id)===a?.id}(e));u.push({label:x(n),icon:"copy",handler:()=>{const a=(0,M.A)();if(a?.length&&c)c(a);else if(n)document.execCommand("copy");else{const n=(0,T.V)({message:e,shouldRenderAsHtml:!0});n&&(0,d.A)(n.join(""),(0,N.Gn)(e,t))}o?.()}})}return s&&u.push({label:"lng_context_copy_message_link",icon:"link",handler:s}),p&&l&&u.push({label:"lng_profile_copy_phone",icon:"copy",handler:()=>{l(),o?.()}}),u}(m,(0,r.FEH)({poll:h,story:p}),U,ae,Pt,oe?_e:void 0,Ze,$e),Bt=(0,A.A)((()=>document.querySelector(`.Transition_slide-active > .MessageList div[data-message-id="${m.id}"]`))),Dt=(0,A.A)((()=>document.querySelector(".Transition_slide-active > .MessageList"))),Ot=(0,A.A)((()=>document.querySelector(".MessageContextMenu .bubble"))),Ft=(0,A.A)((()=>{const e=Nt&&document.querySelector(".AudioPlayer-content")?.offsetHeight||0,t=document.getElementById("MiddleColumn"),n=getComputedStyle(t),a=parseFloat(n.getPropertyValue("--middle-header-panes-height"))||0;return{extraPaddingX:10,extraTopPadding:document.querySelector(".MiddleHeader").offsetHeight,extraMarginTop:a+e,shouldAvoidNegativePosition:!Mt,menuElMinWidth:pt&&Nt?19.25*b.$:void 0}}));(0,a.vJ)((()=>{u?setTimeout((()=>{bt()}),200):Rt()}),[u,bt,Rt]),(0,a.vJ)((()=>(0,w.M6)(dt.current,".ReactionPicker")),[u]);const Kt=(0,A.A)((e=>{Xe(e),Et()}));return a.Ay.createElement(D.A,{ref:lt,isOpen:u,anchor:E,getTriggerElement:Bt,getRootElement:Dt,getMenuElement:Ot,getLayout:Ft,withMaxHeight:!0,className:(0,l.A)("MessageContextMenu","fluid",pt&&"with-reactions"),onClose:Ke,onCloseAnimationEnd:Ue},pt&&a.Ay.createElement(z.A,{enabledReactions:C,topReactions:s,allAvailableReactions:n,defaultTagReactions:c,currentReactions:m.reactions?.results,reactionsLimit:S,onToggleReaction:qe,onSendPaidReaction:We,onShowPaidReactionModal:Ye,isWithPaidReaction:I,isPrivate:f,isReady:wt,canBuyPremium:H,isCurrentUserPremium:v,isInSavedMessages:Se,canPlayAnimatedEmojis:Ie,onShowMore:Kt,onClose:Ke,className:(0,l.A)(St&&"ReactionSelector-hidden")}),a.Ay.createElement("div",{ref:dt,className:(0,l.A)("MessageContextMenu_items scrollable-content custom-scroll",St&&"MessageContextMenu_items-hidden"),dir:ut.isRtl?"rtl":void 0},It&&a.Ay.createElement(O.A,{icon:"gift",onClick:Tt},m?.isOutgoing?ut("SendAnotherGift"):ut("Conversation.ContextMenuSendGiftTo",nt)),_&&a.Ay.createElement(O.A,{icon:"send-outline",onClick:Oe},ut("MessageScheduleSend")),$&&a.Ay.createElement(O.A,{icon:"schedule",onClick:Fe},ut("MessageScheduleEditTime")),J&&a.Ay.createElement(O.A,{icon:"reply",onClick:be},ut(V?"lng_context_quote_and_reply":"Reply")),!W&&Boolean(pe?.messagesCount)&&a.Ay.createElement(O.A,{icon:"replies",onClick:Re},ut("Conversation.ContextViewReplies",pe.messagesCount,"i")),q&&a.Ay.createElement(O.A,{icon:"edit",onClick:Ne},ut("Edit")),te&&a.Ay.createElement(O.A,{icon:"favorite",onClick:xe},ut("AddToFavorites")),ne&&a.Ay.createElement(O.A,{icon:"favorite",onClick:Be},ut("Stickers.RemoveFromFavorites")),de&&a.Ay.createElement(O.A,{icon:"language",onClick:Qe},ut("TranslateMessage")),ue&&a.Ay.createElement(O.A,{icon:"language",onClick:et},ut("ShowOriginalButton")),me&&a.Ay.createElement(O.A,{icon:"web",onClick:tt},ut("lng_settings_change_lang")),Lt.map((e=>a.Ay.createElement(O.A,{key:e.label,icon:e.icon,onClick:e.handler,withPreventDefaultOnMouseDown:!0},ut(e.label)))),Y&&a.Ay.createElement(O.A,{icon:"pin",onClick:Me},ut("DialogPin")),Z&&a.Ay.createElement(O.A,{icon:"unpin",onClick:ke},ut("DialogUnpin")),re&&a.Ay.createElement(O.A,{icon:"gifs",onClick:ze},ut("lng_context_save_gif")),ce&&a.Ay.createElement(O.A,{icon:"revote",onClick:He},ut("lng_polls_retract")),le&&a.Ay.createElement(O.A,{icon:"stop",onClick:Ge},ut("lng_polls_stop")),se&&a.Ay.createElement(O.A,{icon:"download",onClick:je},ut(he?"lng_context_cancel_download":"lng_media_download")),Q&&a.Ay.createElement(O.A,{icon:"forward",onClick:Pe},ut("Forward")),ie&&a.Ay.createElement(O.A,{icon:"select",onClick:De},ut("Common.Select")),ee&&a.Ay.createElement(O.A,{icon:"flag",onClick:Le},ut("lng_context_report_msg")),X&&a.Ay.createElement(O.A,{destructive:!0,icon:"delete",onClick:Te},ut("Delete")),ve&&a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(F.A,{size:"thick"}),!Ce&&a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(K.A,{inline:!0,className:"menu-loading-row"}),a.Ay.createElement(K.A,{inline:!0,className:"menu-loading-row"})),Ce&&1===Ce.length&&a.Ay.createElement(O.A,{withWrap:!0,onClick:xt,className:"menu-custom-emoji-sets"},(0,R.A)(ut("MessageContainsEmojiPack",Ce[0].title),["simple_markdown","emoji"])),Ce&&Ce.length>1&&a.Ay.createElement(O.A,{withWrap:!0,onClick:xt,className:"menu-custom-emoji-sets"},(0,R.A)(ut("MessageContainsEmojiPacks",Ce.length),["simple_markdown"]))),(ge||Ae)&&a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(F.A,{size:ve?"thin":"thick"}),a.Ay.createElement(O.A,{icon:Ae?"heart-outline":"group",onClick:Ae?Ve:Je,disabled:!Ae&&!kt},a.Ay.createElement("span",{className:"MessageContextMenu--seen-by-label-wrapper"},a.Ay.createElement("span",{className:"MessageContextMenu--seen-by-label",dir:ut.isRtl?"rtl":void 0},Ae&&m.reactors?.count?ge&&kt?ut("Chat.OutgoingContextMixedReactionCount",[m.reactors.count,kt]):ut("Chat.ContextReactionCount",m.reactors.count,"i"):1===kt&&fe?(0,R.A)((0,r.L8L)(fe[0].id)?(0,r.YgS)(fe[0]):fe[0].title):kt?ut("Conversation.ContextMenuSeen",kt,"i"):ut("Conversation.ContextMenuNoViews"))),a.Ay.createElement(B.A,{className:"avatars",size:"micro",peers:fe}))),(we||Ee||gt)&&a.Ay.createElement(F.A,{size:ve?"thin":"thick"}),(we||Ee)&&a.Ay.createElement(G,{canLoadReadDate:we,shouldRenderShowWhen:Ee,message:m,closeContextMenu:Ke}),gt&&a.Ay.createElement(j,{message:m})))})),V=window.getSelection(),q=(0,a.ph)((0,o.EK)(((e,t)=>{let{message:n,messageListType:a,detectedLanguage:o}=t;const{threadId:i}=(0,c.Xf0)(e)||{},{defaultTags:l,topReactions:d,availableReactions:u}=e.reactions,m=(0,c.yuw)(e),h=(0,c.hds)(e,n.chatId),p=h&&(0,r.L8L)(h.id),g=p?void 0:(0,c.AWZ)(e,n.chatId),A=(0,c.mBe)(e,n.chatId),y=A&&(0,r.YgS)(A),{seenByExpiresAt:f,seenByMaxChatMembers:v,maxUniqueReactions:C,readDateExpiresAt:I}=e.appConfig||{},S=g?.reactionsLimit||C,{noOptions:E,canReplyGlobally:w,canPin:b,canUnpin:R,canDelete:N,canReport:M,canEdit:k,canFaveSticker:P,canUnfaveSticker:T,canCopy:x,canCopyLink:L,canSelect:B,canDownload:D,canSaveGif:O,canRevote:F,canClosePoll:K}=i&&(0,c.WAX)(e,n,i)||{},U=(0,c.R4s)(e,n),_=p?(0,c.K0y)(e,h.id):void 0,$=(0,r.Ie9)(n),j=h&&(0,c.yps)(e,h.id),z=Boolean(j),H=(0,c.Jbz)(e,n),G=Boolean(p&&$&&!z&&!H&&I&&n.date>Date.now()/1e3-I&&!_?.isReadDateRestricted&&"scheduled"!==a),J=Boolean(G&&p&&(0,c.K0y)(e,h.id)?.isReadDateRestrictedByMe),V="pinned"===a,q="scheduled"===a,W=h&&(0,r.WXB)(h),Y=i&&(0,c.Vw0)(e,n.chatId,i),Z=Boolean(Y&&!Y?.isCommentsInfo&&Y?.fromChannelId),X=i?(0,c.S0q)(e,n.chatId,i):void 0,Q=h&&!(0,r.SqZ)(h,"sendPlain",g),ee=!(!h||!i)&&(0,r.__m)(h,X,Z,g)&&Q,te=(0,r.NbO)(n),ne=(0,r.G5T)(n),ae=Boolean(!te&&h&&!H&&v&&f&&(0,r.YEQ)(h)&&$&&!q&&h.membersCount&&h.membersCount<=v&&n.date>Date.now()/1e3-f),oe=(0,r._P2)(n),ie=!te&&!W&&!q&&!oe&&!p&&n.reactions&&!(0,r.GaK)(n.reactions)&&n.reactions.canSeeList,se=(0,c.ynf)(e,n),re=Boolean(n.content.contact),ce=(0,c.g29)(e),le=(0,c.S1W)(e,n),de=le?.map((t=>(0,c.ycM)(e,t))),ue=de?.every(Boolean)?de:void 0,me=(0,c.Rny)(e,n.chatId,n.id),he=me?Boolean((0,c.a_$)(e,n.chatId,me)[n.id]?.text):void 0,pe=!he&&(0,c.S86)(e,n,o),ge=(0,c.qZq)(e,n.chatId),Ae=(0,c.nZ4)(e,n.chatId),ye=(0,c.zcZ)(e,n),fe=n.content.storyData,ve=fe?(0,c.Msb)(e,fe.peerId,fe.id):void 0,Ce=(0,c.X2D)(e,n.chatId);return{threadId:i,chat:h,availableReactions:u,topReactions:d,defaultTagReactions:l,noOptions:E,canReport:M,canSendNow:q,canReschedule:q,canReply:!V&&!q&&w,canPin:!q&&b,canUnpin:!q&&R,canDelete:N,canEdit:!V&&k,canForward:!q&&U,canFaveSticker:!q&&P,canUnfaveSticker:!q&&T,canCopy:re||!se&&x,canCopyLink:!q&&L,canSelect:B,canDownload:!se&&D,canSaveGif:!se&&O,canRevote:F,canClosePoll:!q&&K,activeDownloads:m,canShowSeenBy:ae,canLoadReadDate:G,shouldRenderShowWhen:J,enabledReactions:h?.isForbidden?void 0:g?.enabledReactions,reactionsLimit:S,isPrivate:p,isCurrentUserPremium:ce,hasFullInfo:Boolean(g),canShowReactionsCount:ie,canShowReactionList:!(te||oe||q||h?.id===s.zv8||ne),canBuyPremium:!ce&&!(0,c.n_C)(e),customEmojiSetsInfo:le,customEmojiSets:ue,canScheduleUntilOnline:(0,c.RBq)(e,n.chatId),canTranslate:pe,canShowOriginal:he&&!ge,canSelectLanguage:he&&!ge,isMessageTranslated:he,canPlayAnimatedEmojis:(0,c.BWX)(e),isReactionPickerOpen:(0,c.Ani)(e),isInSavedMessages:Ae,isChannel:W,canReplyInChat:ee,isWithPaidReaction:g?.isPaidReactionAvailable,poll:ye,story:ve,userFullName:y,canGift:Ce}}))((e=>{let{threadId:t,availableReactions:n,topReactions:c,defaultTagReactions:u,isOpen:m,messageListType:h,message:C,customEmojiSetsInfo:I,customEmojiSets:w,album:b,poll:R,story:N,anchor:M,targetHref:k,noOptions:P,canSendNow:T,hasFullInfo:x,canReschedule:L,canReply:B,canPin:D,repliesThreadInfo:O,canUnpin:F,canDelete:K,canShowReactionsCount:U,chat:_,canReport:$,canShowReactionList:j,canEdit:z,enabledReactions:H,reactionsLimit:G,isPrivate:q,isCurrentUserPremium:W,canForward:Y,canBuyPremium:Z,canFaveSticker:X,canUnfaveSticker:Q,canCopy:ee,canCopyLink:te,canSelect:ne,canDownload:ae,canSaveGif:oe,canRevote:ie,canClosePoll:se,canPlayAnimatedEmojis:re,canLoadReadDate:ce,shouldRenderShowWhen:le,activeDownloads:de,noReplies:ue,canShowSeenBy:me,canScheduleUntilOnline:he,canTranslate:pe,isMessageTranslated:ge,canShowOriginal:Ae,canSelectLanguage:ye,isReactionPickerOpen:fe,isInSavedMessages:ve,canReplyInChat:Ce,isWithPaidReaction:Ie,userFullName:Se,canGift:Ee,className:we,onClose:be,onCloseAnimationEnd:Re}=e;const{openThread:Ne,updateDraftReplyInfo:Me,setEditingId:ke,pinMessage:Pe,openForwardMenu:Te,openReplyMenu:xe,faveSticker:Le,unfaveSticker:Be,toggleMessageSelection:De,sendScheduledMessages:Oe,rescheduleMessage:Fe,downloadMedia:Ke,cancelMediaDownload:Ue,loadSeenBy:_e,openSeenByModal:$e,openReactorListModal:je,loadFullChat:ze,loadReactors:He,copyMessagesByIds:Ge,saveGif:Je,loadStickers:Ve,cancelPollVote:qe,closePoll:We,toggleReaction:Ye,requestMessageTranslation:Ze,showOriginalMessage:Xe,openChatLanguageModal:Qe,openMessageReactionPicker:et,openPremiumModal:tt,loadOutboxReadDate:nt,copyMessageLink:at,openDeleteMessageModal:ot,addLocalPaidReaction:it,openPaidReactionModal:st,reportMessages:rt}=(0,o.ko)(),ct=(0,y.A)(),{ref:lt}=(0,v.A)({isOpen:m,onCloseAnimationEnd:Re,className:!1}),[dt,ut]=(0,a.J0)(!0),[mt,ht]=(0,a.J0)(!1),[pt,gt,At]=(0,g.A)(),[yt,ft]=(0,a.J0)(!1),[vt,Ct]=(0,f.A)(he,be,C.date),It=void 0===I||Boolean(I.length);(0,a.vJ)((()=>{me&&m&&_e({chatId:C.chatId,messageId:C.id})}),[_e,m,C.chatId,C.id,me]),(0,a.vJ)((()=>{ce&&m&&nt({chatId:C.chatId,messageId:C.id})}),[ce,m,C.chatId,C.id,C.readDate]),(0,a.vJ)((()=>{U&&m&&He({chatId:C.chatId,messageId:C.id})}),[U,m,He,C.chatId,C.id]),(0,a.vJ)((()=>{I?.length&&w?.length!==I.length&&I.forEach((e=>{Ve({stickerSetInfo:e})}))}),[I,w,Ve]),(0,a.vJ)((()=>{x||q||!m||ze({chatId:C.chatId})}),[x,m,q,ze,C.chatId]);const St=(0,a.Kr)((()=>{const e=(0,o.mS)().chats.byId,t=(0,o.mS)().users.byId;if(C.reactions?.recentReactions?.length){const n=new Set(C.reactions?.recentReactions?.map((n=>{let{peerId:a}=n;return t[a]||e[a]})));return Array.from(n).filter(Boolean).slice(0,s.dqH)}if(C.seenByDates)return Object.keys(C.seenByDates).slice(0,s.dqH).map((n=>t[n]||e[n])).filter(Boolean)}),[C.reactions?.recentReactions,C.seenByDates]),Et=(0,a.Kr)((()=>{if(b)return b.messages.some((e=>{const t=(0,r.edy)(e);return!!t&&(0,r.$r_)(de,t)}));const e=(0,r.edy)(C);return!!e&&(0,r.$r_)(de,e)}),[de,b,C]),wt=B&&V?.rangeCount?V.getRangeAt(0):void 0;(0,a.vJ)((()=>{if(ge)return void ft(!1);if(!wt||wt.collapsed||!Boolean(C.content.text?.text)||!function(e){const t=e.commonAncestorContainer,n=t.nodeType===Node.TEXT_NODE?t.parentNode:t;return Boolean(n.closest(".message-content-wrapper .text-content"))&&!(Boolean(n.closest(".EmbeddedMessage"))||Boolean(n.closest(".WebPage")))}(wt))return void ft(!1);const e=p(wt),t=C.content.text.text.replace(/\u00A0/g," ");ft(e.text.trim().length>0&&t.includes(e.text))}),[wt,wt?.collapsed,wt?.startOffset,wt?.endOffset,ge,C.content.text]);const bt=(0,A.A)((()=>{ut(!1),be()})),Rt=(0,A.A)((()=>{ut(!1),bt();const e=b?.messages?b.messages.map((e=>{let{id:t}=e;return t})):[C.id];ot({chatId:C.chatId,messageIds:e,isSchedule:"scheduled"===h})})),Nt=(0,A.A)((()=>{ht(!1),be()})),Mt=(0,A.A)((()=>{const e=yt&&wt?p(wt):void 0;Ce?Me({replyToMsgId:C.id,quoteText:e,replyToPeerId:void 0}):xe({fromChatId:C.chatId,messageId:C.id,quoteText:e}),bt()})),kt=(0,A.A)((()=>{Ne({chatId:C.chatId,threadId:C.id}),bt()})),Pt=(0,A.A)((()=>{ke({messageId:C.id}),bt()})),Tt=(0,A.A)((()=>{ut(!1),ht(!0)})),xt=(0,A.A)((()=>{Pe({chatId:C.chatId,messageId:C.id,isUnpin:!0}),bt()})),Lt=(0,A.A)((()=>{if(bt(),b?.messages){const e=b.messages.map((e=>{let{id:t}=e;return t}));Te({fromChatId:C.chatId,messageIds:e})}else Te({fromChatId:C.chatId,messageIds:[C.id]})})),Bt=(0,A.A)((()=>{bt(),Le({sticker:C.content.sticker})})),Dt=(0,A.A)((()=>{bt(),Be({sticker:C.content.sticker})})),Ot=(0,A.A)((()=>{bt(),qe({chatId:C.chatId,messageId:C.id})})),Ft=(0,A.A)((()=>{bt(),We({chatId:C.chatId,messageId:C.id})})),Kt=(0,A.A)((()=>{const e=b?.messages?{messageId:C.id,childMessageIds:b.messages.map((e=>{let{id:t}=e;return t})),withShift:!1}:{messageId:C.id,withShift:!1};De(e),bt()})),Ut=(0,A.A)((()=>{Oe({chatId:C.chatId,id:C.id}),bt()})),_t=(0,A.A)((e=>{Fe({chatId:C.chatId,messageId:C.id,scheduledAt:e}),be()})),$t=(0,A.A)((()=>{ut(!1),vt(_t)})),jt=(0,A.A)((()=>{bt(),$e({chatId:C.chatId,messageId:C.id})})),zt=(0,A.A)((()=>{bt(),je({chatId:C.chatId,messageId:C.id})})),Ht=(0,A.A)((e=>{Ge({messageIds:e}),bt()})),Gt=(0,A.A)((()=>{at({chatId:C.chatId,messageId:C.id,shouldIncludeThread:t!==i.l3,shouldIncludeGrouped:!0}),bt()})),Jt=(0,A.A)((()=>{(0,d.eM)(C.content.contact.phoneNumber),bt()})),Vt=(0,A.A)((()=>{(b?.messages||[C]).forEach((e=>{const t=(0,r.edy)(e);t&&(Et?Ue({media:t}):Ke({media:t,originMessage:e}))})),bt()})),qt=(0,A.A)((()=>{const e=(0,r.zXI)(C);Je({gif:e}),bt()})),Wt=(0,A.A)((e=>{ve&&!W?tt({initialSection:"saved_tags"}):Ye({chatId:C.chatId,messageId:C.id,reaction:e,shouldAddToRecent:!0}),bt()})),Yt=(0,A.A)((()=>{it({chatId:C.chatId,messageId:C.id,count:1}),bt()})),Zt=(0,A.A)((()=>{st({chatId:C.chatId,messageId:C.id}),bt()})),Xt=(0,A.A)((e=>{et({chatId:C.chatId,messageId:C.id,position:e})})),Qt=(0,A.A)((()=>{Ze({chatId:C.chatId,id:C.id}),bt()})),en=(0,A.A)((()=>{Xe({chatId:C.chatId,id:C.id}),bt()})),tn=(0,A.A)((()=>{Qe({chatId:C.chatId,messageId:C.id}),bt()})),nn=(0,a.Kr)((()=>(b?b.messages:[C]).map((e=>{let{id:t}=e;return t}))),[b,C]),an=(0,A.A)((()=>{_&&(ut(!1),be(),rt({chatId:_.id,messageIds:nn}))}));if(P)return void bt();const on=new Date;return on.setFullYear(on.getFullYear()+1),a.Ay.createElement("div",{ref:lt,className:(0,l.A)("ContextMenuContainer",we)},a.Ay.createElement(J,{isReactionPickerOpen:fe,availableReactions:n,topReactions:c,defaultTagReactions:u,isWithPaidReaction:Ie,message:C,isPrivate:q,isCurrentUserPremium:W,canBuyPremium:Z,isOpen:dt,enabledReactions:H,reactionsLimit:G,anchor:M,targetHref:k,canShowReactionsCount:U,canShowReactionList:j,canSendNow:T,canReschedule:L,canReply:B,canQuote:yt,canDelete:K,canPin:D,canReport:$,repliesThreadInfo:O,canUnpin:F,canEdit:z,canForward:Y,canFaveSticker:X,canUnfaveSticker:Q,canCopy:ee,canCopyLink:te,canSelect:ne,canDownload:ae,canSaveGif:oe,canRevote:ie,canClosePoll:se,canShowSeenBy:me,canTranslate:pe,canShowOriginal:Ae,canSelectLanguage:ye,canPlayAnimatedEmojis:re,shouldRenderShowWhen:le,canLoadReadDate:ce,hasCustomEmoji:It,customEmojiSets:w,isDownloading:Et,seenByRecentPeers:St,isInSavedMessages:ve,noReplies:ue,poll:R,story:N,onOpenThread:kt,onReply:Mt,onEdit:Pt,onPin:Tt,onUnpin:xt,onForward:Lt,onDelete:Rt,onReport:an,onFaveSticker:Bt,onUnfaveSticker:Dt,onSelect:Kt,onSend:Ut,onReschedule:$t,onClose:bt,onCopyLink:Gt,onCopyMessages:Ht,onCopyNumber:Jt,onDownload:Vt,onSaveGif:qt,onCancelVote:Ot,onClosePoll:gt,onShowSeenBy:jt,onToggleReaction:Wt,onSendPaidReaction:Yt,onShowPaidReactionModal:Zt,onShowReactors:zt,onReactionPickerOpen:Xt,onTranslate:Qt,onShowOriginal:en,onSelectLanguage:tn,userFullName:Se,canGift:Ee}),a.Ay.createElement(S,{isOpen:mt,messageId:C.id,chatId:C.chatId,onClose:Nt}),a.Ay.createElement(E.A,{isOpen:pt,onClose:At,text:ct("lng_polls_stop_warning"),confirmLabel:ct("lng_polls_stop_sure"),confirmHandler:Ft}),L&&Ct)})))},79519:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(84051),o=n(61433),i=n(31481),s=n(66644),r=n(81954);const c=500,l=i.nxZ,d=20;function u(e){let{elementRef:t,chatId:n,isFocused:i,focusDirection:u,noFocusHighlight:m,isResizingContainer:h,isJustAdded:p,isQuote:g,scrollTargetPosition:A}=e;const y=(0,a.li)(!p);(0,a.Nf)((()=>{const e=y.current;if(y.current=!1,i&&t.current){const n=t.current.closest(".MessageList"),a=m,i=A||a?"end":"centerOrTop",p=()=>{const e=void 0!==u?a?c:l:void 0,m=(0,r.Ay)({container:n,element:t.current,position:i,margin:d,maxDistance:e,forceDirection:u,forceNormalContainerHeight:h,shouldReturnMutationFn:!0});if(g){const e=t.current.querySelector(".is-quote");e&&(0,s.RK)((()=>{(0,o.YM)(e,"animate")}))}return m};e?(0,s.gm)(p):(0,s.YS)((()=>{(0,s.RK)(p())}))}}),[t,n,i,u,m,h,g,A])}},76283:(e,t,n)=>{n.d(t,{A:()=>M});var a=n(84051),o=n(13439),i=n(90709),s=n(87357),r=n(17712),c=n(59030),l=n(18276),d=n(64493),u=n(96530),m=n(58784),h=n(76023),p=n(10722),g=n(4438),A=n(87412);const y="uGUjDZKl",f="M62HGuIV",v="WMpEr5XQ",C=2*h.$,I=(0,a.ph)((e=>{let{reaction:t,chosen:n,isReady:o,noAppearAnimation:i,style:c,isLocked:d,onToggleReaction:u,onSendPaidReaction:h,onShowPaidReactionModal:I}=e;const S=(0,a.li)(null),E=(0,r.A)((()=>{"paid"!==t.type?u(t):h?.()})),{isContextMenuOpen:w,handleBeforeContextMenu:b,handleContextMenu:R,handleContextMenuClose:N,handleContextMenuHide:M}=(0,p.A)(S,"paid"!==t.type,void 0,void 0,void 0,!0);return(0,a.vJ)((()=>{w&&(I?.(),N(),M())}),[N,I,M,w]),a.Ay.createElement("div",{className:(0,s.A)(y,"oc1hpMwv",n&&"paid"!==t.type&&f,!i&&o&&"sx6RTuAU",i&&"kqcWe4tf"),ref:S,style:c,onClick:E,onMouseDown:b,onContextMenu:R},"paid"===t.type?a.Ay.createElement(g.A,{tgsUrl:m.w.StarReaction,size:C,noLoop:!1}):a.Ay.createElement(A.A,{documentId:t.documentId,size:C}),d&&a.Ay.createElement(l.A,{className:v,name:"lock-badge"}))}));var S=n(37661),E=n(62587),w=n(18104);const b=2*h.$,R=(0,a.ph)((e=>{let{reaction:t,isReady:n,noAppearAnimation:o,chosen:i,isLocked:r,onToggleReaction:c}=e;const d=(0,E.A)(`sticker${t.appearAnimation?.id}`,!n||o),u=(0,E.A)(`document${t.selectAnimation?.id}`,!n||o),m=(0,E.A)(`document${t.staticIcon?.id}`,!o),[h,p]=(0,S.A)(),[g,,A]=(0,S.A)(!0),[C,I,R]=(0,S.A)();return a.Ay.createElement("div",{className:(0,s.A)(y,i&&f),onClick:function(){c(t.reaction)},onMouseEnter:n&&!g?I:void 0},o&&a.Ay.createElement("img",{className:"MZ2tH980",src:m,alt:t.reaction.emoticon,draggable:!1}),!h&&!o&&a.Ay.createElement(w.A,{key:t.appearAnimation?.id,tgsUrl:d,play:g,noLoop:!0,size:b,onEnded:A,forceAlways:!0}),!g&&!o&&a.Ay.createElement(w.A,{key:t.selectAnimation?.id,tgsUrl:u,play:C,noLoop:!0,size:b,onLoad:p,onEnded:R,forceAlways:!0}),r&&a.Ay.createElement(l.A,{className:v,name:"lock-badge"}))})),N=(0,s.x)("ReactionSelector"),M=(0,a.ph)((e=>{let{allAvailableReactions:t,topReactions:n,defaultTagReactions:m,enabledReactions:h,currentReactions:p,reactionsLimit:g,isPrivate:A,isReady:y,canPlayAnimatedEmojis:f,className:v,isCurrentUserPremium:C,isInSavedMessages:S,isInStoryViewer:E,isForEffects:w,effectReactions:b,isWithPaidReaction:M,onClose:k,onToggleReaction:P,onSendPaidReaction:T,onShowPaidReactionModal:x,onShowMore:L}=e;const{openPremiumModal:B}=(0,o.ko)(),D=(0,a.li)(null),O=(0,c.A)(),F=S&&!C&&!E,K=Boolean(g&&p&&p.length>=g),U=(0,a.Kr)((()=>{const e=K?p?.map((e=>e.reaction)):w?b:S?m:"some"===h?.type?h.allowed:t?.map((e=>e.reaction)),a=e?.map((e=>{const n="custom"===e.type,a=t?.find((t=>(0,i.a0K)(t.reaction,e)));return w?a:(n||a)&&!a?.isInactive&&(A||K||h&&(0,i.A3H)(e,h))?n?e:a:void 0})).filter(Boolean)||[],o=(0,i.fuR)(a,n);return M&&o.unshift({type:"paid"}),o}),[t,p,m,h,S,A,n,w,b,K,M]),_=(0,a.Kr)((()=>8===U.length?U:U.slice(0,7)),[U]),$=_.length<U.length,j=(0,a.Kr)((()=>{const e=p?.filter((e=>{let{chosenOrder:t}=e;return void 0!==t}))||[];return new Set(e.map((e=>{let{reaction:t}=e;return _.findIndex((e=>e&&(0,i.a0K)("reaction"in e?e.reaction:e,t)))})))}),[p,_]),z=(0,r.A)((()=>{const e=D.current?.getBoundingClientRect()||{x:0,y:0};L({x:e.x,y:e.y})})),H=(0,r.A)((()=>{k?.(),B({initialSection:"saved_tags"})})),G=(0,a.Kr)((()=>{if(S){if(!C){const e=O("lng_subscribe_tag_about").split("{link}");return a.Ay.createElement("span",null,e[0],a.Ay.createElement(u.A,{isPrimary:!0,onClick:H},O("lng_subscribe_tag_link")),e[1])}return O("SavedTagReactionsHint2")}return E?O("StoryReactionsHint"):w?O("AddEffectMessageHint"):void 0}),[C,S,E,O,w]);if(_.length)return a.Ay.createElement("div",{className:(0,s.A)(N("&"),v),ref:D},a.Ay.createElement("div",{className:N("bubble-small",O.isRtl&&"isRtl")}),a.Ay.createElement("div",{className:N("items-wrapper")},a.Ay.createElement("div",{className:N("bubble-big",O.isRtl&&"isRtl")}),a.Ay.createElement("div",{className:N("items")},G&&a.Ay.createElement("div",{className:N("hint")},G),a.Ay.createElement("div",{className:N("reactions"),dir:O.isRtl?"rtl":void 0},_.map(((e,t)=>"reaction"in e?a.Ay.createElement(R,{key:(0,i.Jjj)(e.reaction),isReady:y,onToggleReaction:P,reaction:e,noAppearAnimation:!f,chosen:j.has(t),isLocked:F}):a.Ay.createElement(I,{key:(0,i.Jjj)(e),isReady:y,onToggleReaction:P,onSendPaidReaction:T,onShowPaidReactionModal:x,reaction:e,noAppearAnimation:!f,chosen:j.has(t),isLocked:F,style:`--_animation-delay: ${20*(7-t)}ms`}))),$&&a.Ay.createElement(d.A,{color:"translucent",className:N("show-more"),onClick:z},a.Ay.createElement(l.A,{name:"down"}))))))}))},43581:(e,t,n)=>{n.d(t,{A:()=>_});var a=n(84051),o=n(13439),i=n(90709),s=n(29807),r=n(87357),c=n(60343),l=n(15283),d=n(17712),u=n(59030),m=n(14242),h=n(76023),p=n(63527),g=n(10722),A=n(82117),y=n(29886),f=n(21511),v=n(68292),C=n(26875),I=n(82393),S=n(58784),E=n(5912),w=n(4438),b=n(9267),R=n(93879);const N=1.5*h.$,M=6.5*h.$,k=I.pz||I.Ni?2:5,P=I.pz||I.Ni?2:3,T=(0,a.ph)((0,o.EK)(((e,t)=>{let{containerId:n}=t;const{activeReactions:a}=(0,s.nTw)(e),o=(0,s.xYJ)(e,"reactionEffects");return{activeReactions:a?.[n],withEffects:o}}))((e=>{let{containerId:t,reaction:n,className:s,size:c=N,effectSize:l=M,activeReactions:u,localAmount:m,withEffects:h,observeIntersection:p}=e;const{stopActiveReaction:g}=(0,o.ko)(),y=(0,a.li)(null),v=(0,a.li)(null),[C,I]=(0,a.J0)([]),T=(0,E.Vz)(y,p),x=(0,a.Kr)((()=>u?.find((e=>(0,i.a0K)(e,n)))),[u,n]),L=Boolean(h&&x),B=C.length<k;(0,A.A)((e=>{let[t]=e;L?!m||m<=(t||0)||B&&I((e=>[...e,Date.now()])):I([])}),[m,B,L]);const{shouldRender:D}=(0,f.A)({ref:v,noMountTransition:!0,isOpen:L,className:"slow",withShouldRender:!0}),O=(0,d.A)((()=>{const e=C.slice(1);I(e),e.length||g({containerId:t,reaction:n})})),F=(0,r.A)(R.A.root,D&&R.A.animating,s);return a.Ay.createElement("div",{className:F,ref:y,teactFastList:!0},a.Ay.createElement(b.A,{key:"icon",type:"gold",size:"adaptive",style:`width: ${c}px; height: ${c}px`}),D&&C.map((e=>a.Ay.createElement(w.A,{key:e,ref:v,className:R.A.effect,size:l,tgsUrl:S.w.StarReactionEffect,play:T,noLoop:!0,forceAlways:!0,nonInteractive:!0,quality:P,onEnded:O}))))})));var x=n(11241),L=n(85118),B=n(64493),D=n(69988);const O=1.25*h.$;function F(e){return e.stars}const K=(0,a.ph)((e=>{let{reaction:t,containerId:n,isOwnMessage:s,recentReactors:c,className:l,chosenClassName:u,chatId:h,messageId:I,isOutside:S,observeIntersection:E,onClick:w,onPaidClick:b}=e;const{openStarsBalanceModal:R,resetLocalPaidReactions:N,openPaidReactionModal:M,requestWave:k}=(0,o.ko)(),P=(0,a.li)(null),K=(0,a.li)(null),U=(0,a.li)(),_="paid"===t.reaction.type,$=(0,p.A)(F),j=Boolean($),z=(0,d.A)((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;b?.(e)})),H=(0,d.A)((e=>{if("paid"===t.reaction.type)return e.stopPropagation(),void z();w?.(t.reaction)})),{isContextMenuOpen:G,handleBeforeContextMenu:J,handleContextMenu:V,handleContextMenuClose:q,handleContextMenuHide:W}=(0,g.A)(P,"paid"!==t.reaction.type,void 0,void 0,void 0,!0);(0,a.vJ)((()=>{G&&(M({chatId:h,messageId:I}),q(),W())}),[q,W,G,h,I]),(0,A.A)((e=>{let[n]=e;const a=t.localAmount,o=P.current;if(!a||!o||a===n?.localAmount)return;if(j&&a>$.balance.amount)return R({originReaction:{chatId:h,messageId:I,amount:a}}),void N({chatId:h,messageId:I});if(t.localAmount){const{left:e,top:t}=o.getBoundingClientRect(),n=e+o.offsetWidth/2,a=t+o.offsetHeight/2;k({startX:n,startY:a})}const i=Number(getComputedStyle(o).scale)||1;U.current?.cancel(),U.current=o.animate([{scale:i},{scale:Math.min(1.2*i,3),offset:.2},{scale:1}],{duration:500*i,easing:"ease-out"})}),[t,$?.balance,j,h,I]);const Y=(0,y.A)(t.localAmount),{shouldRender:Z}=(0,f.A)({isOpen:Boolean(t.localAmount),ref:K,className:"slow",withShouldRender:!0});return a.Ay.createElement(B.A,{className:(0,r.A)(D.A.root,s&&D.A.own,_&&D.A.paid,S&&D.A.outside,(0,i.eu8)(t)&&D.A.chosen,(0,i.eu8)(t)&&u,l),size:"tiny",ref:P,onMouseDown:J,onContextMenu:V,onClick:H},"paid"===t.reaction.type?a.Ay.createElement(a.Ay.Fragment,null,a.Ay.createElement(L.A,{preset:"button"}),a.Ay.createElement(T,{className:D.A.animatedEmoji,containerId:n,reaction:t.reaction,size:O,localAmount:t.localAmount,observeIntersection:E}),Z&&a.Ay.createElement(v.A,{ref:K,text:`+${(0,m.Vw)(t.localAmount||Y)}`,className:D.A.paidCounter})):a.Ay.createElement(x.A,{className:D.A.animatedEmoji,containerId:n,reaction:t.reaction,size:O,observeIntersection:E}),c?.length?a.Ay.createElement(C.A,{size:"mini",peers:c}):a.Ay.createElement(v.A,{text:(0,m.Vw)(t.count+(t.localAmount||0)),className:D.A.counter}))}));var U=n(92915);const _=(0,a.ph)((e=>{let{message:t,threadId:n,isOutside:m,maxWidth:h,metaChildren:p,observeIntersection:g,noRecentReactors:A,isCurrentUserPremium:y,tags:f}=e;const{toggleReaction:v,addLocalPaidReaction:C,updateMiddleSearch:I,performMiddleSearch:S,openPremiumModal:E,resetLocalPaidReactions:w,showNotification:b}=(0,o.ko)(),R=(0,u.A)(),{results:N,areTags:M,recentReactions:k}=t.reactions,P=Boolean(t.areReactionsPossible&&t.reactions),T=(0,a.Kr)((()=>N.reduce(((e,t)=>e+t.count),0)),[N]),x=(0,a.Kr)((()=>{const e=(0,o.mS)();return k?.reduce(((t,n)=>{const{reaction:a,peerId:o}=n,r=(0,i.Jjj)(a),c=(0,s.PVB)(e,o);if(!c)return t;const l=t[r]||[];return l.push(c),t[r]=l,t}),{})}),[k]),L=(0,a.Kr)((()=>{const e=(0,c.bj)(t);return N.map((t=>{const n=(0,i.Jjj)(t.reaction),a=x?.[n],o=T>3||A,s=M?f?.[n]:void 0;return{reaction:t,reactionKey:n,messageKey:e,recentReactors:o?void 0:a,isChosen:(0,i.eu8)(t),tag:s}}))}),[t,A,x,N,M,f,T]),B=(0,d.A)((e=>{if(M)return y?(I({chatId:t.chatId,threadId:n,update:{savedTag:e}}),void S({chatId:t.chatId,threadId:n})):void E({initialSection:"saved_tags"});v({chatId:t.chatId,messageId:t.id,reaction:e})})),D=(0,a.Kr)((()=>N.find((e=>"paid"===e.reaction.type))?.localAmount||0),[N]),O=(0,d.A)((e=>{C({chatId:t.chatId,messageId:t.id,count:e})}));(0,a.vJ)((()=>{D&&b({localId:(0,c.bj)(t),title:R("StarsSentTitle"),message:R("StarsSentText",D),actionText:R("StarsSentUndo"),cacheBreaker:D.toString(),action:{action:"resetLocalPaidReactions",payload:{chatId:t.chatId,messageId:t.id}},dismissAction:{action:"sendPaidReaction",payload:{chatId:t.chatId,messageId:t.id}},duration:5e3,shouldShowTimer:!0,disableClickDismiss:!0,icon:"star"})}),[R,t,D]);const F=(0,d.A)((e=>{v({chatId:t.chatId,messageId:t.id,reaction:e})}));return(0,l.A)((()=>()=>{w({chatId:t.chatId,messageId:t.id})})),a.Ay.createElement("div",{className:(0,r.A)("Reactions",m&&"is-outside",P&&"is-service"),style:h?`max-width: ${h}px`:void 0,dir:R.isRtl?"rtl":"ltr"},L.map((e=>{let{reaction:n,recentReactors:o,messageKey:i,reactionKey:s,isChosen:r,tag:c}=e;return M?a.Ay.createElement(U.A,{key:s,className:"message-reaction",chosenClassName:"chosen",containerId:i,isOwnMessage:t.isOutgoing,isChosen:r,reaction:n.reaction,tag:c,withContextMenu:y,onClick:B,onRemove:F,observeIntersection:g}):a.Ay.createElement(K,{key:s,chatId:t.chatId,messageId:t.id,className:"message-reaction",chosenClassName:"chosen",containerId:i,isOwnMessage:t.isOutgoing,recentReactors:o,isOutside:m,reaction:n,onClick:B,onPaidClick:O,observeIntersection:g})})),p)}))},92915:(e,t,n)=>{n.d(t,{A:()=>C});var a=n(84051),o=n(13439),i=n(87357),s=n(76023),r=n(10722),c=n(37661),l=n(17712),d=n(59030),u=n(11241),m=n(64493),h=n(40664),p=n(8410);const g=(0,a.ph)((e=>{let{isOpen:t,title:n,subtitle:o,placeholder:i,submitText:s,maxLength:r,initialValue:c="",onClose:u,onSubmit:g}=e;const A=(0,d.A)(),[y,f]=(0,a.J0)(c),v=(0,l.A)((e=>{f(e.target.value)})),C=(0,l.A)((()=>{g(y)}));return a.Ay.createElement(p.A,{className:"narrow",title:n,isOpen:t,onClose:u,isSlim:!0},Boolean(o)&&a.Ay.createElement("div",{className:"cGrbcqD_"},o),a.Ay.createElement(h.A,{placeholder:i,value:y,onChange:v,maxLength:r,teactExperimentControlled:!0}),a.Ay.createElement("div",{className:"dialog-buttons mt-2"},a.Ay.createElement(m.A,{className:"confirm-dialog-button",onClick:C},s||A("Save")),a.Ay.createElement(m.A,{className:"confirm-dialog-button",isText:!0,onClick:u},A("Cancel"))))}));var A=n(71429),y=n(24433),f=n(69988);const v=1.25*s.$,C=(0,a.ph)((e=>{let{reaction:t,tag:n,containerId:s,isChosen:h,isOwnMessage:p,className:C,chosenClassName:I,withCount:S,isDisabled:E,withContextMenu:w,observeIntersection:b,onClick:R,onRemove:N}=e;const{editSavedReactionTag:M}=(0,o.ko)(),k=(0,a.li)(null),P=(0,a.li)(null),T=(0,d.A)(),[x,L,B]=(0,c.A)(),{title:D,count:O}=n||{},F=Boolean(D||S&&O),K=(0,l.A)((()=>{R?.(t)})),U=(0,l.A)((()=>{N?.(t)})),_=(0,l.A)((e=>{M({reaction:t,title:e}),B()})),{isContextMenuOpen:$,contextMenuAnchor:j,handleBeforeContextMenu:z,handleContextMenu:H,handleContextMenuClose:G,handleContextMenuHide:J}=(0,r.A)(k,!w,void 0,void 0,void 0,!0),V=(0,l.A)((()=>k.current)),q=(0,l.A)((()=>document.body)),W=(0,l.A)((()=>P.current)),Y=(0,l.A)((()=>({withPortal:!0,shouldAvoidNegativePosition:!0})));if(!S||0!==O)return a.Ay.createElement(m.A,{className:(0,i.A)(f.A.root,f.A.tag,p&&f.A.own,h&&f.A.chosen,h&&I,E&&f.A.disabled,C),size:"tiny",onClick:K,onMouseDown:z,onContextMenu:H,ref:k},a.Ay.createElement(u.A,{className:f.A.animatedEmoji,containerId:s,reaction:t,loopLimit:1,size:v,observeIntersection:b}),F&&a.Ay.createElement("span",{className:f.A.tagText},D&&a.Ay.createElement("span",null,D),S&&a.Ay.createElement("span",null,O)),a.Ay.createElement("svg",{className:f.A.tail,width:"15",height:"30",viewBox:"0 0 15 30"},a.Ay.createElement("path",{className:f.A.tailFill,d:"m 0,30 c 3.1855,0 6.1803,-1.5176 8.0641,-4.0864 l 5.835,-7.9568 c 1.2906,-1.7599 1.2906,-4.1537 0,-5.9136 L 8.0641,4.08636 C 6.1803,1.51761 3.1855,0 0,0"})),w&&a.Ay.createElement(g,{isOpen:x,maxLength:15,title:T(n?.title?"SavedTagRenameTag":"SavedTagLabelTag"),subtitle:T("SavedTagLabelTagText"),placeholder:T("SavedTagLabelPlaceholder"),initialValue:n?.title,onClose:B,onSubmit:_}),w&&j&&a.Ay.createElement(A.A,{ref:P,isOpen:$,anchor:j,getTriggerElement:V,getRootElement:q,getMenuElement:W,getLayout:Y,autoClose:!0,withPortal:!0,onClose:G,onCloseAnimationEnd:J},a.Ay.createElement(y.A,{icon:"tag-filter",onClick:K},T("SavedTagFilterByTag")),a.Ay.createElement(y.A,{icon:"tag-name",onClick:L},T(n?.title?"SavedTagRenameTag":"SavedTagLabelTag")),a.Ay.createElement(y.A,{icon:"tag-crossed",destructive:!0,onClick:U},T("SavedTagRemoveTag"))))}))},86046:(e,t,n)=>{n.d(t,{D5:()=>u,HT:()=>s,M6:()=>d,Pc:()=>r,ZF:()=>l,hk:()=>c,j6:()=>m,jA:()=>i});var a=n(5930),o=n(29807);function i(e,t){if("slug"===t.type)return t;if("stargift"===t.type){const{peerId:n,shouldHideName:a,giftId:i,message:s,shouldUpgrade:r}=t,c=(0,o.PVB)(e,n);if(!c)return;return{type:"stargift",peer:c,shouldHideName:a,giftId:i,message:s,shouldUpgrade:r}}if("starsgift"===t.type){const{userId:n,stars:a,amount:i,currency:s}=t,r=(0,o.mBe)(e,n);if(!r)return;return{type:"stars",purpose:{type:"starsgift",user:r,stars:a,amount:i,currency:s}}}if("stars"===t.type){const{stars:e,amount:n,currency:a}=t;return{type:"stars",purpose:{type:"stars",stars:e,amount:n,currency:a}}}if("chatInviteSubscription"===t.type){const{hash:e}=t;return{type:"chatInviteSubscription",hash:e}}if("message"===t.type){const n=(0,o.hds)(e,t.chatId);if(!n)return;return{type:"message",chat:n,messageId:t.messageId}}if("giftcode"===t.type){const{userIds:n,boostChannelId:a,amount:i,currency:s,option:r,message:c}=t;return{type:"giveaway",option:r,purpose:{type:"giftcode",amount:i,currency:s,users:n.map((t=>(0,o.mBe)(e,t))).filter(Boolean),boostChannel:a?(0,o.hds)(e,a):void 0,message:c}}}if("starsgiveaway"===t.type){const{chatId:n,additionalChannelIds:a,amount:i,currency:s,untilDate:r,areWinnersVisible:c,countries:l,isOnlyForNewSubscribers:d,prizeDescription:u,stars:m,users:h}=t,p=(0,o.hds)(e,n);if(!p)return;const g=a?.map((t=>(0,o.hds)(e,t))).filter(Boolean);return{type:"starsgiveaway",purpose:{type:"starsgiveaway",amount:i,currency:s,chat:p,additionalChannels:g,untilDate:r,areWinnersVisible:c,countries:l,isOnlyForNewSubscribers:d,prizeDescription:u,stars:m,users:h}}}if("giveaway"===t.type){const{chatId:n,additionalChannelIds:a,amount:i,currency:s,option:r,untilDate:c,areWinnersVisible:l,countries:d,isOnlyForNewSubscribers:u,prizeDescription:m}=t,h=(0,o.hds)(e,n);if(!h)return;const p=a?.map((t=>(0,o.hds)(e,t))).filter(Boolean);return{type:"giveaway",option:r,purpose:{type:"giveaway",amount:i,currency:s,chat:h,additionalChannels:p,untilDate:c,areWinnersVisible:l,countries:d,isOnlyForNewSubscribers:u,prizeDescription:m}}}if("stargiftUpgrade"===t.type){const{inputSavedGift:n,shouldKeepOriginalDetails:a}=t,o=s(e,n);if(!o)return;return{type:"stargiftUpgrade",inputSavedGift:o,shouldKeepOriginalDetails:a}}if("stargiftTransfer"===t.type){const{inputSavedGift:n,recipientId:a}=t,i=s(e,n),r=(0,o.PVB)(e,a);if(!i||!r)return;return{type:"stargiftTransfer",inputSavedGift:i,recipient:r}}}function s(e,t){if("user"===t.type)return t;if("chat"===t.type){const n=(0,o.hds)(e,t.chatId);if(!n)return;return{type:"chat",chat:n,savedId:t.savedId}}}function r(e){return"appStore"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.AppleTopUp.Title",subtitleKey:"Stars.Intro.Transaction.AppleTopUp.Subtitle",peerColorId:5}:"playMarket"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.GoogleTopUp.Title",subtitleKey:"Stars.Intro.Transaction.GoogleTopUp.Subtitle",peerColorId:3}:"fragment"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.FragmentTopUp.Title",subtitleKey:"Stars.Intro.Transaction.FragmentTopUp.Subtitle",customPeerAvatarColor:"#000000"}:"premiumBot"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.PremiumBotTopUp.Title",subtitleKey:"Stars.Intro.Transaction.PremiumBotTopUp.Subtitle",peerColorId:1,withPremiumGradient:!0}:"ads"===e.type?{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.TelegramAds.Title",subtitleKey:"Stars.Intro.Transaction.TelegramAds.Subtitle",peerColorId:2}:"api"===e.type?{avatarIcon:"bots",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.TelegramBotApi.Title",subtitleKey:"Stars.Intro.Transaction.TelegramBotApi.Subtitle",peerColorId:4}:{avatarIcon:"star",isCustomPeer:!0,titleKey:"Stars.Intro.Transaction.Unsupported.Title",subtitleKey:"Stars.Intro.Transaction.Unsupported.Title",peerColorId:0}}function c(e,t){const n=t.amount+t.nanos/1e9;return n<0?`- ${e.number(Math.abs(n))}`:`+ ${e.number(n)}`}function l(e,t){return e.number(t.amount+t.nanos/1e9)}function d(e){const{action:t}=e.content;if("giftStars"!==t?.type)return;const{transactionId:n,stars:a}=t;return{id:n,stars:{amount:a,nanos:0},peer:{type:"peer",id:e.isOutgoing?e.chatId:e.senderId||e.chatId},date:e.date,isGift:!0,isMyGift:e.isOutgoing||void 0}}function u(e){const{action:t}=e.content;if("prizeStars"!==t?.type)return;const{transactionId:n,stars:a,boostPeerId:o}=t;return{id:n,stars:{amount:a,nanos:0},peer:{type:"peer",id:o},date:e.date,giveawayPostId:e.id}}function m(e,t){return(0,a.A)(e,t)}},70636:(e,t,n)=>{n.d(t,{PU:()=>m,cy:()=>h,mO:()=>u,vj:()=>d});var a=n(31481),o=n(43044),i=n(529),s=n(29807),r=n(13439),c=n(62214),l=n(86525);function d(e){return"title"in e}function u(e){return!d(e)}function m(e){let{ids:t,query:n,type:a="peer"}=e;if(!n)return t;const u=(0,r.mS)(),m=(0,o.Yw)(),h=(0,i.l)(n),p="chat"===a?s.hds:"user"===a?s.mBe:s.PVB;return t.filter((e=>{const t=p(u,e);if(!t)return!1;const n=d(t)?(0,c.Js)(m,t):e===u.currentUserId?m("SavedMessages"):void 0,a=n?h(n):void 0,o=(0,l.em)(m,t);return a||o&&h(o)||Boolean(t.usernames?.find((e=>{let{username:t}=e;return h(t)})))}))}function h(e){return d(e)?"chatTypeBasicGroup"===e.type||"chatTypeSuperGroup"===e.type?"ChatList.PeerTypeGroup":"chatTypeChannel"===e.type?"ChatList.PeerTypeChannel":"chatTypePrivate"===e.type?"ChatList.PeerTypeNonContact":void 0:e.id===a.zv8?"ServiceNotifications":e.isSupport?"SupportStatus":e.type&&"userTypeBot"===e.type?"ChatList.PeerTypeBot":e.isContact?"ChatList.PeerTypeContact":"ChatList.PeerTypeNonContactUser"}},14737:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(84051),o=n(17712);const i=function(e,t){const n=(0,o.A)(e);(0,a.vJ)((()=>{if("number"!=typeof t)return;const e=setTimeout((()=>n()),t);return()=>clearTimeout(e)}),[t])}},45470:(e,t,n)=>{n.d(t,{A:()=>d});var a=n(84051),o=n(32610),i=n(66644),s=n(82393),r=n(35297);const c=2,l=2;function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c,u=arguments.length>4?arguments[4]:void 0,m=arguments.length>5?arguments[5]:void 0;const h=(0,a.li)(null),p=(0,a.li)();return(0,r.A)((()=>{t||(p.current=!1)}),[e,t]),(0,a.vJ)((()=>{const a=h.current;if(!e||!a||t||p.current)return;p.current=!0;const r=new Image,c=()=>{const e=u||r.width,t=m||r.height,n=a.getContext("2d",{alpha:!1});(0,i.RK)((()=>{a.width=e,a.height=t,s.QH&&(n.filter=`blur(${d}px)`),n.drawImage(r,2*-d,2*-d,e+4*d,t+4*d),s.QH||(0,o.A)(n,0,0,e,t,d,l)}))};r.onload=()=>{n?(0,i.YS)(c):c()},r.src=e}),[e,t,m,u,d,n]),h}},65632:(e,t,n)=>{n.d(t,{A:()=>c});var a=n(84051),o=n(13439),i=n(31481),s=n(74824),r=n(87679);const c=(e,t)=>{const{setThemeSettings:n}=(0,o.ko)(),[c,l]=(0,a.J0)(t);return(0,a.vJ)((()=>{t&&(t.startsWith("#")?l(t):s.fetch(i.nfi,e,s.Type.Blob).then((e=>{const t=URL.createObjectURL(e);(0,r.NN)(t).then((()=>{l(`url(${t})`)}))})).catch((()=>{n({theme:e,background:void 0,backgroundColor:void 0,isBlurred:!0,patternColor:"dark"===e?i.MkD:i.be8})})))}),[t,e]),t?c:void 0}},49746:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(84051),o=n(13439);function i(e,t,n,i,s){const{loadMessage:r}=(0,o.ko)();(0,a.vJ)((()=>{s||t&&!n&&r({chatId:e,messageId:t,replyOriginForId:i})}),[s,e,n,t,i])}},74984:(e,t,n)=>{n.d(t,{Rh:()=>s,g5:()=>c,ic:()=>r});var a=n(84051),o=n(49763),i=n(30857);function s(e){const t=(0,i.A)();return(0,a.vJ)((()=>(0,o.Yw)(e,t)),[e,t]),(0,o.YA)(e)}function r(){const e=(0,i.A)();return(0,a.vJ)((()=>(0,o.P1)(e)),[e]),(0,o.PZ)()}function c(){const e=(0,i.A)();return(0,a.vJ)((()=>(0,o.BU)(e)),[e]),(0,o.jn)()}},36838:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(84051);const o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,a.vJ)((()=>{if(t)return;const a=e.current;function o(e){e.deltaX||(a.scrollLeft+=e.deltaY/4,n&&e.preventDefault())}return a.addEventListener("wheel",o,{passive:!n}),()=>{a.removeEventListener("wheel",o)}}),[e,t,n])}},29886:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(84051);function o(e){const t=(0,a.li)(),n=(0,a.li)();return n.current!==e&&(t.current=n.current),n.current=e,t.current}},14622:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(84051),o=n(13439),i=n(81954),s=n(17712),r=n(93545),c=n(672);const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{focusLastMessage:n}=(0,o.ko)(),l=(0,a.li)(0),d=(0,s.A)((e=>{const t=l.current,o=e.contentRect.height;if(l.current=o,(0,i.o8)()||!t||o<=t)return;const s=e.target.closest(".MessageList");if(!s)return;(0,a.VK)(400);const r=o-t,{offsetHeight:c,scrollHeight:d,scrollTop:u}=s;Math.round(d-u-c)-r<=5&&n()})),u=(0,c.A)(d,[d],300,!1);(0,r.A)(e,u,!t)}},56133:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(16581);function o(e,t,n){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return(0,a.A)((e=>{e()}),o,e,t,n)}},24531:(e,t,n)=>{n.d(t,{A:()=>m});var a=n(84051),o=n(31481),i=n(17663),s=n(80140),r=n(17712),c=n(59030),l=n(80089),d=n(80464);const u=e=>{const{isOpen:t}=e,n=(0,d.A)(l.ar.Extra,"CalendarModal",!t);return n?a.Ay.createElement(n,e):void 0},m=(e,t,n)=>{const l=(0,c.A)(),[d,m]=(0,a.J0)(),h=(0,r.A)((function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Math.round(Math.max(e.getTime(),Date.now()+6e4)/1e3)+(t?0:(0,s.SF)());d?.(n),m(void 0)})),p=(0,r.A)((()=>{h(new Date(1e3*o.NkL),!0)})),g=(0,r.A)((()=>{m(void 0),t?.()})),A=(0,r.A)((e=>{m((()=>e))})),y=n?new Date(1e3*n):new Date;y.setSeconds(0),y.setMilliseconds(0);const f=new Date;return f.setFullYear(f.getFullYear()+1),[A,a.Ay.createElement(u,{isOpen:Boolean(d),withTimePicker:!0,selectedAt:y.getTime(),maxAt:(0,i.CS)(f),isFutureMode:!0,secondButtonLabel:e?l("Schedule.SendWhenOnline"):void 0,onClose:g,onSubmit:h,onSecondButtonClick:e?p:void 0})]}},57446:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(13439),o=n(66644),i=n(29807),s=n(19822);const r=300,c=new Map;function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r;(0,i.PKK)((0,a.mS)())||(n=0);const l="rtl"===e.getAttribute("dir"),{scrollLeft:d,offsetWidth:u,scrollWidth:m,dataset:{scrollId:h}}=e;let p=t-d;if(p<0){const e=-d*(l?-1:1);p=Math.max(p,e)}else if(p>0){const e=m-(d+u);p=Math.min(p,e)}if(0===p)return Promise.resolve();h&&c.has(h)&&c.get(h)();const g=d+p;return new Promise((t=>{(0,o.RK)((()=>{if(0===n)return e.scrollLeft=g,void t();let a=!1;const i=Math.random().toString();e.dataset.scrollId=i,c.set(i,(()=>{a=!0})),e.style.scrollSnapType="none";const r=Date.now();function l(){e.style.scrollSnapType="",delete e.dataset.scrollId,c.delete(i)}(0,s.i0)((()=>{if(a)return l(),!1;const o=Math.min((Date.now()-r)/n,1),i=p*(1-function(e){return 1-(1-e)**3.5}(o));return e.scrollLeft=Math.round(g-i),o>=1&&(l(),t()),o<1}),o.RK)}))}))}},81954:(e,t,n)=>{n.d(t,{Ay:()=>g,H$:()=>v,_v:()=>A,o8:()=>f});var a=n(84051),o=n(13439),i=n(89925),s=n(31481),r=n(66644),c=n(29807),l=n(16460),d=n(19822),u=n(82393);let m,h,p=!1;function g(e){m=e;const t=y(e);if(e.shouldReturnMutationFn)return t;(0,r.RK)(t)}function A(){p&&((0,d.vk)(),(0,r.YS)((()=>{(0,r.RK)(y(m))})))}function y(e){const{container:t,element:n,position:g,margin:A=0,maxDistance:y=s.nxZ,forceDirection:f,forceNormalContainerHeight:v}=e;let S=e.forceDuration;f!==i.CC.Static&&(0,c.PKK)((0,o.mS)())||(S=0);const{offsetHeight:E}=n,{scrollTop:w,offsetHeight:b,scrollHeight:R}=t,N=(0,l.A)(n,t).top,M=v&&t.dataset.normalHeight?Number(t.dataset.normalHeight):b;let k;switch(g){case"start":k=N-A+(u.Ni?1:0);break;case"end":k=N+E+A-M;break;case"nearest":case"center":case"centerOrTop":k=E<M?N+E/2-M/2:N-A}const P=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.nxZ,a=arguments.length>3?arguments[3]:void 0;const{scrollTop:o}=e;if(void 0===a){const e=t-o;if(e<-n)return o+(e+n);if(e>n)return o+(e-n)}else{if(a===i.CC.Up)return t+n;if(a===i.CC.Down)return Math.max(0,t-n)}return o}(t,k,y,f);let T=k-P;if(T<0){const e=-P;T=Math.max(T,e)}else if(T>0){const e=R-(P+M);T=Math.min(T,e)}const x=Math.abs(T);return()=>{if(x<1)return void(w!==P&&(t.scrollTop=P));const e=P+T;if(0===S)return void(t.scrollTop=e);const n=x<=s.s8T?C:I,o=S||s.SKD+x/s.nxZ*(s.OzO-s.SKD),i=Date.now();p=!0;const c=h;h=(0,a.VK)(void 0,!0),c?.(),(0,d.S0)((()=>{const a=Math.min((Date.now()-i)/o,1),s=T*(1-n(a)),r=Math.round(e-s);return t.scrollTop=r,p=a<1&&r!==e,p||(m=void 0,h?.(),h=void 0),p}),r.RK)}}function f(){return p}function v(){h(),h=void 0}function C(e){return 1-(1-e)**3.5}function I(e){return 1-(1-e)**6}},48894:(e,t,n)=>{n.d(t,{Bz:()=>u,LS:()=>l,Yi:()=>d,Zf:()=>r,bM:()=>s,rX:()=>c,v2:()=>i,vG:()=>m,xp:()=>o});var a=n(87679);function o(e){return[parseInt(e.substring(0,2),16),parseInt(e.substring(2,4),16),parseInt(e.substring(4,6),16)]}function i(e){const t=e[0].toString(16),n=e[1].toString(16),a=e[2].toString(16);return(1==t.length?"0"+t:t)+(1==n.length?"0"+n:n)+(1==a.length?"0"+a:a)}function s(e){let[t,n,a]=e;t/=255,n/=255,a/=255;let o,i,s=Math.max(t,n,a),r=Math.min(t,n,a),c=s,l=s-r;if(i=0==s?0:l/s,s==r)o=0;else{switch(s){case t:o=(n-a)/l+(n<a?6:0);break;case n:o=(a-t)/l+2;break;case a:o=(t-n)/l+4}o/=6}return[o,i,c]}function r(e){let t,n,a,[o,i,s]=e,r=Math.floor(6*o),c=6*o-r,l=s*(1-i),d=s*(1-c*i),u=s*(1-(1-c)*i);switch(r%6){case 0:t=s,n=u,a=l;break;case 1:t=d,n=s,a=l;break;case 2:t=l,n=s,a=u;break;case 3:t=l,n=d,a=s;break;case 4:t=u,n=l,a=s;break;case 5:t=s,n=l,a=d}return[Math.round(255*t),Math.round(255*n),Math.round(255*a)]}async function c(e){const t=[0,0,0];let n,o,i,s,r=-4,c=[0,0,0],l=0;const d=document.createElement("canvas"),u=d.getContext&&d.getContext("2d");if(!u)return t;const m=await(0,a.NN)(e);i=m.naturalHeight||m.offsetHeight||m.height,o=m.naturalWidth||m.offsetWidth||m.width,d.height=i,d.width=o,u.drawImage(m,0,0);try{n=u.getImageData(0,0,o,i)}catch(e){return t}for(s=n.data.length;(r+=20)<s;)0!==n.data[r+3]&&(++l,c[0]+=n.data[r],c[1]+=n.data[r+1],c[2]+=n.data[r+2]);return c[0]=Math.floor(c[0]/l),c[1]=Math.floor(c[1]/l),c[2]=Math.floor(c[2]/l),c}function l(e){const[t,n,a]=e;return.2126*t+.7152*n+.0722*a}function d(e){let[t,n,a]=s(e);n=Math.min(1,n+.05+.1*(1-n)),a=a>.5?Math.max(0,.65*a):Math.max(0,Math.min(1,1-.65*a));const o=function(e){let[t,n,a]=e,o=n*Math.min(a,1-a),i=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return a-o*Math.max(Math.min(n-3,9-n,1),-1)};return[i(0),i(8),i(4)]}([360*t,n,a]);return`#${i(o.map((e=>Math.floor(255*e))))}66`}const u=e=>`rgba(${e>>16&255}, ${e>>8&255}, ${255&e}, ${(e>>24&255)/255})`,m=e=>l([e>>16&255,e>>8&255,255&e])>128?"black":"white"},81686:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(31481);const o=1;function i(){const e=window.getSelection();let t=e?.rangeCount?e.getRangeAt(0).cloneContents():void 0;const n=e?.focusNode&&e.focusOffset>0&&s(e.focusNode,a.zPk);if(!t||0===t.childElementCount)return;const i=Array.from(t.children).reduce(((e,t)=>t.nodeType===o&&t.classList.contains("message-date-group")?Array.from(t.querySelectorAll(".Message")).reduce(((e,t)=>e.concat(Number(t.dataset.messageId))),e):t.nodeType===o&&t.classList.contains("Message")?e.concat(Number(t.dataset.messageId)):e),[]);for(;t.firstChild;)t.removeChild(t.firstChild);return t=void 0,n||i.pop(),i}function s(e,t){return!(e.nodeType!==o||!e.classList.contains(t))||!!e.parentNode&&s(e.parentNode,t)}},58968:(e,t,n)=>{n.d(t,{I5:()=>s,LS:()=>i,V2:()=>o,lw:()=>a});const a={isCustomPeer:!0,type:"premium",titleKey:"PrivacyPremium",subtitleKey:"PrivacyPremiumText",avatarIcon:"star",isAvatarSquare:!0,withPremiumGradient:!0},o=[{isCustomPeer:!0,type:"contacts",titleKey:"FilterContacts",avatarIcon:"user",isAvatarSquare:!0,peerColorId:5},{isCustomPeer:!0,type:"nonContacts",titleKey:"FilterNonContacts",avatarIcon:"non-contacts",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"groups",titleKey:"FilterGroups",avatarIcon:"group",isAvatarSquare:!0,peerColorId:3},{isCustomPeer:!0,type:"channels",titleKey:"FilterChannels",avatarIcon:"channel",isAvatarSquare:!0,peerColorId:1},{isCustomPeer:!0,type:"bots",titleKey:"FilterBots",avatarIcon:"bots",isAvatarSquare:!0,peerColorId:6}],i=[{isCustomPeer:!0,type:"excludeMuted",titleKey:"FilterMuted",avatarIcon:"mute",isAvatarSquare:!0,peerColorId:6},{isCustomPeer:!0,type:"excludeRead",titleKey:"FilterRead",avatarIcon:"readchats",isAvatarSquare:!0,peerColorId:4},{isCustomPeer:!0,type:"excludeArchived",titleKey:"FilterArchived",avatarIcon:"archive",isAvatarSquare:!0,peerColorId:5}],s={isCustomPeer:!0,type:"hidden",titleKey:"StarsTransactionHidden",avatarIcon:"author-hidden",peerColorId:4}},80539:(e,t,n)=>{n.d(t,{Ay:()=>c,g4:()=>l,qh:()=>s});var a=n(23174),o=n(31481),i=n(82393);const s={B:a.C7.Bold,STRONG:a.C7.Bold,I:a.C7.Italic,EM:a.C7.Italic,INS:a.C7.Underline,U:a.C7.Underline,S:a.C7.Strike,STRIKE:a.C7.Strike,DEL:a.C7.Strike,CODE:a.C7.Code,PRE:a.C7.Pre,BLOCKQUOTE:a.C7.Blockquote},r=3;function c(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const c=document.createElement("div");c.innerHTML=n?e:function(e){let t=e.slice(0);return t=t.replace(/&nbsp;/g," "),t=t.replace(/<div><br([^>]*)?><\/div>/g,"\n"),t=t.replace(/<br([^>]*)?>/g,"\n"),t=t.replace(/<\/div>(\s*)<div>/g,"\n"),t=t.replace(/<div>/g,"\n"),t=t.replace(/<\/div>/g,""),t=t.replace(/^`{3}(.*?)[\n\r](.*?[\n\r]?)`{3}/gms,'<pre data-language="$1">$2</pre>'),t=t.replace(/^`{3}[\n\r]?(.*?)[\n\r]?`{3}/gms,"<pre>$1</pre>"),t=t.replace(/[`]{3}([^`]+)[`]{3}/g,"<pre>$1</pre>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[`]{1}([^`\n]+)[`]{1}(?![^<]*<\/(code|pre)>)/g,"<code>$2</code>"),i.TL||(t=t.replace(/\[<img[^>]+alt="([^"]+)"[^>]*>]/gm,"[$1]")),t=t.replace(/(?!<(?:code|pre)[^<]*|<\/)\[([^\]\n]+)\]\(customEmoji:(\d+)\)(?![^<]*<\/(?:code|pre)>)/g,'<img alt="$1" data-document-id="$2">'),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[*]{2}([^*\n]+)[*]{2}(?![^<]*<\/(code|pre)>)/g,"<b>$2</b>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[_]{2}([^_\n]+)[_]{2}(?![^<]*<\/(code|pre)>)/g,"<i>$2</i>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[~]{2}([^~\n]+)[~]{2}(?![^<]*<\/(code|pre)>)/g,"<s>$2</s>"),t=t.replace(/(?!<(code|pre)[^<]*|<\/)[|]{2}([^|\n]+)[|]{2}(?![^<]*<\/(code|pre)>)/g,`<span data-entity-type="${a.C7.Spoiler}">$2</span>`),t}(t?function(e){return e.replace(new RegExp(`\\[([^\\]]+?)]\\((${o.kNZ}+?)\\)`,"g"),((e,t,n)=>`<a href="${n.includes("://")?n:n.includes("@")?`mailto:${n}`:`https://${n}`}">${t}</a>`))}(e):e),l(c);const d=c.innerText.trim().replace(/\u200b+/g,"");let u=-c.innerText.indexOf(d[0]),m=0;const h=[];function p(e){if(e.nodeType===Node.COMMENT_NODE)return;const{index:t,entity:n}=function(e,t,n){const o=function(e){if(e instanceof HTMLElement&&e.dataset.entityType)return e.dataset.entityType;if(s[e.nodeName])return s[e.nodeName];if("A"===e.nodeName){const t=e;return t.dataset.entityType===a.C7.MentionName?a.C7.MentionName:t.dataset.entityType===a.C7.Url?a.C7.Url:t.href.startsWith("mailto:")?a.C7.Email:t.href.startsWith("tel:")?a.C7.Phone:t.href!==t.textContent?a.C7.TextUrl:a.C7.Url}return"SPAN"===e.nodeName?e.dataset.entityType:"IMG"===e.nodeName&&e.dataset.documentId?a.C7.CustomEmoji:void 0}(e);if(!o||!e.textContent)return{index:n,entity:void 0};const i=t.indexOf(e.textContent,n),r=i>=0?i:n,c=t.substring(0,r).length,{length:l}=t.substring(r,r+e.textContent.length);if(o===a.C7.TextUrl)return{index:r,entity:{type:o,offset:c,length:l,url:e.href}};if(o===a.C7.MentionName)return{index:r,entity:{type:o,offset:c,length:l,userId:e.dataset.userId}};if(o===a.C7.Pre)return{index:r,entity:{type:o,offset:c,length:l,language:e.dataset.language}};if(o===a.C7.CustomEmoji)return{index:r,entity:{type:o,offset:c,length:l,documentId:e.dataset.documentId}};if(o===a.C7.Timestamp){const t=Number(e.dataset.timestamp);return Number.isNaN(t)?{index:r,entity:void 0}:{index:r,entity:{type:o,offset:c,length:l,timestamp:t}}}return{index:r,entity:{type:o,offset:c,length:l}}}(e,d,u);if(n)u=t,h.push(n);else if(e.textContent){if(0===t&&""===e.textContent.trim())return;u+=e.textContent.length}e.hasChildNodes()&&m<=r&&(m+=1,Array.from(e.childNodes).forEach(p))}return Array.from(c.childNodes).forEach((e=>{m=1,p(e)})),{text:d,entities:h.length?h:void 0}}function l(e){e.querySelectorAll("img").forEach((e=>{e.dataset.documentId?e.textContent=e.alt||"":e.replaceWith(e.alt||"")}))}},73104:(e,t,n)=>{let a,o;n.d(t,{M6:()=>c,v5:()=>l});const i={Down:!0,ArrowDown:!0,Up:!0,ArrowUp:!0,Left:!0,ArrowLeft:!0,Right:!0,ArrowRight:!0," ":!0,PageUp:!0,PageDown:!0,End:!0,Home:!0,Tab:!0},s=e=>{const t="deltaY"in e?e.deltaY:(e=>"changedTouches"in e?e.changedTouches[0].clientY:0)(e);if(!a||!a.contains(e.target)||a.scrollTop<=0&&t<=0||a.scrollTop>=a.scrollHeight-a.offsetHeight&&t>=0){if(o&&e.target.closest(o))return;e.preventDefault()}};function r(e){i[e.key]&&!function(e){if(!(e&&e instanceof HTMLElement))return!1;const t=e,n=t.tagName.toLowerCase();if("textarea"===n)return!0;if("input"!==n)return!1;const a=t.getAttribute("type");return!!a&&["text","password","number","email","tel","url","search","date","datetime","datetime-local","time","month","week"].indexOf(a.toLowerCase())>-1}(e.target)&&e.preventDefault()}function c(e,t){return a=e,o=t,document.addEventListener("wheel",s,{passive:!1}),document.addEventListener("touchmove",s,{passive:!1}),document.onkeydown=r,l}function l(){a=void 0,o=void 0,document.removeEventListener("wheel",s),document.removeEventListener("touchmove",s),document.onkeydown=null}},16460:(e,t,n)=>{function a(e,t){let n=0,a=0,o=e;for(;o&&o!==t&&!o.contains(t);)n+=o.offsetTop,a+=o.offsetLeft,o=o.offsetParent;return{top:n,left:a}}n.d(t,{A:()=>a})},41512:(e,t,n)=>{n.d(t,{Y:()=>o});var a=n(43503);function o(e){if("none"===e.style.display)return!1;const t=e.getBoundingClientRect(),{height:n}=a.A.get();return t.top<=n&&t.top+t.height>=0}},31722:(e,t,n)=>{n.d(t,{A:()=>a});const a={container:"YmM5biTv",header:"S7WFT2bv",pickerCategoryTitle:"YK1300x2",peerChip:"gsKPBPoK",pickerList:"yLCbiItq",padded:"bXzIGw8s",noResults:"dXWKD0ve",onlineStatus:"d5GDOYh9"}},93879:(e,t,n)=>{n.d(t,{A:()=>a});const a={root:"O9uCTt5C","animated-icon":"HiI6SMxF",animatedIcon:"HiI6SMxF",effect:"NhFcTGja",animating:"ikfZ6Igz",withEffectOnly:"jjRJmHCg"}},69988:(e,t,n)=>{n.d(t,{A:()=>a});const a={root:"gXO57D98",chosen:"VXSJn0Sm",paid:"N3lcrsh8",outside:"Hqw10FGl","animated-emoji":"lFjoRm_p",animatedEmoji:"lFjoRm_p",tag:"Dr889Kzc",tail:"cUfY1b26","is-safari":"rxxUijuG",isSafari:"rxxUijuG","tail-fill":"y591o4fN",tailFill:"y591o4fN","tag-text":"ly7cruxF",tagText:"ly7cruxF",counter:"P2FqNJAi",disabled:"NRtGofbf",paidCounter:"CW4UO1n3"}}}]);
//# sourceMappingURL=telegram-a.2356.32a9ccd5a7568e00f1f4.js.map