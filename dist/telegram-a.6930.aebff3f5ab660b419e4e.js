"use strict";(self.webpackChunktelegram_t=self.webpackChunktelegram_t||[]).push([[6930],{59585:(e,t,a)=>{a.r(t),a.d(t,{GiftInfoModal:()=>yt,GiftModal:()=>mt,GiftRecipientPicker:()=>dt,GiftStatusInfoModal:()=>bt,GiftTransferModal:()=>qt,GiftUpgradeModal:()=>vt,GiftWithdrawModal:()=>Tt,PaidReactionModal:()=>ze,StarPaymentModal:()=>ue,StarsBalanceModal:()=>oe,StarsGiftModal:()=>N,StarsGiftingPickerModal:()=>w,StarsSubscriptionModal:()=>Ne,StarsTransactionInfoModal:()=>Se});var r=a(84051),n=a(13439),s=a(90709),i=a(29807),o=a(87357),l=a(17142),c=a(4961),m=a(14),d=a(17712),u=a(59030),A=a(21849),p=a(18276),f=a(84685),y=a(64493),g=a(8410),h=a(1526);const E={modalDialog:"MFXAwnxJ",content:"Sl6xVf1R",main:"bTN9Jeph",headerInfo:"c6MiyJgW",logo:"StGLWvzb",logoBackground:"SyTXSfml",description:"kFe3mIZo",section:"BgfHkWd2",header:"zMtAGfXs",starHeaderText:"q3v8orGj",hiddenHeader:"bq3FnXT0",closeButton:"bDsDTkbe",avatar:"jK36xUj4",center:"v1PckUQn",secondaryInfo:"TDWSRfP9"},S=a.p+"telegram-a.StarLogo.600328787c79d99dfd66.svg",v=a.p+"telegram-a.stars-bg.dee4c4b73c7d21c2ec73.png",N=(0,r.ph)((0,n.EK)(((e,t)=>{let{modal:a}=t;return{user:a?.forUserId?(0,i.mBe)((0,n.mS)(),a.forUserId):void 0}}))((e=>{let{modal:t,user:a}=e;const{closeStarsGiftModal:i,openInvoice:N,requestConfetti:b}=(0,n.ko)(),C=(0,r.li)(null),k=Boolean(t?.isOpen),I=(0,m.A)(t),G=(0,u.A)(),[P,w]=(0,r.J0)(),[T,B]=(0,r.J0)(!0);(0,r.vJ)((()=>{k||B(!0)}),[k]);const M=(0,d.A)((()=>{const e=C.current;if(e&&k){const{top:t,left:a,width:r,height:n}=e.querySelector(".modal-content").getBoundingClientRect();b({top:t,left:a,width:r,height:n,withStars:!0})}}));(0,r.vJ)((()=>{I?.isCompleted&&M()}),[I,M]);const x=(0,d.A)((e=>{I&&(w(e),N(a?{type:"starsgift",userId:a.id,stars:e.stars,currency:e.currency,amount:e.amount}:{type:"stars",stars:e.stars,currency:e.currency,amount:e.amount}))})),U=(0,d.A)((()=>{i()})),D=(0,r.Kr)((()=>{const e=G("lng_credits_summary_options_about").split("{link}");return[e[0],r.Ay.createElement(f.A,{url:G("StarsTOSLink"),text:G("lng_credits_summary_options_about_link")}),e[1]]}),[G]);return r.Ay.createElement(g.A,{className:(0,o.A)(E.modalDialog),contentClassName:E.content,dialogRef:C,isSlim:!0,onClose:U,isOpen:k},r.Ay.createElement("div",{className:(0,o.A)(E.main,"custom-scroll"),onScroll:function(e){const{scrollTop:t}=e.currentTarget;B(t<=150)}},r.Ay.createElement(y.A,{round:!0,size:"smaller",className:E.closeButton,color:"translucent",onClick:()=>i(),ariaLabel:G("Close")},r.Ay.createElement(p.A,{name:"close"})),r.Ay.createElement("div",{className:(0,o.A)(E.header,T&&E.hiddenHeader)},r.Ay.createElement("h2",{className:E.starHeaderText},G(a?"GiftStarsTitle":"Star.List.GetStars"))),r.Ay.createElement("div",{className:E.headerInfo},a?r.Ay.createElement(r.Ay.Fragment,null,r.Ay.createElement(A.A,{size:100,peer:a,className:E.avatar}),r.Ay.createElement("img",{className:E.logoBackground,src:v,alt:"",draggable:!1})):r.Ay.createElement(r.Ay.Fragment,null,r.Ay.createElement("img",{className:E.logo,src:S,alt:"",draggable:!1}),r.Ay.createElement("img",{className:E.logoBackground,src:v,alt:"",draggable:!1}))),r.Ay.createElement("h2",{className:(0,o.A)(E.headerText,E.center)},I?.isCompleted?a?(0,c.A)(G("Notification.StarsGift.SentYou",(0,l.A)(P.amount,P.currency,G.code)),["simple_markdown"]):(0,c.A)(G("StarsAcquiredInfo",P?.stars),["simple_markdown"]):G(a?"GiftStarsTitle":"Star.List.GetStars")),r.Ay.createElement("p",{className:E.description},a?(0,c.A)(G("ActionGiftStarsSubtitle",(0,s.F9N)(G,a)),["simple_markdown"]):G("Stars.Purchase.GetStarsInfo")),r.Ay.createElement("div",{className:E.section},r.Ay.createElement(h.A,{options:I?.starsGiftOptions,onClick:x}),r.Ay.createElement("div",{className:E.secondaryInfo},D))))})));var b=a(31481),C=a(70636),k=a(87894),I=a(79582),G=a(54960),P=a(34642);const w=(0,r.ph)((0,n.EK)((e=>{const{chats:{listIds:t},currentUserId:a}=e;return{userIds:e.contactList?.userIds,activeListIds:t.active,archivedListIds:t.archived,currentUserId:a}}))((e=>{let{isOpen:t,currentUserId:a,activeListIds:i,archivedListIds:o,userIds:l}=e;const{closeStarsGiftingPickerModal:c,openStarsGiftModal:m}=(0,n.ko)(),A=(0,u.A)(),[p,f]=(0,r.J0)(""),y=(0,r.Kr)((()=>{const e=(0,n.mS)().users.byId,t=(0,k.Am)([...l||[],...i||[],...o||[]]),r=(0,C.PU)({ids:t,query:p,type:"user"});return(0,I.A)(r.filter((t=>{const r=e[t];return!(!r||r.isSupport||(0,s.tvf)(r)||(0,s.PL2)(r)||t===a||t===b.zv8)})))}),[a,p,l,i,o]),g=(0,d.A)((e=>{e?.length&&(m({forUserId:e}),c())}));return r.Ay.createElement(P.A,{className:"s3k01dTm",isOpen:t,onClose:c,title:A("GiftStarsTitle"),hasCloseButton:!0,shouldAdaptToSearch:!0,withFixedHeight:!0,confirmButtonText:A("Continue"),onEnter:c},r.Ay.createElement(G.A,{className:"cuI2eDIY",itemIds:y,filterValue:p,filterPlaceholder:A("Search"),onFilterChange:f,isSearchable:!0,withDefaultPadding:!0,withStatus:!0,onSelectedIdChange:g}))})));var T=a(37661),B=a(39351),M=a(46222),x=a(24680),U=a(41036),D=a(86046),O=a(81949),R=a(9267);const K={root:"TtE8LQNJ",minimal:"nkV4JXHc",transition:"nXQS4E59",main:"JuWZY1ds",container:"mnhBs1uK",section:"lYkNd_gb",sectionTitle:"FF8gm7MP",tos:"Vu6blJk9",logo:"sjhpNB8l",logoBackground:"jjESKN3H",headerHext:"xbpAOr37",description:"teXilLxe",header:"fnhXotO2",starHeaderText:"iUwego5s",botItem:"AhxcrKWn",hiddenHeader:"DZk6d6hF",closeButton:"piD1PXHW",addStarsButton:"dqnGL2uh",addStarsIcon:"w9Db2eiK",balanceBlock:"Yk0OQBKC",balanceInfo:"p2dW9NOV",smallerText:"rUnPcfmE",balanceBottom:"F5BTkZ9G",modalBalance:"t8tMrx3y",starButton:"oOt4VBD2",paymentContent:"OReEUNTV",paymentImages:"oKorQYTC",paymentPhoto:"HGTrEtUF",avatarStar:"Wu10dXoa",paymentImageBackground:"os8jb_qv",paymentButton:"VzR5cibf",paymentButtonStar:"Uhg7yWxK",transactions:"Qvc0fTTH",subscriptions:"IX5BhCUF",tabs:"KZVEyKOX",disclaimer:"bpVifdwH",amountBadge:"BPM7LKwo",loadMore:"TKmZjMyd",loadMoreIcon:"buepwtN1"},L=(0,r.ph)((e=>{let{balance:t,className:a,withAddButton:s}=e;const i=(0,B.A)(),{openStarsBalanceModal:l}=(0,n.ko)();return r.Ay.createElement("div",{className:(0,o.A)(K.balanceBlock,a)},r.Ay.createElement("div",{className:K.balanceInfo},r.Ay.createElement("span",{className:K.smallerText},i("StarsBalance")),r.Ay.createElement("div",{className:K.balanceBottom},r.Ay.createElement(R.A,{type:"gold",size:"middle"}),void 0!==t?(0,D.ZF)(i,t):"…",s&&r.Ay.createElement(O.A,{className:K.addStarsButton,onClick:()=>l({})},r.Ay.createElement(p.A,{className:K.addStarsIcon,name:"add"})))))}));var F=a(17663),z=a(14242),J=a(63527);const V={root:"ZXnbeQxP",info:"zLaaDX3c",status:"HbF2qTB2",statusPricing:"AveGvpdV",amount:"_CBiOQcv",title:"k9ZIv5Pd",description:"FlRlxMx2",subtitle:"YN2J8dw6",statusPeriod:"MRrP7Oew",statusEnded:"pRHwfr8m",preview:"t6Syyhzd",subscriptionStar:"ftlbevPm"},H=(0,r.ph)((e=>{let{subscription:t}=e;const{openStarsSubscriptionModal:a}=(0,n.ko)(),{peerId:o,pricing:l,until:m,isCancelled:p,title:f,photo:y}=t,g=(0,u.A)(),h=(0,J.A)(function(e){return t=>(0,i.PVB)(t,e)}(o)),E=(0,d.A)((()=>{a({subscription:t})}));if(!h)return;const S=m<Date.now()/1e3,v=(0,F.A)(1e3*m,g.code,!0,"long");return r.Ay.createElement("div",{className:V.root,onClick:E},r.Ay.createElement("div",{className:V.preview},r.Ay.createElement(A.A,{size:"medium",peer:h}),r.Ay.createElement(R.A,{className:V.subscriptionStar,type:"gold",size:"small"})),r.Ay.createElement("div",{className:V.info},r.Ay.createElement("h3",{className:V.title},(0,c.A)((0,s.F9N)(g,h)||"")),f&&r.Ay.createElement("p",{className:V.subtitle},y&&r.Ay.createElement(A.A,{webPhoto:y,size:"micro"}),(0,c.A)(f)),r.Ay.createElement("p",{className:V.description},g(S?"StarsSubscriptionExpired":p?"StarsSubscriptionExpires":"StarsSubscriptionRenews",v))),r.Ay.createElement("div",{className:V.status},p||S?r.Ay.createElement("div",{className:V.statusEnded},g(S?"StarsSubscriptionStatusExpired":"StarsSubscriptionStatusCancelled")):r.Ay.createElement(r.Ay.Fragment,null,r.Ay.createElement("div",{className:V.statusPricing},r.Ay.createElement(R.A,{className:V.star,type:"gold",size:"adaptive"}),r.Ay.createElement("span",{className:V.amount},(0,z.Sm)(l.amount))),r.Ay.createElement("div",{className:V.statusPeriod},g("StarsParticipantSubscriptionPerMonth")))))}));var q=a(58968),j=a(66833);function W(e,t){if(t.starRefCommision)return e("StarTransactionCommission",(0,z.l9)(t.starRefCommision));if(t.isGiftUpgrade)return e("Gift2TransactionUpgraded");if(t.extendedMedia)return e("StarMediaPurchase");if(t.subscriptionPeriod)return t.title||e("StarSubscriptionPurchase");if(t.isReaction)return e("StarsReactionsSent");if(t.giveawayPostId)return e("StarsGiveawayPrizeReceived");if(t.isMyGift)return e("StarsGiftSent");if(t.isGift)return e("StarsGiftReceived");if(t.starGift)return _(t.stars)?e("Gift2TransactionSent"):e("Gift2ConvertedTitle");const a=t.peer&&"peer"!==t.peer.type&&(0,D.Pc)(t.peer)||void 0;return a?a.title||e(a.titleKey):t.title}function _(e){return e.amount?e.amount<0:e.nanos<0}var Q=a(79577),X=a(40558),Y=a(62587),Z=a(27860);const $={root:"jQkp75Gb",preview:"OYGSN3PF",count:"KX1yz2Jy",thumb:"EvinKr5k",noOutline:"KSAAsUDv",itemCount1:"GxDajfX_",itemCount2:"jXuZoxq8",itemCount3:"TPn3XGHJ",blurry:"hWZuxLS8",full:"w56QPFhl",fadeIn:"ds43W8Wq"};function ee(e){let{boughtMedia:t,index:a,className:n}=e;const i=t.video||t.photo,l=(0,s.VOI)(i,"pictogram"),c=(0,s.VDY)(i),m=(0,Y.A)(l);return r.Ay.createElement("div",{className:(0,o.A)($.thumb,void 0!==a&&`stars-transaction-media-${a}`,n)},c&&r.Ay.createElement("img",{className:$.blurry,src:c,alt:""}),m&&r.Ay.createElement("img",{className:$.full,src:m,alt:""}))}const te=(0,r.ph)((e=>{let{media:t,className:a,isTransactionPreview:n,onClick:s}=e;const i=Math.min(t.length,n?2:3),l="mediaType"in t[0];return r.Ay.createElement("div",{className:(0,o.A)($.root,$[`itemCount${i}`],n&&$.preview,a),dir:"rtl",onClick:s},t.slice(0,i).reverse().map(((e,t,a)=>{const s=a.length-t-1;return"mediaType"in e?r.Ay.createElement(Z.A,{className:$.thumb,isVisible:!0,width:e.width,height:e.height,thumbDataUri:e.thumbnail?.dataUri}):r.Ay.createElement(ee,{className:(0,o.A)(n&&s>0&&$.noOutline),boughtMedia:e,index:s})})),l&&r.Ay.createElement("div",{className:$.count},r.Ay.createElement(p.A,{name:"stars-lock"}),t.length>1?t.length:""))})),ae={root:"aHAxv_Jg",info:"oyYrn3II",stars:"K5lc75ku",amount:"QLQPuLAr",title:"e0pK8CJ_",description:"xbERdDMQ",date:"l6CwQ0Ev",positive:"P_42_ZWR",negative:"TGjnLJfH",preview:"cnjGihOT",subscriptionStar:"z43YvnDX",uniqueGiftBackground:"eNvzMw2p",giftSticker:"U3dqmnM4"},re=(0,r.ph)((e=>{let{transaction:t,className:a}=e;const{openStarsTransactionModal:l}=(0,n.ko)(),{date:m,stars:p,photo:f,peer:y,extendedMedia:g,subscriptionPeriod:h}=t,E=(0,B.A)(),S=(0,u.A)(),v="peer"===y.type?y.id:void 0,N=(0,J.A)(function(e){return t=>e?(0,i.PVB)(t,e):void 0}(v)),b=t.starGift,C="starGiftUnique"===b?.type,k=b&&(0,j.yQ)(b),I=(0,r.Kr)((()=>{let e,a,r,n=W(S,t);if("peer"===t.peer.type)e=N&&(0,s.F9N)(S,N),r=N||q.lw;else{const a=(0,D.Pc)(t.peer);n=a.title||S(a.titleKey),e=S(a.subtitleKey),r=a}return t.isGiftUpgrade&&"starGiftUnique"===t.starGift?.type&&(e=t.starGift.title),t.photo&&(r=void 0),t.isRefund&&(a=S("StarsRefunded")),t.hasFailed&&(a=S("StarsFailed")),t.isPending&&(a=S("StarsPending")),{title:n,description:e,avatarPeer:r,status:a}}),[S,N,t]),G=(0,r.Kr)((()=>{if(C){const{backdrop:e}=(0,j.uc)(b),t=[e.centerColor,e.edgeColor];return r.Ay.createElement(r.Ay.Fragment,null,r.Ay.createElement(X.A,{className:ae.uniqueGiftBackground,backgroundColors:t}),r.Ay.createElement(Q.A,{className:ae.giftSticker,sticker:k,size:36,play:!1}))}return k?r.Ay.createElement(Q.A,{className:ae.giftSticker,sticker:k,size:36,play:!1}):g?r.Ay.createElement(te,{media:g,isTransactionPreview:!0}):r.Ay.createElement(r.Ay.Fragment,null,r.Ay.createElement(A.A,{size:"medium",webPhoto:f,peer:I.avatarPeer}),Boolean(h)&&r.Ay.createElement(R.A,{className:ae.subscriptionStar,type:"gold",size:"small"}))}),[C,g,f,I.avatarPeer,h,b,k]),P=(0,d.A)((()=>{l({transaction:t})}));return r.Ay.createElement("div",{className:(0,o.A)(ae.root,a),onClick:P},r.Ay.createElement("div",{className:ae.preview},G),r.Ay.createElement("div",{className:ae.info},r.Ay.createElement("h3",{className:ae.title},I.title),I.description&&r.Ay.createElement("p",{className:ae.description},(0,c.A)(I.description)),r.Ay.createElement("p",{className:ae.date},(0,F.L2)(1e3*m,S.code,!0),I.status&&` — (${I.status})`)),r.Ay.createElement("div",{className:ae.stars},r.Ay.createElement("span",{className:(0,o.A)(ae.amount,_(p)?ae.negative:ae.positive)},(0,D.hk)(E,p)),r.Ay.createElement(R.A,{className:ae.star,type:"gold",size:"adaptive"})))})),ne=["all","inbound","outbound"],se=["StarsTransactionsAll","StarsTransactionsIncoming","StarsTransactionsOutgoing"],ie="StarsTransactionItem",oe=(0,r.ph)((0,n.EK)((e=>({shouldForceHeight:Boolean(e.stars?.history?.all?.transactions.length),starsBalanceState:e.stars,canBuyPremium:!(0,i.n_C)(e)})))((e=>{let{modal:t,starsBalanceState:a,canBuyPremium:l,shouldForceHeight:m}=e;const{closeStarsBalanceModal:A,loadStarsTransactions:E,loadStarsSubscriptions:N,openStarsGiftingPickerModal:b,openInvoice:C}=(0,n.ko)(),{balance:k,history:I,subscriptions:G}=a||{},P=(0,u.A)(),w=(0,B.A)(),[D,O]=(0,r.J0)(!0),[R,F]=(0,r.J0)(0),[z,J,V]=(0,T.A)(),q=Boolean(t&&a),{originStarsPayment:j,originReaction:W,originGift:_,topup:Q}=t||{},X=j||W||_||Q,Y=j?.form?.invoice?.totalAmount||j?.subscriptionInfo?.subscriptionPricing?.amount||W?.amount||_?.gift.stars||Q?.balanceNeeded,Z=Y?Y-(k?.amount||0):void 0,$=(0,r.Kr)((()=>{const e=(0,n.mS)();if(W){const t=(0,i.hds)(e,W.chatId);if(!t)return;return P("StarsNeededTextReactions",(0,s.JsG)(P,t))}if(j){const t=j.form?.botId?(0,i.mBe)(e,j.form.botId):void 0;if(!t)return;return P("StarsNeededText",(0,s.YgS)(t))}if(_){const t=(0,i.mBe)(e,_.peerId);if(!t)return;return P("StarsNeededTextGift",(0,s.F9N)(w,t))}if("subs"===Q?.purpose)return P("StarsNeededTextLink")}),[W,j,_,Q?.purpose,w,P]),ee=Boolean(I?.all?.transactions.length&&!X),te=!X,ae=(0,r.Kr)((()=>se.map((e=>({title:w(e)})))),[w]);(0,r.vJ)((()=>{q||(O(!0),F(0),V())}),[q]),(0,r.vJ)((()=>{X?J():V()}),[X]);const oe=(0,r.Kr)((()=>{if(!q)return;const e=P("lng_credits_summary_options_about").split("{link}");return[e[0],r.Ay.createElement(f.A,{url:P("StarsTOSLink"),text:P("lng_credits_summary_options_about_link")}),e[1]]}),[q,P]),le=(0,d.A)((()=>{E({type:ne[R]})})),ce=(0,d.A)((()=>{N()})),me=(0,d.A)((()=>{b({})})),de=(0,d.A)((e=>{C({type:"stars",stars:e.stars,currency:e.currency,amount:e.amount})}));return r.Ay.createElement(g.A,{className:(0,o.A)(K.root,!m&&K.minimal),isOpen:q,onClose:A},r.Ay.createElement("div",{className:(0,o.A)(K.main,"custom-scroll"),onScroll:function(e){const{scrollTop:t}=e.currentTarget;O(t<=150)}},r.Ay.createElement(y.A,{round:!0,size:"smaller",className:K.closeButton,color:"translucent",onClick:()=>A(),ariaLabel:w("Close")},r.Ay.createElement(p.A,{name:"close"})),r.Ay.createElement(L,{balance:k,className:K.modalBalance}),r.Ay.createElement("div",{className:(0,o.A)(K.header,D&&K.hiddenHeader)},r.Ay.createElement("h2",{className:K.starHeaderText},P("TelegramStars"))),r.Ay.createElement("div",{className:K.section},r.Ay.createElement("img",{className:K.logo,src:S,alt:"",draggable:!1}),r.Ay.createElement("img",{className:K.logoBackground,src:v,alt:"",draggable:!1}),r.Ay.createElement("h2",{className:K.headerText},Z?P("StarsNeededTitle",Y):P("TelegramStars")),r.Ay.createElement("div",{className:K.description},(0,c.A)($||P("TelegramStarsInfo"),["simple_markdown","emoji"])),l&&!z&&r.Ay.createElement(y.A,{className:K.starButton,onClick:J},P("Star.List.BuyMoreStars")),l&&!z&&te&&r.Ay.createElement(y.A,{isText:!0,noForcedUpperCase:!0,className:K.starButton,onClick:me},P("TelegramStarsGift")),z&&a?.topupOptions&&r.Ay.createElement(h.A,{starsNeeded:Z,options:a.topupOptions,onClick:de})),z&&r.Ay.createElement("div",{className:K.tos},oe),ee&&Boolean(G?.list.length)&&r.Ay.createElement("div",{className:K.section},r.Ay.createElement("h3",{className:K.sectionTitle},P("StarMySubscriptions")),r.Ay.createElement("div",{className:K.subscriptions},G?.list.map((e=>r.Ay.createElement(H,{key:e.id,subscription:e}))),G?.nextOffset&&r.Ay.createElement(y.A,{isText:!0,disabled:G.isLoading,size:"smaller",noForcedUpperCase:!0,className:K.loadMore,onClick:ce},r.Ay.createElement(p.A,{name:"down",className:K.loadMoreIcon}),P("StarMySubscriptionsExpand")))),ee&&r.Ay.createElement("div",{className:K.container},r.Ay.createElement("div",{className:K.section},r.Ay.createElement(U.Ay,{name:w.isRtl?"slideOptimizedRtl":"slideOptimized",activeKey:R,renderCount:se.length,shouldRestoreHeight:!0,className:K.transition},r.Ay.createElement(M.A,{onLoadMore:le,items:I?.[ne[R]]?.transactions,scrollContainerClosest:`.${K.main}`,itemSelector:`.${ie}`,className:K.transactions,noFastList:!0,noScrollRestoreOnTop:!0},I?.[ne[R]]?.transactions.map((e=>r.Ay.createElement(re,{key:`${e.id}-${e.isRefund}`,transaction:e,className:ie})))))),r.Ay.createElement(x.A,{className:K.tabs,tabClassName:K.tab,activeTab:R,tabs:ae,onSwitchTab:F}))))})));var le=a(48775),ce=a(29886),me=a(84991),de=a(10187);const ue=(0,r.ph)((0,n.EK)(((e,t)=>{let{modal:a}=t;const r=a?.form?.botId?(0,i.mBe)(e,a.form.botId):void 0,n="message"===a?.inputInvoice?.type?a.inputInvoice:void 0,s=n?(0,i.O5q)(e,n.chatId,n.messageId):void 0,o=n?(0,i.hds)(e,n.chatId):void 0,l=s?.content.paidMedia;return{bot:r,starsBalanceState:e.stars,paidMediaMessage:l?s:void 0,paidMediaChat:l?o:void 0}}))((e=>{let{modal:t,bot:a,starsBalanceState:i,paidMediaMessage:l,paidMediaChat:m}=e;const{closeStarsPaymentModal:p,openStarsBalanceModal:h,sendStarPaymentForm:E}=(0,n.ko)(),[S,N,b]=(0,T.A)(),C=Boolean(t?.inputInvoice&&i),k=(0,ce.A)(t),I=t||k,{form:G,subscriptionInfo:P}=I||{},w=G?.invoice?.totalAmount||P?.subscriptionPricing?.amount,M=Boolean(G?.invoice.subscriptionPeriod),x=!P?.subscriptionPricing,U=G?.photo,D=(0,u.A)(),O=(0,B.A)();(0,r.vJ)((()=>{C||b()}),[C]);const F=(0,r.Kr)((()=>{if(!I?.inputInvoice)return"";const e=(0,s.YgS)(a),t=D("Stars.Intro.PurchasedText.Stars",w);if(l){const e=l.content.paidMedia.extendedMedia,a=e.every((e=>!e.duration)),r=e.every((e=>!!e.duration)),n=D(a?"Stars.Transfer.Photos":r?"Stars.Transfer.Videos":"Media",e.length),i=(0,s.JsG)(D,m);return D("Stars.Transfer.UnlockInfo",[n,i,t])}return P?O("StarsSubscribeText",{chat:P.title,amount:w},{withNodes:!0,withMarkdown:!0,pluralValue:w}):M?O("StarsSubscribeBotText",{name:G.title,amount:w,bot:e},{pluralValue:w}):D("Stars.Transfer.Info",[G.title,e,t])}),[I?.inputInvoice,a,D,w,l,P,M,G,m,O]),J=(0,r.Kr)((()=>{if(P)return O("StarsSubscribeInfo",{link:r.Ay.createElement(f.A,{url:O("StarsSubscribeInfoLink"),text:O("StarsSubscribeInfoLinkText")})},{withNodes:!0})}),[P,O]),V=(0,r.Kr)((()=>{if(P)return(0,s.nrT)(P)}),[P]),H=(0,d.A)((()=>{const e=i?.balance;void 0!==w&&void 0!==e&&(w>e.amount?h({originStarsPayment:t}):(E({}),N()))}));return r.Ay.createElement(g.A,{contentClassName:K.paymentContent,isOpen:C,hasAbsoluteCloseButton:!0,isSlim:!0,onClose:p},r.Ay.createElement(L,{balance:i?.balance,className:K.modalBalance}),r.Ay.createElement("div",{className:K.paymentImages,dir:D.isRtl?"ltr":"rtl"},l?r.Ay.createElement(te,{media:l.content.paidMedia.extendedMedia}):V?r.Ay.createElement(r.Ay.Fragment,null,r.Ay.createElement(A.A,{className:K.paymentPhoto,peer:V,size:"giant"}),r.Ay.createElement(R.A,{type:"gold",size:"adaptive",className:K.avatarStar})):r.Ay.createElement(me.A,{peer:U?void 0:a,avatarWebPhoto:U,avatarSize:"giant",badgeIcon:"star",badgeText:(0,z.Sm)(w),badgeClassName:K.amountBadge,className:K.paymentPhoto}),r.Ay.createElement("img",{className:K.paymentImageBackground,src:v,alt:"",draggable:!1})),r.Ay.createElement("h2",{className:K.headerText},D(V?"StarsSubscribeTitle":"StarsConfirmPurchaseTitle")),x&&r.Ay.createElement(de.A,{className:K.botItem,peerId:G?.botId}),r.Ay.createElement("div",{className:K.description},(0,c.A)(F,["simple_markdown","emoji"])),r.Ay.createElement(y.A,{className:K.paymentButton,size:"smaller",onClick:H,isLoading:S},O(M?"StarsSubscribeBotButtonMonth":"StarsPay",{amount:(0,le.U)(O,w,{asFont:!0})},{withNodes:!0})),J&&r.Ay.createElement("div",{className:(0,o.A)(K.disclaimer,K.smallerText)},J))})));var Ae=a(89925),pe=a(85982),fe=a(70046),ye=a(95807);const ge=(0,r.ph)((e=>{let{modelAttribute:t,backdropAttribute:a,patternAttribute:n,title:s,subtitle:i,className:l}=e;const c=function(e,t){const a=(0,r.li)(0);let n=!1;return(0,r.Kr)((()=>{a.current+=1,n=!0}),e),a.current}([t,a,n]),m=a?.textColor,d=(0,r.Kr)((()=>{const e=[a.centerColor,a.edgeColor],t=a.patternColor;return r.Ay.createElement(X.A,{className:"UvhsGZLf",backgroundColors:e,patternColor:t,patternIcon:n.sticker})}),[a,n]);return r.Ay.createElement("div",{className:(0,o.A)("irv1C8bo",l)},r.Ay.createElement(U.Ay,{className:"Tu6_OHoq",slideClassName:"iUTKLzTN",activeKey:c,direction:1,name:"zoomBounceSemiFade"},d,r.Ay.createElement(Q.A,{className:"a1ASgPwu",sticker:t.sticker,size:120})),s&&r.Ay.createElement("h1",{className:"ECTvfOda"},s),i&&r.Ay.createElement("p",{className:"S6JwvHWD",style:(0,ye.A)(m&&`color: ${m}`)},i))})),he="qBOIq6Jn",Ee="sso9uZM6",Se=(0,r.ph)((0,n.EK)(((e,t)=>{let{modal:a}=t;const r="peer"===a?.transaction?.peer?.type&&a.transaction.peer.id,n=r?(0,i.PVB)(e,r):void 0,s=a?.transaction.stars,o=a?.transaction.isGift&&(0,i.WLj)(e,s?.amount);return{peer:n,canPlayAnimatedEmojis:(0,i.BWX)(e),topSticker:o}}))((e=>{let{modal:t,peer:a,canPlayAnimatedEmojis:i,topSticker:l}=e;const{showNotification:c,openMediaViewer:m,closeStarsTransactionModal:y}=(0,n.ko)(),g=(0,B.A)(),h=(0,u.A)(),{transaction:E}=t||{},S=(0,d.A)((()=>{const e=E?.extendedMedia;e&&m({origin:Ae.TQ.StarsTransaction,standaloneMedia:e.flatMap((e=>Object.values(e)))})})),N=(0,r.Kr)((()=>{if(!E)return;const{giveawayPostId:e,photo:t,stars:n,isGiftUpgrade:m,starGift:d}=E,u=E?.starGift,y="starGiftUnique"===u?.type,N=E?.starGift?(0,j.yQ)(E.starGift):l,b=y?(0,j.uc)(u):void 0,C=E.peer&&"peer"!==E.peer.type&&(0,D.Pc)(E.peer)||void 0,k="peer"===E.peer?.type?E.peer.id:void 0,I=E.peer&&h(function(e){switch(e.type){case"appStore":return"AppStore";case"playMarket":return"PlayMarket";case"fragment":return"Fragment";case"premiumBot":return"StarsTransactionBot";case"ads":return"StarsTransactionAds";case"api":return"Stars.Intro.Transaction.TelegramBotApi.Subtitle";default:return"Stars.Transaction.Unsupported.Title"}}(E.peer)),G=W(h,E),P=a&&E.messageId&&!m?(0,s.ytg)(a,void 0,E.messageId):void 0,w=a&&e&&(0,s.ytg)(a,void 0,e),T=E.extendedMedia,B=T?.length||0,M=T?.every((e=>!e.video)),x=T?.every((e=>!e.photo)),U=h(M?"Stars.Transfer.Photos":x?"Stars.Transfer.Videos":"Media",B),O=E.description||(m&&"starGiftUnique"===d?.type?d.title:void 0)||(T?U:void 0),K=!T&&!N,L=t?void 0:a||C,z=y&&r.Ay.createElement("div",{className:(0,o.A)(he,"ApoQz22o")},r.Ay.createElement(ge,{backdropAttribute:b.backdrop,patternAttribute:b.pattern,modelAttribute:b.model,title:u.title,subtitle:g("GiftInfoCollectible",{number:u.number})})),J=r.Ay.createElement("div",{className:he},T&&r.Ay.createElement(te,{className:(0,o.A)("C5r59yiV","transaction-media-preview"),media:T,onClick:S}),!T&&N&&r.Ay.createElement(Q.A,{key:E.id,sticker:N,play:i,noLoop:!0}),K&&r.Ay.createElement(A.A,{peer:L,webPhoto:t,size:"giant"}),!N&&r.Ay.createElement("img",{className:(0,o.A)("nML8IQqX"),src:v,alt:"",draggable:!1}),G&&r.Ay.createElement("h1",{className:"ZZAj3hj7"},G),r.Ay.createElement("p",{className:"NuWOY7ED"},O),r.Ay.createElement("p",{className:Ee},r.Ay.createElement("span",{className:(0,o.A)(Ee,_(n)?"xDyq9cc0":"jvBZSrpd")},(0,D.hk)(g,n)),r.Ay.createElement(R.A,{type:"gold",size:"middle"}))),V=[];let H;E.starRefCommision&&V.push([h("StarsTransaction.StarRefReason.Title"),h("StarsTransaction.StarRefReason.Program")]),m&&V.push([h("StarGiftReason"),h("StarGiftReasonUpgrade")]),H=m?h("Stars.Transaction.GiftFrom"):_(n)||E.isMyGift?h("Stars.Transaction.To"):E.starRefCommision?h("StarsTransaction.StarRefReason.Miniapp"):h(k?"Star.Transaction.From":"Stars.Transaction.Via"),V.push([H,k?{chatId:k}:I||""]),P&&V.push([h("Stars.Transaction.Reaction.Post"),r.Ay.createElement(f.A,{url:P,text:P})]),w&&(V.push([h("BoostReason"),r.Ay.createElement(f.A,{url:w,text:h("Giveaway")})]),V.push([h("Gift"),h("Stars",E.stars,"i")])),E.id&&V.push([h("Stars.Transaction.Id"),r.Ay.createElement(r.Ay.Fragment,null,r.Ay.createElement("div",{className:"tMF8VIOM",onClick:()=>{(0,pe.eM)(E.id),c({message:h("StarsTransactionIDCopied")})}},E.id),r.Ay.createElement(p.A,{className:"voCttFzS",name:"copy"}))]),V.push([h("Stars.Transaction.Date"),(0,F.L2)(1e3*E.date,h.code,!0)]);const q=h("lng_credits_box_out_about").split("{link}");return{header:y?z:J,tableData:V,footer:r.Ay.createElement("span",{className:"KgzPpgS6"},q[0],r.Ay.createElement(f.A,{url:h("StarsTOSLink"),text:h("lng_credits_summary_options_about_link")}),q[1])}}),[E,h,g,a,i,l]),b=(0,ce.A)(N)||N;return r.Ay.createElement(fe.A,{isOpen:Boolean(E),className:"IzhfRIWu",hasBackdrop:"starGiftUnique"===E?.starGift?.type,header:b?.header,tableData:b?.tableData,footer:b?.footer,buttonText:h("OK"),onClose:y})}))),ve="oBLHWBtJ",Ne=(0,r.ph)((0,n.EK)(((e,t)=>{let{modal:a}=t;const r=a?.subscription.peerId;return{peer:r?(0,i.PVB)(e,r):void 0}}))((e=>{let{modal:t,peer:a}=e;const{closeStarsSubscriptionModal:s,fulfillStarsSubscription:i,changeStarsSubscription:l,checkChatInvite:c,loadStarStatus:m,openInvoice:p}=(0,n.ko)(),g=(0,u.A)(),h=(0,B.A)(),{subscription:E}=t||{},S=(0,r.Kr)((()=>{if(!E)return"hidden";if(E.canRefulfill)return"refulfill";const e=E.until>Date.now()/1e3;if(e&&!E.isCancelled)return"cancel";if(e&&E.isCancelled)return"renew";const t=E.chatInviteHash||E.invoiceSlug;return!e&&t?"restart":"ok"}),[E]),N=(0,d.A)((()=>{if(E){switch(S){case"refulfill":i({id:E.id});break;case"restart":E.chatInviteHash?c({hash:E.chatInviteHash}):E.invoiceSlug&&p({type:"slug",slug:E.invoiceSlug}),m();break;case"renew":l({id:E.id,isCancelled:!1});break;case"cancel":l({id:E.id,isCancelled:!0})}s()}})),k=(0,r.Kr)((()=>{if(!E||!a)return;const{pricing:e,until:t,isCancelled:n,canRefulfill:s,photo:i,title:l,hasBotCancelled:c}=E,m=(0,C.mO)(a),d=r.Ay.createElement("div",{className:"E3R22yAI"},r.Ay.createElement("div",{className:"wuTMXDP9"},r.Ay.createElement(A.A,{peer:i?void 0:a,webPhoto:i,size:"giant"}),r.Ay.createElement(R.A,{className:"enRetSny",type:"gold",size:"adaptive"})),r.Ay.createElement("img",{className:(0,o.A)("zGCayu45"),src:v,alt:"",draggable:!1}),r.Ay.createElement("h1",{className:"qdydQHgc"},l||g("StarsSubscriptionTitle")),r.Ay.createElement("p",{className:"FI6rEJlK"},h("StarsPerMonth",{amount:e.amount},{withNodes:!0,specialReplacement:{[b.Cyx]:r.Ay.createElement(R.A,{className:"J8HIcN6k",size:"adaptive",type:"gold"})}}))),u=[];u.push([g(m?"StarsSubscriptionBot":"StarsSubscriptionChannel"),{chatId:a.id}]),l&&u.push([g("StarsSubscriptionBotProduct"),l]);const p=t<Date.now()/1e3;u.push([g(p?"StarsSubscriptionUntilExpired":n?"StarsSubscriptionUntilExpires":"StarsSubscriptionUntilRenews"),(0,F.L2)(1e3*t,g.code,!0)]);const k=h("StarsTransactionTOS",{link:r.Ay.createElement(f.A,{url:h("StarsTransactionTOSLink"),text:h("StarsTransactionTOSLinkText")})},{withNodes:!0});return{header:d,tableData:u,footer:r.Ay.createElement("span",{className:"GMWMuWCr"},r.Ay.createElement("p",{className:ve},k),n&&r.Ay.createElement("p",{className:"nkwiG25Q"},g(c?"StarsSubscriptionBotCancelledText":"StarsSubscriptionCancelledText")),s&&r.Ay.createElement("p",{className:ve},g("StarsSubscriptionRefulfillInfo",(0,F.L2)(1e3*t,g.code,!0))),!n&&!s&&p&&r.Ay.createElement("p",{className:ve},g("StarsSubscriptionExpiredInfo",(0,F.L2)(1e3*t,g.code,!0))),!n&&!s&&!p&&r.Ay.createElement("p",{className:ve},g("StarsSubscriptionCancelInfo",(0,F.L2)(1e3*t,g.code,!0))),"hidden"!==S&&r.Ay.createElement(y.A,{size:"smaller",color:"cancel"===S?"danger":"primary",isText:"cancel"===S,onClick:N},g("cancel"===S?"StarsSubscriptionCancel":"refulfill"===S?"StarsSubscriptionRefulfill":"restart"===S?"StarsSubscriptionAgain":"renew"===S?"StarsSubscriptionRenew":"OK")))}}),[S,h,g,a,E]),I=(0,ce.A)(k)||k;return r.Ay.createElement(fe.A,{isOpen:Boolean(E),className:"eR_RZfGB",header:I?.header,tableData:I?.tableData,footer:I?.footer,onClose:s})})));var be=a(43874),Ce=a(34431),ke=a(19806),Ie=a(22699),Ge=a(24433),Pe=a(32581),we=a(66644),Te=a(15283),Be=a(93545),Me=a(68292),xe=a(85118);const Ue={root:"CuBAw2yg",slider:"euOOAbZi",sparkles:"_L1YQTIP",progress:"kwK0cNPX",floatingBadgeWrapper:"uvlMoXj0",floatingBadge:"BGSDWAYc",floatingBadgeText:"qqQan8uF",floatingBadgeTriangle:"mIdJOmsB"},De=[50,100,500,1e3,2e3,5e3,1e4];function Oe(e,t){const a=e.findIndex((e=>t<=e)),r=e[a-1]||1,n=e[a]||e[e.length-1];return a+(t-r)/(n-r)}function Re(e,t){const a=Math.floor(t),r=e[a-1]||1,n=r+((e[a]||e[e.length-1])-r)*(t-a);return Math.round(n)}const Ke=(0,r.ph)((e=>{let{maxValue:t,defaultValue:a,className:n,onChange:s}=e;const i=(0,r.li)(null),l=(0,r.Kr)((()=>{const e=[];for(let a=0;a<De.length;a++)if(De[a]<t&&e.push(De[a]),De[a]>=t){e.push(t);break}return e}),[t]),[c,m]=(0,r.J0)(0);(0,Te.A)((()=>{m(Oe(l,a))}));const u=(0,d.A)((()=>{const e=i.current;if(!e)return;const t=e.parentElement;(0,we.YS)((()=>{const a=t.offsetLeft+e.offsetWidth/2,r=t.offsetLeft+t.offsetWidth-e.offsetWidth/2;(0,we.RK)((()=>{t.style.setProperty("--_min-x",`${a}px`),t.style.setProperty("--_max-x",`${r}px`)}))}))}));(0,Be.A)(i,u);const A=(0,d.A)((e=>{const t=Number(e.currentTarget.value);m(t),s(Re(l,t))}));return r.Ay.createElement("div",{className:(0,o.A)(Ue.root,n),style:"--progress: "+c/l.length},r.Ay.createElement("div",{className:Ue.floatingBadgeWrapper},r.Ay.createElement("div",{className:Ue.floatingBadge,ref:i},r.Ay.createElement("div",{className:Ue.floatingBadgeText},r.Ay.createElement(p.A,{name:"star",className:Ue.floatingBadgeIcon}),r.Ay.createElement(Me.A,{text:(0,z.Sm)(Re(l,c))})),r.Ay.createElement("svg",{className:Ue.floatingBadgeTriangle,width:"28",height:"28",viewBox:"0 0 28 28",fill:"none"},r.Ay.createElement("defs",null,r.Ay.createElement("linearGradient",{id:"StarBadgeTriangle",x1:"0",x2:"1",y1:"0",y2:"0"},r.Ay.createElement("stop",{offset:"-50%","stop-color":"#FFAA00"}),r.Ay.createElement("stop",{offset:"150%","stop-color":"#FFCD3A"}))),r.Ay.createElement("path",{d:"m 28,4 v 9 c 0.0089,7.283278 -3.302215,5.319646 -6.750951,8.589815 l -5.8284,5.82843 c -0.781,0.78105 -2.0474,0.78104 -2.8284,0 L 6.7638083,21.589815 C 2.8288652,17.959047 0.04527024,20.332086 0,13 V 4 C 0,4 0.00150581,0.97697493 3,1 5.3786658,1.018266 22.594519,0.9142007 25,1 c 2.992326,0.1067311 3,3 3,3 z",fill:"url(#StarBadgeTriangle)"})))),r.Ay.createElement("div",{className:Ue.progress}),r.Ay.createElement(xe.A,{preset:"progress",className:Ue.sparkles}),r.Ay.createElement("input",{className:Ue.slider,type:"range",min:0,max:l.length,defaultValue:Oe(l,a),step:"any",onChange:A}))})),Le={content:"RdhRpsCn",title:"yzbjj73U",slider:"xePPMXOI",description:"BlpfdOtK",itemInfo:"nS9V516D",itemTitle:"sH5Nukjy",itemSubtitle:"dHlNODTI",itemIcon:"H_iHihXU",sendAsPeerMenuButton:"zxsRaWYV",buttonDownIcon:"zrwUUELS",sendAsPeerMenuBubble:"X1PB6mhQ",sendAsPeerMenu:"Px1MDij9",sendAsPeersMenuContainer:"Al1nfhHJ",headerControlPanel:"vu90kSL_",separator:"uhQLUjmo",checkBox:"Mc3bVeF0",topLabel:"bnou4CpV",top:"QludQDKR",topBadge:"JBF9pTUK",buttonStar:"NJJFuym9",topPeer:"Ty4Ud_Rd",disclaimer:"KRvkHeo1"},Fe={avatarIcon:"author-hidden",customPeerAvatarColor:"#9eaab5",isCustomPeer:!0,titleKey:"StarsReactionAnonymous"},ze=(0,r.ph)((0,n.EK)(((e,t)=>{let{modal:a}=t;const r=a&&(0,i.hds)(e,a.chatId),n=a&&(0,i.O5q)(e,a.chatId,a.messageId),s=e.stars?.balance,o=e.appConfig?.paidReactionMaxAmount||2500,l=e.settings.paidReactionPrivacy,c=r?.sendPaidReactionsAsPeerIds,m=e.currentUserId;return{chat:r,message:n,starBalance:s,maxAmount:o,defaultPrivacy:l,sendPaidReactionsAsPeerIds:c,currentUserId:m,currentUser:(0,i.mBe)(e,m)}}))((e=>{let{modal:t,chat:a,message:l,maxAmount:m,starBalance:h,defaultPrivacy:E,sendPaidReactionsAsPeerIds:S,currentUserId:v,currentUser:N}=e;const{closePaidReactionModal:k,addLocalPaidReaction:I,loadSendPaidReactionsAs:G}=(0,n.ko)(),[P,w]=(0,r.J0)(50),[M,x,U]=(0,T.A)(),[D,O]=(0,r.J0)(!0),[R,K]=(0,r.J0)(v),F=a?.id,J=R?(0,i.PVB)((0,n.mS)(),R):N,V=(0,u.A)(),{isMobile:H}=(0,be.Ay)(),q=(0,B.A)(),j=(0,d.A)((e=>{O(!e.target.checked)})),W=(0,d.A)((e=>{w(e),x()}));(0,r.vJ)((()=>{F&&!S&&G({chatId:F})}),[F,S]);const _=(0,r.Kr)((()=>{const e=S?.map((e=>e.id)).filter((e=>e!==F));return e?.unshift(v),e}),[S,F,v]),Q=_&&_.length>1;(0,r.vJ)((()=>{t||U()}),[t]),(0,r.vJ)((()=>{const e=l?.reactions?.topReactors?.find((e=>e.isMy));if(e)return O(Boolean(e.isAnonymous)),void(e.peerId&&K(e.peerId));O("anonymous"===E?.type||!1),"peer"===E?.type&&_?.includes(E.peerId)?K(E.peerId):K(v)}),[E,l?.reactions?.topReactors,_,v]);const X=(0,d.A)((()=>{t&&(I({chatId:t.chatId,messageId:t.messageId,count:P,isPrivate:D,peerId:D||R===v?void 0:R,shouldIgnoreDefaultPrivacy:!0}),k())})),Y=(0,d.A)((e=>{O(!1),K(e)})),Z=(0,d.A)((e=>{const t=(0,i.PVB)((0,n.mS)(),e),a=R===e&&!D;if(t)return r.Ay.createElement(Ge.A,{onClick:()=>Y(e)},r.Ay.createElement(A.A,{size:"small",peer:t}),r.Ay.createElement("div",{className:(0,o.A)(Le.itemInfo)},r.Ay.createElement(Ce.A,{className:Le.itemTitle,peer:t,noFake:!0,noVerified:!0}),r.Ay.createElement("span",{className:Le.itemSubtitle},(0,C.mO)(t)?q("PeerPersonalAccount"):q("PeerChannel"))),r.Ay.createElement(p.A,{className:Le.itemIcon,name:a?"check":"placeholder"}))})),$=(0,r.Kr)((()=>e=>{let{onTrigger:t,isOpen:a}=e;return r.Ay.createElement(y.A,{ripple:!H,size:"smaller",color:"translucent",className:(0,o.A)(Le.sendAsPeerMenuButton,a?"active":""),onClick:t,ariaLabel:q("AccDescrOpenMenu2")},r.Ay.createElement(A.A,{size:"mini",peer:D?Fe:J}),r.Ay.createElement(p.A,{name:"down",className:Le.buttonDownIcon}))}),[H,q,J,D]),ee=(0,r.Kr)((()=>{if(Q)return r.Ay.createElement(Ie.A,{className:Le.sendAsPeerMenu,bubbleClassName:Le.sendAsPeerMenuBubble,trigger:$,positionX:"right",autoClose:!0},_.map((e=>Z(e))))}),[$,_,Q]),te=(0,r.Kr)((()=>{const e=(0,n.mS)(),t=l?.reactions?.topReactors;if(!t)return;const a=[];let r=!1,s=0;if(t.forEach((t=>{const n=t.peerId?(0,i.PVB)(e,t.peerId):void 0;if(!n&&!t.isAnonymous&&!t.isMy)return;if(t.isMy&&(s=t.count),t.isMy&&(t.peerId!==R||t.isAnonymous&&!D))return;const o=R===t.peerId||D&&t.isAnonymous;o&&(r=!0),a.push({amount:t.count,localAmount:o&&M?P:0,isMy:t.isMy,isAnonymous:t.isAnonymous,user:n})})),!r){const t=(0,i.PVB)(e,R);a.push({amount:s,localAmount:M?P:0,isMy:!0,user:t})}return a.sort(((e,t)=>t.amount+t.localAmount-(e.amount+e.localAmount))),a.slice(0,3)}),[M,l?.reactions?.topReactors,P,R,D]),ae=a&&(0,s.F9N)(V,a);return r.Ay.createElement(g.A,{isOpen:Boolean(t),onClose:k,isSlim:!0,hasAbsoluteCloseButton:!0,contentClassName:Le.content,isLowStackPriority:!0},r.Ay.createElement("div",{className:Le.sendAsPeersMenuContainer},ee),r.Ay.createElement("div",{className:Le.headerControlPanel},r.Ay.createElement(L,{balance:h,className:Le.modalBalance,withAddButton:!0})),r.Ay.createElement(Ke,{className:Le.slider,defaultValue:50,maxValue:m,onChange:W}),r.Ay.createElement("h3",{className:Le.title},V("StarsReactionTitle")),r.Ay.createElement("div",{className:Le.description},(0,c.A)(V("StarsReactionText",ae),["simple_markdown","emoji"])),r.Ay.createElement(Pe.A,null,te&&r.Ay.createElement("div",{className:Le.topLabel},V("StarsReactionTopSenders"))),te&&r.Ay.createElement("div",{className:Le.top},te.map((e=>{const t=(0,z.Sm)(e.amount+e.localAmount),a=e.isAnonymous||!e.user||e.isMy&&D?Fe:e.user,n="isCustomPeer"in a?V(a.titleKey):a&&(0,s.F9N)(V,a);return r.Ay.createElement(me.A,{className:Le.topPeer,key:`${e.user?.id||"anonymous"}-${t}`,peer:a,badgeText:t,badgeIcon:"star",badgeClassName:Le.topBadge,text:n})}))),te&&r.Ay.createElement(Pe.A,{className:Le.separator}),r.Ay.createElement(ke.A,{className:(0,o.A)(Le.checkBox,"dialog-checkbox"),checked:!D,onChange:j,label:V("StarsReactionShowMeInTopSenders")}),r.Ay.createElement(y.A,{size:"smaller",onClick:X},q("SendPaidReaction",{amount:P},{withNodes:!0,specialReplacement:{[b.Cyx]:r.Ay.createElement(p.A,{className:Le.buttonStar,name:"star"})}})),r.Ay.createElement("p",{className:Le.disclaimer},q("StarsReactionTerms",{link:r.Ay.createElement(f.A,{text:q("StarsReactionLinkText"),url:q("StarsReactionLink")})},{withNodes:!0})))})));var Je=a(37836),Ve=a(5912),He=a(23174),qe=a(65632),je=a(20333),We=a(88668),_e=a(96530),Qe=a(22720),Xe=a(63152),Ye=a(94079);const Ze="zZUpGRSI",$e="nTPAv1ci",et=(0,r.ph)((0,n.EK)(((e,t)=>{let{peerId:a}=t;const r=(0,i.SJA)(e),{isBlurred:n,patternColor:s,background:o,backgroundColor:l}=e.settings.themes[r]||{},c=(0,i.PVB)(e,a),m=(0,i.nTw)(e);return{peer:c,theme:r,isBackgroundBlurred:n,patternColor:s,customBackground:o,backgroundColor:l,captionLimit:e.appConfig?.starGiftMaxMessageLength,currentUserId:e.currentUserId,isPaymentFormLoading:m.isPaymentFormLoading}}))((function(e){let{gift:t,peerId:a,peer:i,captionLimit:c,theme:m,isBackgroundBlurred:u,patternColor:A,backgroundColor:p,customBackground:f,currentUserId:g,isPaymentFormLoading:h}=e;const{sendStarGift:E,openInvoice:S,openGiftUpgradeModal:v}=(0,n.ko)(),N=(0,B.A)(),[b,k]=(0,r.J0)(""),[I,G]=(0,r.J0)(!1),[P,w]=(0,r.J0)(!1),T=(0,qe.A)(m,f),M="id"in t,x=i&&(0,C.mO)(i),U=a===g,D=(0,r.Kr)((()=>M?{id:-1,chatId:"0",isOutgoing:!1,senderId:g,date:Math.floor(Date.now()/1e3),content:{action:{mediaType:"action",type:"starGift",message:b?.length?{text:b}:void 0,isNameHidden:I||void 0,starsToConvert:t.starsToConvert,canUpgrade:P||void 0,alreadyPaidUpgradeStars:P?t.upgradeStars:void 0,gift:t,peerId:a,fromId:g}}}:{id:-1,chatId:"0",isOutgoing:!1,senderId:g,date:Math.floor(Date.now()/1e3),content:{action:{mediaType:"action",type:"giftPremium",currency:t.currency,amount:t.amount,months:t.months,message:b?{text:b}:void 0}}}),[g,t,b,M,I,P,a]),O=(0,d.A)((e=>{k(e.target.value)})),R=(0,d.A)((()=>{G(!I)})),K=(0,d.A)((()=>{w(!P)})),L=(0,d.A)((()=>{M&&v({giftId:t.id,peerId:a})})),F=(0,d.A)((()=>{M?E({peerId:a,shouldHideName:I,gift:t,message:b?{text:b}:void 0,shouldUpgrade:P}):S({type:"giftcode",userIds:[a],currency:t.currency,amount:t.amount,option:t,message:b?{text:b}:void 0})})),z=(0,o.A)("ZORVRSG3","soDpW2YR",f&&"Eny_G3JI",p&&"TkJZPU2u",f&&u&&"M6k91TdM");return r.Ay.createElement("div",{className:(0,o.A)("jKOG0It6","custom-scroll")},r.Ay.createElement("div",{className:(0,o.A)("CB1mxsgp","MessageList"),inert:!0,style:(0,ye.A)(`--pattern-color: ${A}`,p&&`--theme-background-color: ${p}`)},r.Ay.createElement("div",{className:z,style:T?`--custom-background: ${T}`:void 0}),r.Ay.createElement(We.A,{key:M?t.id:t.months,message:D,threadId:He.l3,appearanceOrder:0})),function(){const e=c?c-b.length:void 0,a=(0,s.F9N)(N,i);return r.Ay.createElement("div",{className:"Y68CEIKn"},r.Ay.createElement(Ye.A,{className:"o5r2IPoA",onChange:O,value:b,label:N("GiftMessagePlaceholder"),maxLength:c,maxLengthIndicator:e&&e<50?e.toString():void 0}),M&&t.upgradeStars&&r.Ay.createElement(Qe.A,{className:Ze,narrow:!0,ripple:!0,onClick:K},r.Ay.createElement("span",null,N("GiftMakeUnique",{stars:(0,le.U)(N,t.upgradeStars,{className:"zAee80Dv"})},{withNodes:!0})),r.Ay.createElement(Xe.A,{checked:P,onChange:K,label:N("GiftMakeUniqueAcc")})),M&&t.upgradeStars&&r.Ay.createElement("div",{className:$e},x?N("GiftMakeUniqueDescription",{user:a,link:r.Ay.createElement(_e.A,{isPrimary:!0,onClick:L},N("GiftMakeUniqueLink"))},{withNodes:!0}):N("GiftMakeUniqueDescriptionChannel",{peer:a,link:r.Ay.createElement(_e.A,{isPrimary:!0,onClick:L},N("GiftMakeUniqueLink"))},{withNodes:!0})),M&&r.Ay.createElement(Qe.A,{className:Ze,narrow:!0,ripple:!0,onClick:R},r.Ay.createElement("span",null,N("GiftHideMyName")),r.Ay.createElement(Xe.A,{checked:I,onChange:R,label:N("GiftHideMyName")})),M&&r.Ay.createElement("div",{className:$e},U?N("GiftHideNameDescriptionSelf"):x?N("GiftHideNameDescription",{receiver:a}):N("GiftHideNameDescriptionChannel")))}(),r.Ay.createElement("div",{className:"ATowWJ60"}),function(){const e=M?(0,le.U)(N,t.stars+(P?t.upgradeStars:0),{asFont:!0}):(0,l.v)(N,t.amount,t.currency);return r.Ay.createElement("div",{className:"jxWZSvet"},M&&t.availabilityRemains&&r.Ay.createElement(je.A,{isPrimary:!0,progress:t.availabilityRemains/t.availabilityTotal,rightText:N("GiftSoldCount",{count:t.availabilityTotal-t.availabilityRemains}),leftText:N("GiftLeftCount",{count:t.availabilityRemains}),className:"mWzLu0c0"}),r.Ay.createElement(y.A,{className:"IDuhjrne",size:"smaller",onClick:F,isLoading:h},N("GiftSend",{amount:e},{withNodes:!0})))}())})));var tt=a(87049);const at="G1mBmzxs",rt="a8no5WH0",nt=(0,r.ph)((0,n.EK)(((e,t)=>{let{option:a}=t;return{sticker:(0,i.t0O)(e,a.months),canPlayAnimatedEmojis:(0,i.BWX)(e)}}))((function(e){let{sticker:t,canPlayAnimatedEmojis:a,baseMonthAmount:n,option:s,onClick:i}=e;const{months:o,amount:c,currency:m}=s,u=(0,B.A)(),A=(0,d.A)((()=>{i(s)})),p=Math.floor(c/o),f=n&&n>p?Math.ceil(100-p/(n/100)):void 0;return r.Ay.createElement("div",{className:at,tabIndex:0,role:"button",onClick:A},r.Ay.createElement(Q.A,{sticker:t,play:a,noLoop:!0,nonInteractive:!0,size:86}),function(){const e=12===o?u("Years",{count:1},{pluralValue:1}):u("Months",{count:o},{pluralValue:o});return r.Ay.createElement("div",{className:"rn9aWFNA"},e)}(),r.Ay.createElement("div",{className:"q4_ydkAx"},u("PremiumGiftDescription")),r.Ay.createElement(y.A,{className:rt,nonInteractive:!0,size:"tiny",pill:!0,fluid:!0},(0,l.A)(c,m)),Boolean(f)&&r.Ay.createElement(tt.A,{color:"red",text:u("GiftDiscount",{percent:f})}))}))),st=(0,r.ph)((function(e){let{gift:t,observeIntersection:a,onClick:s}=e;const{openGiftInfoModal:i}=(0,n.ko)(),l=(0,r.li)(null),c=(0,B.A)(),[m,u]=(0,T.A)(),{stars:A,isLimited:f,isSoldOut:g,sticker:h}=t,E=(0,d.A)((()=>{g?i({gift:t}):s(t)}));return(0,Ve.mv)(l,a,(e=>{e.isIntersecting&&u()})),r.Ay.createElement("div",{ref:l,className:(0,o.A)(at,"f5ArEO1S"),tabIndex:0,role:"button",onClick:E},r.Ay.createElement(Q.A,{sticker:h,noLoop:!0,play:m,nonInteractive:!0,size:90}),r.Ay.createElement(y.A,{className:rt,nonInteractive:!0,size:"tiny",color:"stars",withSparkleEffect:!0,pill:!0,fluid:!0},r.Ay.createElement(p.A,{name:"star",className:"DvJLTVFU"}),r.Ay.createElement("div",{className:"sbo2dMcH"},A)),f&&!g&&r.Ay.createElement(tt.A,{color:"blue",text:c("GiftLimited")}),g&&r.Ay.createElement(tt.A,{color:"red",text:c("GiftSoldOut")}))}));var it=a(36838);const ot=(0,r.ph)((0,n.EK)((e=>{const{starGifts:t}=e;return{idsByCategory:t?.idsByCategory}}))((e=>{let{idsByCategory:t,onCategoryChanged:a}=e;const n=(0,r.li)(null),s=(0,B.A)(),i=(0,r.Kr)((()=>t&&Object.keys(t).filter((e=>"all"!==e&&"limited"!==e)).map(Number).sort(((e,t)=>e-t))),[t]),[l,c]=(0,r.J0)("all");function m(e){return r.Ay.createElement("div",{className:(0,o.A)("dO7FKYY4",l===e&&"B2lEJk1v"),onClick:()=>function(e){c(e),a(e)}(e)},Number.isInteger(e)&&r.Ay.createElement(R.A,{className:"Pb7AU805",type:"gold",size:"middle"}),function(e){return"all"===e?s("AllGiftsCategory"):"stock"===e?s("StockGiftsCategory"):"limited"===e?s("LimitedGiftsCategory"):e}(e))}return(0,it.A)(n,void 0,!0),r.Ay.createElement("div",{ref:n,className:(0,o.A)("cUjwvN00","no-scrollbar")},m("all"),m("limited"),m("stock"),i?.map(m))}))),lt={root:"tJK1W0pJ",transition:"pP8TxefR",content:"o3V1HqbL",main:"cVXqeu9P",giftSection:"v4eKefwN",section:"EqfarEYb",starGiftsContainer:"OQX3GZl5",premiumGiftsGallery:"n40m3BK2",header:"iqqoyRgW",headerSlide:"BTWhJUQB",headerText:"lLRmbpIu",hiddenHeader:"XgGzn1cQ",commonHeaderText:"ybZo03if",closeButton:"r_Y5uG1T",balance:"soqAknia",avatars:"N_7tYJKr",logoBackground:"ieK4TzSb",center:"Ey5gX40t",description:"ZioU5h_k",starGiftsDescription:"gFgzS8pV",boostIcon:"Qi2YR6Dz",optionBottom:"RTbClMKE",secondaryInfo:"g0R9GSNq",footer:"J3Gju3bv",starGiftsTransition:"kB6IyXqS"},ct=(0,Je.nF)((e=>e()),200,!0),mt=(0,r.ph)((0,n.EK)(((e,t)=>{let{modal:a}=t;const{starGifts:r,stars:n,currentUserId:s}=e,o=a?.forPeerId?(0,i.PVB)(e,a.forPeerId):void 0,l=Boolean(s&&a?.forPeerId===s);return{boostPerSentGift:e.appConfig?.boostsPerSentGift,starGiftsById:r?.byId,starGiftIdsByCategory:r?.idsByCategory,starBalance:n?.balance,peer:o,isSelf:l}}))((e=>{let{modal:t,starGiftsById:a,starGiftIdsByCategory:i,starBalance:l,peer:c,isSelf:p}=e;const{closeGiftModal:h}=(0,n.ko)(),E=(0,r.li)(null),S=(0,r.li)(null),N=(0,r.li)(null),b=(0,r.li)(null),k=Boolean(t),I=(0,m.A)(t),G=c&&(0,C.mO)(c)?c:void 0,P=c&&(0,C.vj)(c)?c:void 0,[w,T]=(0,r.J0)(),[M,x]=(0,r.J0)(!1),[D,O]=(0,r.J0)(!1),[R,K]=(0,r.J0)(!1),[F,z]=(0,r.J0)("all"),J=(0,u.A)(),V=(0,B.A)(),H=(0,r.Kr)((()=>I?.gifts?.sort(((e,t)=>e.months-t.months)).filter((e=>1===e.users))),[I]),q=(0,r.Kr)((()=>H?.reduce(((e,t)=>e.amount<t.amount?e:t))),[H]),{observe:j}=(0,Ve.BL)({rootRef:b,throttleMs:200,isDisabled:!k}),W=Boolean(w),_=W||M,Q=W?R:D;(0,r.vJ)((()=>{k||(x(!1),T(void 0),z("all"))}),[k]);const X=(0,d.A)((e=>{if(W)return;const t=e.currentTarget;ct((()=>{const{scrollTop:e}=t;if(x(e>150),S.current&&N.current){const{top:e}=N.current.getBoundingClientRect(),{top:t}=S.current.getBoundingClientRect();O(e-t<=0)}}))})),Y=V("GiftPremiumDescription",{user:(0,s.YgS)(G),link:r.Ay.createElement(f.A,{text:V("GiftPremiumDescriptionLinkCaption"),url:V("GiftPremiumDescriptionLink")})},{withNodes:!0}),Z=P?V("StarGiftDescriptionChannel",{peer:(0,s.F9N)(V,P)},{withNodes:!0,withMarkdown:!0}):p?V("StarGiftDescriptionSelf",void 0,{withNodes:!0,renderTextFilters:["br"]}):V("StarGiftDescription",{user:(0,s.YgS)(G)},{withNodes:!0,withMarkdown:!0}),$=(0,d.A)((e=>{T(e),K("id"in e)})),ee=(0,d.A)((e=>{z(e)})),te=(0,d.A)((()=>{W?T(void 0):h()})),ae=W,re=(0,o.A)("animated-close-icon",ae&&"state-back");return r.Ay.createElement(g.A,{dialogRef:E,onClose:h,isOpen:k,isSlim:!0,contentClassName:lt.content,className:(0,o.A)(lt.modalDialog,lt.root),isLowStackPriority:!0},r.Ay.createElement(y.A,{className:lt.closeButton,round:!0,color:"translucent",size:"smaller",onClick:te,ariaLabel:J(ae?"Common.Back":"Common.Close")},r.Ay.createElement("div",{className:re})),r.Ay.createElement(L,{className:lt.balance,balance:l,withAddButton:!0}),r.Ay.createElement("div",{className:(0,o.A)(lt.header,!_&&lt.hiddenHeader)},r.Ay.createElement(U.Ay,{name:"slideVerticalFade",activeKey:Number(Q),slideClassName:lt.headerSlide},r.Ay.createElement("h2",{className:lt.commonHeaderText},V(Q?p?"StarsGiftHeaderSelf":"StarsGiftHeader":"GiftPremiumHeader")))),r.Ay.createElement(U.Ay,{ref:S,className:lt.transition,name:"pushSlide",activeKey:W?1:0},!W&&r.Ay.createElement("div",{ref:b,className:(0,o.A)(lt.main,"custom-scroll"),onScroll:X},r.Ay.createElement("div",{className:lt.avatars},r.Ay.createElement(A.A,{size:100,peer:c}),r.Ay.createElement("img",{className:lt.logoBackground,src:v,alt:"",draggable:!1})),!p&&!P&&r.Ay.createElement("h2",{className:(0,o.A)(lt.headerText,lt.center)},V("GiftPremiumHeader")),!p&&!P&&r.Ay.createElement("p",{className:(0,o.A)(lt.description,lt.center)},Y),!p&&!P&&r.Ay.createElement("div",{className:lt.premiumGiftsGallery},H?.map((e=>r.Ay.createElement(nt,{option:e,baseMonthAmount:q?Math.floor(q.amount/q.months):void 0,onClick:$})))),r.Ay.createElement("h2",{ref:N,className:(0,o.A)(lt.headerText,lt.center)},V(p?"StarsGiftHeaderSelf":"StarsGiftHeader")),r.Ay.createElement("p",{className:(0,o.A)(lt.description,lt.starGiftsDescription,lt.center)},Z),r.Ay.createElement(ot,{onCategoryChanged:ee}),r.Ay.createElement(U.Ay,{name:"zoomFade",activeKey:(ne=F,"all"===ne?-2:"limited"===ne?-1:"stock"===ne?0:ne),className:lt.starGiftsTransition},r.Ay.createElement("div",{className:lt.starGiftsContainer},a&&i?.[F].map((e=>{const t=a[e];return r.Ay.createElement(st,{gift:t,observeIntersection:j,onClick:$})}))))),W&&I?.forPeerId&&r.Ay.createElement(et,{gift:w,peerId:I.forPeerId})));var ne})));const dt=(0,r.ph)((0,n.EK)((e=>{const{currentUserId:t}=e;return{currentUserId:t,userIds:e.contactList?.userIds}}))((e=>{let{modal:t,currentUserId:a,userIds:s}=e;const{closeGiftRecipientPicker:o,openGiftModal:l}=(0,n.ko)(),c=(0,u.A)(),m=t,[A,p]=(0,r.J0)(""),f=(0,r.Kr)((()=>{const e=(0,n.mS)(),t=s?s.concat(a):void 0,r=t?(0,C.PU)({ids:t,query:A}):[];return(0,I.A)((0,k.Am)(r).filter((t=>(0,i.X2D)(e,t))),void 0,[a])}),[a,A,s]),y=(0,d.A)((e=>{l({forUserId:e}),o()}));return r.Ay.createElement(P.A,{className:"W3JMs1YE",isOpen:m,onClose:o,title:c("GiftTelegramPremiumOrStarsTitle"),hasCloseButton:!0,shouldAdaptToSearch:!0,withFixedHeight:!0},r.Ay.createElement(G.A,{className:"wOipz1Y_",itemIds:f,filterValue:A,filterPlaceholder:c("Search"),onSelectedIdChange:y,onFilterChange:p,isSearchable:!0,withDefaultPadding:!0,withStatus:!0,forceShowSelf:!0}))})));var ut=a(80140),At=a(18501),pt=a(94189);const ft={modal:"nnublcCk",header:"p7FTs7_p",title:"pIbzzTir",description:"CCPfr26t",soldOut:"kjWcRp4W",footer:"bho0GTYt",footerDescription:"VUylTszM",unknown:"zDauXmpS",giftValue:"w_E4LkUj",uniqueAttribute:"OJQnkf17",uniqueGift:"I6o_pGAm",starAmountIcon:"_5guecUe",modalHeader:"ie9tImaj",modalCloseButton:"p38RBGdC",ownerAddress:"DavMRg4Q",copyIcon:"SLX5tX8C"},yt=(0,r.ph)((0,n.EK)(((e,t)=>{let{modal:a}=t;const r=a?.gift,n=r&&"gift"in r,o=e.currentUserId,l=n&&r.fromId,c=l?(0,i.PVB)(e,l):void 0,m=a?.peerId?(0,i.PVB)(e,a.peerId):void 0,d=m&&(0,C.vj)(m)?m:void 0,u=d&&(0,s.ubU)(d,"postMessages"),A=(0,i.mBe)(e,o),p=A?.emojiStatus,f=e.collectibleEmojiStatuses?.statuses;return{fromPeer:c,targetPeer:m,currentUserId:o,starGiftMaxConvertPeriod:e.appConfig?.starGiftMaxConvertPeriod,tonExplorerUrl:e.appConfig?.tonExplorerUrl,hasAdminRights:u,currentUserEmojiStatus:p,collectibleEmojiStatuses:f}}))((e=>{let{modal:t,fromPeer:a,targetPeer:l,currentUserId:c,starGiftMaxConvertPeriod:g,hasAdminRights:h,currentUserEmojiStatus:E,collectibleEmojiStatuses:S,tonExplorerUrl:v}=e;const{closeGiftInfoModal:N,changeGiftVisibility:k,convertGiftToStars:I,openChatWithInfo:G,focusMessage:P,openGiftUpgradeModal:w,showNotification:M,openChatWithDraft:x,openGiftStatusInfoModal:U,setEmojiStatus:D,openGiftTransferModal:R}=(0,n.ko)(),[K,L,J]=(0,T.A)(),V=(0,B.A)(),H=(0,u.A)(),W=Boolean(t),_=(0,m.A)(t),X=(0,m.A)(a),Y=(0,m.A)(l),Z=Y&&(0,C.vj)(Y),{gift:$}=_||{},ee=$&&"gift"in $,te=ee?$:void 0,ae=te?.fromId===c,re=te&&g&&te.date+g-(0,ut.Fm)()||0,ne=Math.ceil(re/60/60/24),se=ee?$.gift:$,ie=se&&(0,j.yQ)(se),oe=re>0&&Boolean(te?.starsToConvert),ce="collectible"===E?.type?E.slug:void 0,me="starGiftUnique"===se?.type?se.slug:void 0,de=(0,r.Kr)((()=>{if(me)return`${b.jsp}nft/${me}`}),[me]),ue=(0,r.Kr)((()=>{if(me)return S?.find((e=>"collectible"===e.type&&e.slug===me))}),[me,S]),Ae=se&&"starGiftUnique"===se.type,ye=Ae&&ce===se.slug,he=ue&&!ye,Ee=Boolean(te?.upgradeMsgId),Se=!Ee&&te?.inputGift&&(Z?h:Y?.id===c),ve=(0,d.A)((()=>{N()})),Ne=(0,d.A)((()=>{de&&((0,pe.eM)(de),M({message:V("LinkCopied")}))})),be=(0,d.A)((()=>{de&&(x({text:{text:de}}),ve())})),Ce=(0,d.A)((()=>{"starGiftUnique"===te?.gift.type&&R({gift:te})})),ke=(0,d.A)((()=>{"starGiftUnique"===se?.type&&ue&&U({emojiStatus:ue})})),Pe=(0,d.A)((()=>{ye&&D({emojiStatus:{type:"regular",documentId:b.zNY}})})),we=(0,d.A)((()=>{if(!te?.upgradeMsgId||!Y)return;const{upgradeMsgId:e}=te;P({chatId:Y.id,messageId:e}),ve()})),Te=(0,d.A)((()=>{const{inputGift:e,isUnsaved:t}=te;k({gift:e,shouldUnsave:!t}),ve()})),Be=(0,d.A)((()=>{const{inputGift:e}=te;I({gift:e}),J(),ve()})),Me=(0,d.A)((()=>{te&&w({giftId:te.gift.id,gift:te})})),xe=(0,r.Kr)((()=>se&&(0,j.uc)(se)),[se]),Ue=(0,r.Kr)((()=>e=>{let{onTrigger:t,isMenuOpen:a}=e;return r.Ay.createElement(y.A,{round:!0,size:"smaller",color:"translucent-white",className:a?"active":"",onClick:t,ariaLabel:V("AriaMoreButton")},r.Ay.createElement(p.A,{name:"more"}))}),[V]),De=(0,d.A)((()=>Ee?r.Ay.createElement(y.A,{size:"smaller",onClick:we},V("GiftInfoViewUpgraded")):Se&&te?.alreadyPaidUpgradeStars&&!te.upgradeMsgId?r.Ay.createElement(y.A,{size:"smaller",isShiny:!0,onClick:Me},V("GiftInfoUpgradeForFree")):r.Ay.createElement(y.A,{size:"smaller",onClick:ve},V("OK")))),Oe=(0,r.Kr)((()=>{if(!$||!se)return;const{fromId:e,isNameHidden:t,starsToConvert:a,isUnsaved:l,isConverted:c,upgradeMsgId:m}=te||{},d=oe&&Boolean(a),u=t&&Y,g=(()=>{if(!te)return V("GiftInfoSoldOutDescription");if(!Z){if(te.upgradeMsgId)return V("GiftInfoDescriptionUpgraded");if(te.canUpgrade&&te.alreadyPaidUpgradeStars)return Se?V("GiftInfoDescriptionFreeUpgrade"):V("GiftInfoPeerDescriptionFreeUpgradeOut",{peer:(0,s.F9N)(V,Y)});if(Se||ae)return c&&d?Se?V("GiftInfoDescriptionConverted",{amount:a},{pluralValue:a,withNodes:!0,withMarkdown:!0}):V("GiftInfoPeerDescriptionOutConverted",{amount:a,peer:(0,s.F9N)(V,Y)},{pluralValue:a,withNodes:!0,withMarkdown:!0}):te.canUpgrade&&Se?d?V("GiftInfoDescriptionUpgrade",{amount:a},{pluralValue:a,withNodes:!0,withMarkdown:!0}):V("GiftInfoDescriptionUpgradeRegular"):Se?d?V("GiftInfoDescription",{amount:a},{withNodes:!0,withMarkdown:!0,pluralValue:a}):V("GiftInfoDescriptionRegular"):d?V("GiftInfoPeerDescriptionOut",{amount:a,peer:(0,s.F9N)(V,Y)},{withNodes:!0,withMarkdown:!0,pluralValue:a}):V("GiftInfoPeerDescriptionOutRegular",{peer:(0,s.F9N)(V,Y)})}})(),h=r.Ay.createElement(Ie.A,{className:"with-menu-transitions",trigger:Ue,positionX:"right"},r.Ay.createElement(Ge.A,{icon:"link-badge",onClick:Ne},V("CopyLink")),r.Ay.createElement(Ge.A,{icon:"forward",onClick:be},V("Share")),Se&&Ae&&r.Ay.createElement(Ge.A,{icon:"diamond",onClick:Ce},V("GiftInfoTransfer")),he&&r.Ay.createElement(Ge.A,{icon:"crown-wear",onClick:ke},V("GiftInfoWear")),ye&&r.Ay.createElement(Ge.A,{icon:"crown-take-off",onClick:Pe},V("GiftInfoTakeOff"))),E=r.Ay.createElement("div",{className:ft.modalHeader},r.Ay.createElement(y.A,{className:ft.modalCloseButton,round:!0,color:"translucent-white",size:"smaller",ariaLabel:V("Close"),onClick:ve},r.Ay.createElement(p.A,{name:"close"})),W&&h),S=Ae&&r.Ay.createElement("div",{className:(0,o.A)(ft.header,ft.uniqueGift)},r.Ay.createElement(ge,{backdropAttribute:xe.backdrop,patternAttribute:xe.pattern,modelAttribute:xe.model,title:se.title,subtitle:V("GiftInfoCollectible",{number:se.number})})),b=r.Ay.createElement("div",{className:ft.header},r.Ay.createElement(Q.A,{className:ft.giftSticker,sticker:ie,size:120}),r.Ay.createElement("h1",{className:ft.title},Ae?se.title:V(te?Se?"GiftInfoReceived":"GiftInfoTitle":"GiftInfoSoldOutTitle")),g&&r.Ay.createElement("p",{className:(0,o.A)(ft.description,!te&&"starGift"===se?.type&&ft.soldOut)},g)),C=[];if("starGift"===se.type){(e||t)&&C.push([V("GiftInfoFrom"),e?{chatId:e}:r.Ay.createElement(r.Ay.Fragment,null,r.Ay.createElement(A.A,{size:"small",peer:q.I5}),r.Ay.createElement("span",{className:ft.unknown},H(q.I5.titleKey)))]),te?.date&&C.push([V("GiftInfoDate"),(0,F.L2)(1e3*te.date,V.code,!0)]),se.firstSaleDate&&C.push([V("GiftInfoFirstSale"),(0,F.L2)(1e3*se.firstSaleDate,V.code,!0)]),se.lastSaleDate&&C.push([V("GiftInfoLastSale"),(0,F.L2)(1e3*se.lastSaleDate,V.code,!0)]);const n=se.stars+(te?.alreadyPaidUpgradeStars||0);C.push([V("GiftInfoValue"),r.Ay.createElement("div",{className:ft.giftValue},(0,le.U)(V,n,{className:ft.starAmountIcon}),Se&&oe&&Boolean(a)&&r.Ay.createElement(O.A,{onClick:L},V("GiftInfoConvert",{amount:a},{pluralValue:a})))]),se.availabilityTotal&&C.push([V("GiftInfoAvailability"),V("GiftInfoAvailabilityValue",{count:se.availabilityRemains||0,total:se.availabilityTotal},{pluralValue:se.availabilityRemains||0})]),se.upgradeStars&&!m&&C.push([V("GiftInfoStatus"),r.Ay.createElement("div",{className:ft.giftValue},V("GiftInfoStatusNonUnique"),Se&&r.Ay.createElement(O.A,{onClick:Me},V("GiftInfoUpgradeBadge")))]),te?.message&&C.push([void 0,(0,At.f)(te.message)])}if(Ae){const{ownerName:e,ownerAddress:t,ownerId:a}=se,{model:o,backdrop:l,pattern:c,originalDetails:m}=xe||{};if(t?C.push([V("GiftInfoOwner"),r.Ay.createElement("span",{className:ft.ownerAddress,onClick:()=>{(0,pe.eM)(t),M({message:{key:"WalletAddressCopied"},icon:"copy"})}},t,r.Ay.createElement(p.A,{className:ft.copyIcon,name:"copy"}))]):C.push([V("GiftInfoOwner"),a?{chatId:a,withEmojiStatus:!0}:e||""]),o&&C.push([V("GiftAttributeModel"),r.Ay.createElement("span",{className:ft.uniqueAttribute},o.name,r.Ay.createElement(O.A,null,(0,z.l9)(o.rarityPercent)))]),l&&C.push([V("GiftAttributeBackdrop"),r.Ay.createElement("span",{className:ft.uniqueAttribute},l.name,r.Ay.createElement(O.A,null,(0,z.l9)(l.rarityPercent)))]),c&&C.push([V("GiftAttributeSymbol"),r.Ay.createElement("span",{className:ft.uniqueAttribute},c.name,r.Ay.createElement(O.A,null,(0,z.l9)(c.rarityPercent)))]),C.push([V("GiftInfoAvailability"),V("GiftInfoIssued",{issued:se.issuedCount,total:se.totalCount})]),m){const{date:e,recipientId:t,message:a,senderId:o}=m,l=(0,n.mS)(),c=e=>{G({id:e}),N()},d=(0,i.PVB)(l,t),u=o?(0,i.PVB)(l,o):void 0,A=(0,F.L2)(1e3*e,V.code,!0),p=r.Ay.createElement(_e.A,{onClick:()=>c(t),isPrimary:!0},(0,s.F9N)(V,d));let f;if(u&&o!==t){const e=r.Ay.createElement(_e.A,{onClick:()=>c(u.id),isPrimary:!0},(0,s.F9N)(V,u));f=a?V("GiftInfoPeerOriginalInfoTextSender",{peer:p,sender:e,text:(0,At.f)(a),date:A},{withNodes:!0}):V("GiftInfoPeerOriginalInfoSender",{peer:p,date:A,sender:e},{withNodes:!0})}else f=a?V("GiftInfoPeerOriginalInfoText",{peer:p,text:(0,At.f)(a),date:A},{withNodes:!0}):V("GiftInfoPeerOriginalInfo",{peer:p,date:A},{withNodes:!0});C.push([void 0,r.Ay.createElement("span",null,f)])}}const k=v&&Ae&&se.giftAddress&&`${v}${se.giftAddress}`,I=r.Ay.createElement("div",{className:ft.footer},(Se||k)&&r.Ay.createElement("div",{className:ft.footerDescription},k&&r.Ay.createElement("div",null,V("GiftInfoTonText",{link:r.Ay.createElement(f.A,{url:k,shouldSkipModal:!0,text:V("GiftInfoTonLinkText")})},{withNodes:!0})),Se&&r.Ay.createElement("div",null,V(`GiftInfo${Z?"Channel":""}${l?"Hidden":"Saved"}`,{link:r.Ay.createElement(_e.A,{isPrimary:!0,onClick:Te},V("GiftInfoSaved"+(l?"Show":"Hide")))},{withNodes:!0})),u&&r.Ay.createElement("div",null,V("GiftInfoSenderHidden"))),De());return{modalHeader:Ae?E:void 0,header:Ae?S:b,tableData:C,footer:I}}),[$,te,Y,ie,V,Se,oe,ae,H,v,se,xe,De,Z,Ue,W,Ae,he,ye]);return r.Ay.createElement(r.Ay.Fragment,null,r.Ay.createElement(fe.A,{isOpen:W,modalHeader:Oe?.modalHeader,header:Oe?.header,hasBackdrop:Ae,tableData:Oe?.tableData,footer:Oe?.footer,className:ft.modal,onClose:ve}),te&&r.Ay.createElement(pt.A,{isOpen:K,onClose:J,confirmHandler:Be,title:V("GiftInfoConvertTitle")},r.Ay.createElement("div",null,V("GiftInfoPeerConvertDescription",{amount:(0,le.K)(V,te.starsToConvert),peer:(0,s.F9N)(V,X)},{withNodes:!0,withMarkdown:!0})),oe&&r.Ay.createElement("div",null,V("GiftInfoConvertDescriptionPeriod",{count:ne},{withNodes:!0,withMarkdown:!0,pluralValue:ne})),r.Ay.createElement("div",null,V("GiftInfoConvertDescription2"))))})));var gt=a(58554),ht=a(32625),Et=a(5463);const St="_Dt6RSQV",vt=(0,r.ph)((0,n.EK)(((e,t)=>{let{modal:a}=t;const r=a?.recipientId;return{recipient:r?(0,i.PVB)(e,r):void 0}}))((e=>{let{modal:t,recipient:a}=e;const{closeGiftUpgradeModal:i,upgradeGift:o}=(0,n.ko)(),l=Boolean(t),c=(0,m.A)(t),u=(0,m.A)(a),[A,p]=(0,r.J0)(!1),[f,g]=(0,r.J0)(),h=(0,B.A)(),E=(0,d.A)((()=>i())),S=(0,d.A)((()=>{const e=c?.gift;e?.inputGift&&(o({gift:e.inputGift,shouldKeepOriginalDetails:A,upgradeStars:e.alreadyPaidUpgradeStars?void 0:e.gift.upgradeStars}),E())})),v=(0,d.A)((()=>{c?.sampleAttributes&&g(function(e,t){const a=e.filter((e=>"model"===e.type&&e.name!==t?.model.name)),r=e.filter((e=>"pattern"===e.type&&e.name!==t?.pattern.name)),n=e.filter((e=>"backdrop"===e.type&&e.name!==t?.backdrop.name));return{model:a[Math.floor(Math.random()*a.length)],pattern:r[Math.floor(Math.random()*r.length)],backdrop:n[Math.floor(Math.random()*n.length)]}}(c.sampleAttributes,f))}));(0,ht.A)(v,l?3e3:void 0,!0),(0,r.vJ)((()=>{l&&c?.sampleAttributes&&v()}),[l,c?.sampleAttributes]),(0,r.vJ)((()=>{const e=c?.sampleAttributes;e&&[...e.filter((e=>"pattern"===e.type)).map((e=>e.sticker)),...e.filter((e=>"model"===e.type)).map((e=>e.sticker))].map((e=>(0,s.Mwy)(e,"full"))).forEach((e=>{(0,gt.hd)(e,He.qZ.BlobUrl)}))}),[c?.sampleAttributes]);const N=(0,r.Kr)((()=>{if(!f||!l)return;const e=c?.gift,t=[["diamond",h("GiftUpgradeUniqueTitle"),h("GiftUpgradeUniqueDescription")],["trade",h("GiftUpgradeTransferableTitle"),h("GiftUpgradeTransferableDescription")],["auction",h("GiftUpgradeTradeableTitle"),h("GiftUpgradeTradeableDescription")]],a=u?h("GiftPeerUpgradeText",{peer:(0,s.F9N)(h,u)}):h("GiftUpgradeTextOwn");return{listItemData:t,header:r.Ay.createElement(ge,{modelAttribute:f.model,backdropAttribute:f.backdrop,patternAttribute:f.pattern,title:h("GiftUpgradeTitle"),subtitle:a}),footer:r.Ay.createElement("div",{className:"EWaVCxY4"},!e&&r.Ay.createElement(y.A,{className:St,size:"smaller",onClick:E},h("OK")),e&&r.Ay.createElement(r.Ay.Fragment,null,r.Ay.createElement(ke.A,{label:h("GiftUpgradeKeepDetails"),onCheck:p,checked:A}),r.Ay.createElement(y.A,{className:St,size:"smaller",isShiny:!0,onClick:S},e.alreadyPaidUpgradeStars?h("GeneralConfirm"):h("GiftUpgradeButton",{amount:(0,le.U)(h,e.gift.upgradeStars,{asFont:!0})},{withNodes:!0}))))}}),[f,l,h,u,c?.gift,A]);return r.Ay.createElement(Et.A,{isOpen:l,header:N?.header,footer:N?.footer,listItemData:N?.listItemData,hasBackdrop:!0,onClose:E})})));var Nt=a(47483);const bt=(0,r.ph)((0,n.EK)((e=>({currentUser:(0,i.mBe)(e,e.currentUserId),isCurrentUserPremium:(0,i.g29)(e)})))((e=>{let{modal:t,currentUser:a,isCurrentUserPremium:s}=e;const{closeGiftStatusInfoModal:i,setEmojiStatus:l}=(0,n.ko)(),c=(0,B.A)(),u=Boolean(t),f=(0,m.A)(t),{emojiStatus:g}=f||{},h=g?.textColor,E=(0,Nt.A)(g?.patternDocumentId),S=(0,d.A)((()=>{i()})),v=(0,d.A)((()=>{g&&l({emojiStatus:g}),i()})),N=(0,r.Kr)((()=>{if(!g||!u)return;const e=[g.centerColor,g.edgeColor],t=g.patternColor;return r.Ay.createElement(X.A,{className:"_1RfhkfB",backgroundColors:e,patternColor:t,patternIcon:E.customEmoji})}),[g,u,E]),b=(0,r.Kr)((()=>({...a,emojiStatus:g})),[a,g]),C=(0,r.Kr)((()=>r.Ay.createElement("div",{className:"qL0cHbwS"},r.Ay.createElement("div",{className:(0,o.A)("t18QCmAb"),style:(0,ye.A)(h&&`color: ${h}`)},N,r.Ay.createElement(A.A,{peer:b,size:"jumbo",className:"JK2zOWA7"}),r.Ay.createElement(Ce.A,{peer:b,className:"lxxbgNCl",withEmojiStatus:!0,noFake:!0,noVerified:!0,statusSparklesColor:h}),r.Ay.createElement("p",{className:"MLMdxkUg",style:(0,ye.A)(h&&`color: ${h}`)},c("Online"))),r.Ay.createElement("div",{className:"q8w7tnmR"},r.Ay.createElement("div",{className:"wxg_5ou_"},c("UniqueStatusWearTitle",{gift:b?.emojiStatus?.title})),r.Ay.createElement("div",{className:"KSCLIMZm"},c("UniqueStatusBenefitsDescription"))))),[h,N,b,c]),k=[["radial-badge",c("UniqueStatusBadgeBenefitTitle"),c("UniqueStatusBadgeDescription")],["unique-profile",c("UniqueStatusProfileDesignBenefitTitle"),c("UniqueStatusProfileDesignDescription")],["proof-of-ownership",c("UniqueStatusProofOfOwnershipBenefitTitle"),c("UniqueStatusProofOfOwnershipDescription")]],I=(0,r.Kr)((()=>{if(u)return r.Ay.createElement("div",{className:"VDrvalBo"},r.Ay.createElement(y.A,{size:"smaller",onClick:v},c("UniqueStatusWearButton"),!s&&r.Ay.createElement(p.A,{name:"lock-badge",className:"jiPObOWv"})))}),[c,s,u]);return r.Ay.createElement(Et.A,{isOpen:u,header:C,listItemData:k,footer:I,hasBackdrop:!0,onClose:S})})));var Ct=a(21309),kt=a(76023),It=a(15535);const Gt={header:"LQgz8Nlx",giftPreview:"hgs0ts_O",backdrop:"OnBhMaBw",description:"HBxB4QPY",arrow:"kXTOUpfb",noPassword:"BnqLhoKr"},Pt={isCustomPeer:!0,avatarIcon:"fragment",title:"",customPeerAvatarColor:"#000000"},wt=4.5*kt.$,Tt=(0,r.ph)((0,n.EK)((e=>{const{settings:{byKey:{hasPassword:t}},twoFaSettings:{hint:a}}=e;return{hasPassword:t,passwordHint:a}}))((e=>{let{modal:t,hasPassword:a,passwordHint:s}=e;const{closeGiftWithdrawModal:i,clearGiftWithdrawError:o,processStarGiftWithdrawal:l}=(0,n.ko)(),c=Boolean(t),[u,f]=(0,r.J0)(!1),y=(0,B.A)(),h=(0,m.A)(t),E=h?.gift?.gift,S=E&&(0,j.uc)(E),v=h?.gift?.canExportAt?Math.max(h.gift.canExportAt-(0,ut.Fm)(),0):void 0,N=(0,d.A)((()=>{i()})),b=(0,d.A)((e=>{l({gift:h.gift.inputGift,password:e})}));return r.Ay.createElement(g.A,{isOpen:c,title:y("GiftWithdrawTitle"),hasCloseButton:!0,isSlim:!0,onClose:N},S&&r.Ay.createElement(r.Ay.Fragment,null,r.Ay.createElement("div",{className:Gt.header},r.Ay.createElement("div",{className:Gt.giftPreview},r.Ay.createElement(X.A,{className:Gt.backdrop,backgroundColors:[S.backdrop.centerColor,S.backdrop.edgeColor],patternColor:S.backdrop?.patternColor,patternIcon:S.pattern?.sticker}),r.Ay.createElement(Q.A,{className:Gt.sticker,size:wt,sticker:S.model?.sticker})),r.Ay.createElement(p.A,{name:"next",className:Gt.arrow}),r.Ay.createElement(A.A,{peer:Pt,size:"giant",className:Gt.avatar})),r.Ay.createElement("p",{className:Gt.description},y("GiftWithdrawDescription",{gift:`${E.title} #${E.number}`},{withNodes:!0,withMarkdown:!0,renderTextFilters:["br"]}))),Boolean(v)&&r.Ay.createElement("p",{className:Gt.exportHint},y("GiftWithdrawWait",{days:(0,Ct._k)(v)},{pluralValue:(0,Ct._k)(v)})),!a&&r.Ay.createElement("span",{className:Gt.noPassword},y("ErrorPasswordMissing")),a&&!v&&r.Ay.createElement(It.A,{shouldShowSubmit:!0,placeholder:y("CheckPasswordPlaceholder"),error:h?.errorKey&&y.withRegular(h?.errorKey),description:y("CheckPasswordDescription"),clearError:o,isLoading:h?.isLoading,hint:s,isPasswordVisible:u,shouldResetValue:c,onChangePasswordVisibility:f,submitLabel:y("GiftWithdrawSubmit"),onSubmit:b}))})));var Bt=a(79824),Mt=a(74984),xt=a(4875),Ut=a(56863),Dt=a(30857),Ot=a(84080),Rt=a(56133),Kt=a(35297);function Lt(){}const Ft=300;async function zt(e){const t=await(0,xt.px)("searchChats",{query:e});if(t)return[...t.accountResultIds,...t.globalResultIds]}const Jt={header:"PvaNNycU",giftPreview:"nCQxWKdu",backdrop:"JCP9JNuS",arrow:"p_1cyCau"},Vt=4*kt.$,Ht=3*kt.$,qt=(0,r.ph)((0,n.EK)((e=>{const{contactList:t,currentUserId:a}=e;return{contactIds:t?.userIds,currentUserId:a}}))((e=>{let{modal:t,contactIds:a,currentUserId:o}=e;const{closeGiftTransferModal:l,openGiftWithdrawModal:c,transferGift:u}=(0,n.ko)(),f=Boolean(t),y=(0,B.A)(),[g,h]=(0,r.J0)(""),E=(0,m.A)(t),S=E?.gift?.gift,v=S&&(0,j.uc)(S),[N,C]=(0,r.J0)(),w=(0,m.A)(N),T=(0,r.Kr)((()=>{const e=(0,n.mS)();return w?(0,i.PVB)(e,w):void 0}),[w]),M=(0,Mt.Rh)(b.DSF),x=(0,r.Kr)((()=>(0,k.Am)([...a||[],...M||[]])),[a,M]),{result:U,currentResultsQuery:D}=function(e){let{query:t,queryFn:a=zt,defaultValue:n,debounceTimeout:s=Ft,isDisabled:i}=e;const o=function(e,t,a){const[n,s]=(0,r.J0)(),{isFrozen:i,updateWhenUnfrozen:o}=function(){const e=(0,r.li)(!1),t=(0,r.hb)((()=>{e.current=!0}),[]),a=(0,Dt.A)(),n=(0,r.hb)((()=>{e.current&&(e.current=!1,a())}),[a]);return(0,Ot.Ay)(Lt,n),{isFrozen:(0,r.OV)(),updateWhenUnfrozen:t}}(),l=(0,Rt.A)(t,!0);return(0,Kt.A)((()=>{i?o():l((()=>{s(e())}))}),[...a,i]),n}((()=>t),s,[t]),[l,c]=(0,r.J0)(""),m=t?o:t,u=(0,d.A)(a);return{...(0,Ut.A)((async()=>{if(!m||i)return c(""),Promise.resolve(n);const e=await u(m);return c(m),e}),[m,n,u,i],n),currentResultsQuery:l}}({query:g,defaultValue:x}),O=D!==g,R=(0,r.Kr)((()=>D?Bt.p:[{type:"withdraw",isCustomPeer:!0,avatarIcon:"toncoin",peerColorId:5,title:y("GiftTransferTON")}]),[y,D]),K=(0,d.A)((e=>{"withdraw"===e&&(c({gift:E.gift}),l())})),L=(0,r.Kr)((()=>{if(O)return Bt.p;const e=(0,n.mS)();return(0,I.A)((U||[]).filter((t=>t!==o&&(0,i.X2D)(e,t))),!1)}),[O,U,o]),F=(0,d.A)((()=>{C(void 0)}));(0,r.vJ)((()=>{f||C(void 0)}),[f]);const z=(0,d.A)((()=>{E?.gift.inputGift&&(u({gift:E.gift.inputGift,recipientId:w,transferStars:E.gift.transferStars}),F(),l())}));return r.Ay.createElement(P.A,{isOpen:f,onClose:l,title:y("GiftTransferTitle"),hasCloseButton:!0,shouldAdaptToSearch:!0,withFixedHeight:!0,ignoreFreeze:!0},r.Ay.createElement(G.A,{itemIds:L,categories:R,onSelectedCategoryChange:K,withDefaultPadding:!0,withPeerUsernames:!0,isSearchable:!0,noScrollRestore:!0,isLoading:O,filterValue:g,filterPlaceholder:y("Search"),onFilterChange:h,onSelectedIdChange:C}),v&&r.Ay.createElement(pt.A,{isOpen:Boolean(N),noDefaultTitle:!0,onClose:F,confirmLabel:E?.gift.transferStars?y("GiftTransferConfirmButton",{amount:(0,le.U)(y,E.gift.transferStars,{asFont:!0})},{withNodes:!0}):y("GiftTransferConfirmButtonFree"),confirmHandler:z},r.Ay.createElement("div",{className:Jt.header},r.Ay.createElement("div",{className:Jt.giftPreview},r.Ay.createElement(X.A,{className:Jt.backdrop,backgroundColors:[v.backdrop.centerColor,v.backdrop.edgeColor],patternColor:v.backdrop?.patternColor,patternIcon:v.pattern?.sticker}),r.Ay.createElement(Q.A,{className:Jt.sticker,size:Ht,sticker:v.model?.sticker})),r.Ay.createElement(p.A,{name:"next",className:Jt.arrow}),r.Ay.createElement(A.A,{peer:T,size:Vt,className:Jt.avatar})),r.Ay.createElement("p",null,E?.gift.transferStars?y("GiftTransferConfirmDescription",{gift:y("GiftUnique",{title:S.title,number:S.number}),amount:(0,le.K)(y,E.gift.transferStars),peer:(0,s.F9N)(y,T)},{withNodes:!0,withMarkdown:!0}):y("GiftTransferConfirmDescriptionFree",{gift:y("GiftUnique",{title:S.title,number:S.number}),peer:(0,s.F9N)(y,T)},{withNodes:!0,withMarkdown:!0}))))})))},84991:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(84051),n=a(87357),s=a(21849),i=a(18276);const o={root:"hyRfEyRz",top:"p_Ny8jqJ",badge:"QRrryqp4",text:"I5jdPgFL"},l=(0,r.ph)((e=>{let{peer:t,avatarWebPhoto:a,avatarSize:l,text:c,badgeText:m,badgeIcon:d,className:u,badgeClassName:A,badgeIconClassName:p,textClassName:f,onClick:y}=e;return r.Ay.createElement("div",{className:(0,n.A)(o.root,y&&o.clickable,u),onClick:y},r.Ay.createElement("div",{className:o.top},r.Ay.createElement(s.A,{size:l,peer:t,webPhoto:a}),m&&r.Ay.createElement("div",{className:(0,n.A)(o.badge,A)},d&&r.Ay.createElement(i.A,{name:d,className:p}),m)),c&&r.Ay.createElement("p",{className:(0,n.A)(o.text,f)},c))}))},34642:(e,t,a)=>{a.d(t,{A:()=>c});var r=a(84051),n=a(87357),s=a(59030),i=a(64493),o=a(8410);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},l.apply(this,arguments)}const c=(0,r.ph)((e=>{let{confirmButtonText:t,isConfirmDisabled:a,shouldAdaptToSearch:c,withFixedHeight:m,onConfirm:d,withPremiumGradient:u,...A}=e;const p=(0,s.A)(),f=Boolean(t||d);return r.Ay.createElement(o.A,l({},A,{isSlim:!0,className:(0,n.A)(c&&"WGSZ8u75",m&&"CrEsDylb",A.className),contentClassName:(0,n.A)("FuFYE0AA",A.contentClassName),headerClassName:(0,n.A)("iEptOmIp",A.headerClassName)}),A.children,f&&r.Ay.createElement("div",{className:"HqeDTaSr"},r.Ay.createElement(i.A,{withPremiumGradient:u,onClick:d||A.onClose,color:"primary",size:"smaller",disabled:a},t||p("Confirm"))))}))},5463:(e,t,a)=>{a.d(t,{A:()=>m});var r=a(84051),n=a(87357),s=a(18276),i=a(64493),o=a(22720),l=a(8410),c=a(32581);const m=(0,r.ph)((e=>{let{isOpen:t,listItemData:a,headerIconName:m,header:d,footer:u,buttonText:A,hasBackdrop:p,withSeparator:f,onClose:y,onButtonClick:g,contentClassName:h}=e;return r.Ay.createElement(l.A,{isOpen:t,className:(0,n.A)("LAh8evux",h),contentClassName:"hrizpMDe",hasAbsoluteCloseButton:!0,absoluteCloseButtonColor:p?"translucent-white":void 0,onClose:y},m&&r.Ay.createElement("div",{className:"jySLtQNG"},r.Ay.createElement(s.A,{name:m})),d,r.Ay.createElement("div",null,a?.map((e=>{let[t,a,n]=e;return r.Ay.createElement(o.A,{isStatic:!0,multiline:!0,icon:t,iconClassName:"hQbEPsTU"},r.Ay.createElement("span",{className:"title"},a),r.Ay.createElement("span",{className:"subtitle"},n))}))),f&&r.Ay.createElement(c.A,{className:"En1zD2cT"}),u,A&&r.Ay.createElement(i.A,{size:"smaller",onClick:g||y},A))}))},70046:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(84051),n=a(13439),s=a(87357),i=a(17712),o=a(21849),l=a(10187),c=a(64493),m=a(8410);const d="Cnh5ENvm",u=(0,r.ph)((e=>{let{isOpen:t,title:a,tableData:u,headerAvatarPeer:A,header:p,modalHeader:f,footer:y,buttonText:g,className:h,hasBackdrop:E,onClose:S,onButtonClick:v}=e;const{openChat:N}=(0,n.ko)(),b=(0,i.A)((e=>{N({id:e}),S()}));return r.Ay.createElement(m.A,{isOpen:t,hasCloseButton:Boolean(a),hasAbsoluteCloseButton:!a,absoluteCloseButtonColor:E?"translucent-white":void 0,isSlim:!0,header:f,title:a,className:h,contentClassName:"KYHkJ9Qf",onClose:S},A&&r.Ay.createElement(o.A,{peer:A,size:"jumbo",className:"SHQbPR5Y"}),p,r.Ay.createElement("div",{className:"DFRB0Ad4"},u?.map((e=>{let[t,a]=e;return r.Ay.createElement(r.Ay.Fragment,null,t&&r.Ay.createElement("div",{className:(0,s.A)(d,"AwnUe4Qk")},t),r.Ay.createElement("div",{className:(0,s.A)(d,"JGH6P9Az",!t&&"UssCZwgy")},"object"==typeof a&&"chatId"in a?r.Ay.createElement(l.A,{peerId:a.chatId,className:"aS9U4hiQ",forceShowSelf:!0,withEmojiStatus:a.withEmojiStatus,clickArg:a.chatId,onClick:b}):a))}))),y,g&&r.Ay.createElement(c.A,{className:y?void 0:"cSamlkt9",size:"smaller",onClick:v||S},g))}))},1526:(e,t,a)=>{a.d(t,{A:()=>f});var r=a(84051),n=a(87357),s=a(17142),i=a(14242),o=a(4961),l=a(37661),c=a(39351),m=a(59030),d=a(18276),u=a(9267),A=a(64493);const p={options:"OnCj9kef",option:"tpTHQAUF",active:"U_9MXPG5",wideOption:"dJcJl33b",optionTop:"x9G4lqMf",stackedStars:"etXLebjM",stackedStar:"swttXv9P",optionBottom:"tK7La7L2",moreOptions:"AWXBaWLW",iconDown:"zWYHZJmd"},f=(0,r.ph)((e=>{let{isActive:t,className:a,options:f,selectedStarOption:y,selectedStarCount:g,starsNeeded:h,onClick:E}=e;const S=(0,m.A)(),v=(0,c.A)(),[N,b,C]=(0,l.A)();(0,r.vJ)((()=>{t||C()}),[t]);const[k,I]=(0,r.Kr)((()=>{if(!f)return[void 0,!1];const e=f.reduce(((e,t)=>e.stars>t.stars?e:t)),t=h&&e.stars<h,a=[];let r=0,n=!1;return f.forEach(((e,s)=>{e.isExtended||r++,h&&!t&&e.stars<h||(N||!e.isExtended?a.push({option:e,starsCount:Math.min(r,6),isWide:s===f.length-1}):n=!0)})),[a,n]}),[N,f,h]);return r.Ay.createElement("div",{className:(0,n.A)(p.options,a)},k?.map((e=>{let{option:t,starsCount:a,isWide:l}=e;const c=k?.length,m=c%2==0,d=t===y;let A;if(t&&"winners"in t){const e=t.winners.find((e=>e.users===g))||t.winners.reduce(((e,t)=>t.users>e.users?t:e),t.winners[0]);A=e?.perUserStars}return r.Ay.createElement("div",{className:(0,n.A)(p.option,!m&&l&&p.wideOption,d&&p.active),key:t.stars,onClick:()=>E?.(t)},r.Ay.createElement("div",{className:p.optionTop},"+",(0,i.Sm)(t.stars),r.Ay.createElement("div",{className:p.stackedStars,dir:v.isRtl?"ltr":"rtl"},Array.from({length:a}).map((()=>r.Ay.createElement(u.A,{className:p.stackedStar,type:"gold",size:"big"}))))),r.Ay.createElement("div",{className:p.optionBottom},(0,s.v)(v,t.amount,t.currency)),(d||y&&"winners"in y)&&A&&r.Ay.createElement("div",{className:p.optionBottom},r.Ay.createElement("div",{className:p.perUserStars},(0,o.A)(S("BoostGift.Stars.PerUser",(0,i.Sm)(A))))))})),!N&&I&&r.Ay.createElement(A.A,{className:p.moreOptions,isText:!0,noForcedUpperCase:!0,onClick:b},S("Stars.Purchase.ShowMore"),r.Ay.createElement(d.A,{className:p.iconDown,name:"down"})))}))}}]);
//# sourceMappingURL=telegram-a.6930.aebff3f5ab660b419e4e.js.map